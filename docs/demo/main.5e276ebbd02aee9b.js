"use strict";(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[179],{2011:(st,Te,k)=>{k.d(Te,{Dh:()=>de,GT:()=>pe,cc:()=>Ae,hO:()=>qe,on:()=>B,pX:()=>X,xv:()=>ue});var d=k(5e3),W=k(127),O=k(5813);st=k.hmd(st);const oe=["ngOnDestroy"],X=(we,et,ze,Ie={})=>new Proxy(we,{get:(_e,ve)=>ze.runOutsideAngular(()=>{var je;if(we[ve])return(null===(je=null==Ie?void 0:Ie.spy)||void 0===je?void 0:je.get)&&Ie.spy.get(ve,we[ve]),we[ve];if(oe.indexOf(ve)>-1)return()=>{};const Be=et.toPromise().then(ne=>{const Ze=ne&&ne[ve];return"function"==typeof Ze?Ze.bind(ne):Ze&&Ze.then?Ze.then(J=>ze.run(()=>J)):ze.run(()=>Ze)});return new Proxy(()=>{},{get:(ne,Ze)=>Be[Ze],apply:(ne,Ze,J)=>Be.then(se=>{var te;const Ee=se&&se(...J);return(null===(te=null==Ie?void 0:Ie.spy)||void 0===te?void 0:te.apply)&&Ie.spy.apply(ve,J,Ee),Ee})})})}),pe=(we,et)=>{et.forEach(ze=>{Object.getOwnPropertyNames(ze.prototype||ze).forEach(Ie=>{Object.defineProperty(we.prototype,Ie,Object.getOwnPropertyDescriptor(ze.prototype||ze,Ie))})})};class ie{constructor(et){return et}}const de=new d.OlP("angularfire2.app.options"),ue=new d.OlP("angularfire2.app.name");function B(we,et,ze){const _e="object"==typeof ze&&ze||{};_e.name=_e.name||"string"==typeof ze&&ze||"[DEFAULT]";const je=W.Z.apps.filter(Be=>Be&&Be.name===_e.name)[0]||et.runOutsideAngular(()=>W.Z.initializeApp(we,_e));try{JSON.stringify(we)!==JSON.stringify(je.options)&&j("error",`${je.name} Firebase App already initialized with different options${st.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Be){}return new ie(je)}const j=(we,...et)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[we](...et)},Y={provide:ie,useFactory:B,deps:[de,d.R0b,[new d.FiY,ue]]};let qe=(()=>{class we{constructor(ze){W.Z.registerVersion("angularfire",O.q4.full,"core"),W.Z.registerVersion("angularfire",O.q4.full,"app-compat"),W.Z.registerVersion("angular",d.q4F.full,ze.toString())}static initializeApp(ze,Ie){return{ngModule:we,providers:[{provide:de,useValue:ze},{provide:ue,useValue:Ie}]}}}return we.\u0275fac=function(ze){return new(ze||we)(d.LFG(d.Lbi))},we.\u0275mod=d.oAB({type:we}),we.\u0275inj=d.cJS({providers:[Y]}),we})();function Ae(we,et,ze,Ie,_e){const[,ve,je]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===we)||[];if(ve)return function Re(we,et){try{return we.toString()===et.toString()}catch(ze){return we===et}}(_e,je)||(fe("error",`${et} was already initialized on the ${ze} Firebase App with different settings.${Pe?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:_e,was:je})),ve;{const Be=Ie();return globalThis.\u0275AngularfireInstanceCache.push([we,Be,_e]),Be}}const Pe=!!st.hot,fe=(we,...et)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[we](...et)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(st,Te,k)=>{k.d(Te,{q4:()=>wl,iC:()=>Il,HU:()=>xa,vb:()=>bu,JM:()=>Gs});var d=k(5e3),W=k(5867),O=k(5861),oe=k(9681),X=k(2090),pe=k(4859),ie=k(1877);const de="@firebase/installations",j="w:0.5.8",Y="FIS_v2",we=new X.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function et(I){return I instanceof X.ZR&&I.code.includes("request-failed")}function ze({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ie(I){return{token:I.token,requestStatus:2,expiresIn:J(I.expiresIn),creationTime:Date.now()}}function _e(I,D){return ve.apply(this,arguments)}function ve(){return(ve=(0,O.Z)(function*(I,D){const F=(yield D.json()).error;return we.create("request-failed",{requestName:I,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Be(I,{refreshToken:D}){const x=je(I);return x.append("Authorization",function se(I){return`${Y} ${I}`}(D)),x}function ne(I){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,O.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function J(I){return Number(I.replace("s","000"))}function te(I,D){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:D},{fid:x}){const F=ze(I),Z=je(I),ee=D.getImmediate({optional:!0});if(ee){const yt=yield ee.getHeartbeatsHeader();yt&&Z.append("x-firebase-client",yt)}const Ke={method:"POST",headers:Z,body:JSON.stringify({fid:x,authVersion:Y,appId:I.appId,sdkVersion:j})},nt=yield ne(()=>fetch(F,Ke));if(nt.ok){const yt=yield nt.json();return{fid:yt.fid||x,registrationStatus:2,refreshToken:yt.refreshToken,authToken:Ie(yt.authToken)}}throw yield _e("Create Installation",nt)})).apply(this,arguments)}function ge(I){return new Promise(D=>{setTimeout(D,I)})}const bt=/^[cdef][\w-]{21}$/;function nn(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const x=function He(I){return function ke(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return bt.test(x)?x:""}catch(I){return""}}function Lt(I){return`${I.appName}!${I.appId}`}const Qn=new Map;function Cn(I,D){const x=Lt(I);$t(x,D),function Vt(I,D){const x=function Xr(){return!hr&&"BroadcastChannel"in self&&(hr=new BroadcastChannel("[Firebase] FID Change"),hr.onmessage=I=>{$t(I.data.key,I.data.fid)}),hr}();x&&x.postMessage({key:I,fid:D}),function Ts(){0===Qn.size&&hr&&(hr.close(),hr=null)}()}(x,D)}function $t(I,D){const x=Qn.get(I);if(x)for(const F of x)F(D)}let hr=null;const kr="firebase-installations-store";let as=null;function us(){return as||(as=(0,X.X3)("firebase-installations-database",1,(I,D)=>{0===D&&I.createObjectStore(kr)})),as}function at(I,D){return $r.apply(this,arguments)}function $r(){return($r=(0,O.Z)(function*(I,D){const x=Lt(I),Z=(yield us()).transaction(kr,"readwrite"),ee=Z.objectStore(kr),xe=yield ee.get(x);return yield ee.put(D,x),yield Z.complete,(!xe||xe.fid!==D.fid)&&Cn(I,D.fid),D})).apply(this,arguments)}function Jn(I){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,O.Z)(function*(I){const D=Lt(I),F=(yield us()).transaction(kr,"readwrite");yield F.objectStore(kr).delete(D),yield F.complete})).apply(this,arguments)}function ei(I,D){return no.apply(this,arguments)}function no(){return(no=(0,O.Z)(function*(I,D){const x=Lt(I),Z=(yield us()).transaction(kr,"readwrite"),ee=Z.objectStore(kr),xe=yield ee.get(x),Ke=D(xe);return void 0===Ke?yield ee.delete(x):yield ee.put(Ke,x),yield Z.complete,Ke&&(!xe||xe.fid!==Ke.fid)&&Cn(I,Ke.fid),Ke})).apply(this,arguments)}function mn(I){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,O.Z)(function*(I){let D;const x=yield ei(I.appConfig,F=>{const Z=As(F),ee=ma(I,Z);return D=ee.registrationPromise,ee.installationEntry});return""===x.fid?{installationEntry:yield D}:{installationEntry:x,registrationPromise:D}})).apply(this,arguments)}function As(I){return Pt(I||{fid:nn(),registrationStatus:0})}function ma(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(we.create("app-offline"))};const x={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function Ut(I,D){return rt.apply(this,arguments)}(I,x);return{installationEntry:x,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:mt(I)}:{installationEntry:D}}function rt(){return(rt=(0,O.Z)(function*(I,D){try{const x=yield te(I,D);return at(I.appConfig,x)}catch(x){throw et(x)&&409===x.customData.serverCode?yield Jn(I.appConfig):yield at(I.appConfig,{fid:D.fid,registrationStatus:0}),x}})).apply(this,arguments)}function mt(I){return fr.apply(this,arguments)}function fr(){return(fr=(0,O.Z)(function*(I){let D=yield Fi(I.appConfig);for(;1===D.registrationStatus;)yield ge(100),D=yield Fi(I.appConfig);if(0===D.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield mn(I);return F||x}return D})).apply(this,arguments)}function Fi(I){return ei(I,D=>{if(!D)throw we.create("installation-not-found");return Pt(D)})}function Pt(I){return function ro(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function br(I,D){return pr.apply(this,arguments)}function pr(){return(pr=(0,O.Z)(function*({appConfig:I,heartbeatServiceProvider:D},x){const F=ut(I,x),Z=Be(I,x),ee=D.getImmediate({optional:!0});if(ee){const yt=yield ee.getHeartbeatsHeader();yt&&Z.append("x-firebase-client",yt)}const Ke={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:j,appId:I.appId}})},nt=yield ne(()=>fetch(F,Ke));if(nt.ok)return Ie(yield nt.json());throw yield _e("Generate Auth Token",nt)})).apply(this,arguments)}function ut(I,{fid:D}){return`${ze(I)}/${D}/authTokens:generate`}function Ir(I){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,O.Z)(function*(I,D=!1){let x;const F=yield ei(I.appConfig,ee=>{if(!St(ee))throw we.create("not-registered");const xe=ee.authToken;if(!D&&U(xe))return ee;if(1===xe.requestStatus)return x=We(I,D),ee;{if(!navigator.onLine)throw we.create("app-offline");const Ke=H(ee);return x=lt(I,Ke),Ke}});return x?yield x:F.authToken})).apply(this,arguments)}function We(I,D){return De.apply(this,arguments)}function De(){return(De=(0,O.Z)(function*(I,D){let x=yield Je(I.appConfig);for(;1===x.authToken.requestStatus;)yield ge(100),x=yield Je(I.appConfig);const F=x.authToken;return 0===F.requestStatus?Ir(I,D):F})).apply(this,arguments)}function Je(I){return ei(I,D=>{if(!St(D))throw we.create("not-registered");return function le(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function lt(I,D){return kt.apply(this,arguments)}function kt(){return(kt=(0,O.Z)(function*(I,D){try{const x=yield br(I,D),F=Object.assign(Object.assign({},D),{authToken:x});return yield at(I.appConfig,F),x}catch(x){if(!et(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield at(I.appConfig,F)}else yield Jn(I.appConfig);throw x}})).apply(this,arguments)}function St(I){return void 0!==I&&2===I.registrationStatus}function U(I){return 2===I.requestStatus&&!function L(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function H(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function Ve(){return(Ve=(0,O.Z)(function*(I){const D=I,{installationEntry:x,registrationPromise:F}=yield mn(D);return F?F.catch(console.error):Ir(D).catch(console.error),x.fid})).apply(this,arguments)}function Ht(){return(Ht=(0,O.Z)(function*(I,D=!1){const x=I;return yield Dr(x),(yield Ir(x,D)).token})).apply(this,arguments)}function Dr(I){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,O.Z)(function*(I){const{registrationPromise:D}=yield mn(I);D&&(yield D)})).apply(this,arguments)}function Gn(I){return we.create("missing-app-config-values",{valueName:I})}const _a="installations",Ne=I=>{const D=I.getProvider("app").getImmediate(),x=function ls(I){if(!I||!I.options)throw Gn("App Configuration");if(!I.name)throw Gn("App Name");const D=["projectId","apiKey","appId"];for(const x of D)if(!I.options[x])throw Gn(x);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D);return{app:D,appConfig:x,heartbeatServiceProvider:(0,oe._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},At=I=>{const D=I.getProvider("app").getImmediate(),x=(0,oe._getProvider)(D,_a).getImmediate();return{getId:()=>function K(I){return Ve.apply(this,arguments)}(x),getToken:Z=>function gt(I){return Ht.apply(this,arguments)}(x,Z)}};(function cn(){(0,oe._registerComponent)(new pe.wA(_a,Ne,"PUBLIC")),(0,oe._registerComponent)(new pe.wA("installations-internal",At,"PRIVATE"))})(),(0,oe.registerVersion)(de,"0.5.8"),(0,oe.registerVersion)(de,"0.5.8","esm2017");const gr="@firebase/remote-config",Mn=new X.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class vh{constructor(D,x,F,Z){this.client=D,this.storage=x,this.storageCache=F,this.logger=Z}isCachedDataFresh(D,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,Z=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Z}.`),Z}fetch(D){var x=this;return(0,O.Z)(function*(){const[F,Z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Z&&x.isCachedDataFresh(D.cacheMaxAgeMillis,F))return Z;D.eTag=Z&&Z.eTag;const ee=yield x.client.fetch(D),xe=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ee.status&&xe.push(x.storage.setLastSuccessfulFetchResponse(ee)),yield Promise.all(xe),ee})()}}function Nc(I=navigator){return I.languages&&I.languages[0]||I.language}class eu{constructor(D,x,F,Z,ee,xe){this.firebaseInstallations=D,this.sdkVersion=x,this.namespace=F,this.projectId=Z,this.apiKey=ee,this.appId=xe}fetch(D){var x=this;return(0,O.Z)(function*(){const[F,Z]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),xe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,Ke={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},nt={sdk_version:x.sdkVersion,app_instance_id:F,app_instance_id_token:Z,app_id:x.appId,language_code:Nc()},yt={method:"POST",headers:Ke,body:JSON.stringify(nt)},Ft=fetch(xe,yt),wt=new Promise((an,vn)=>{D.signal.addEventListener(()=>{const Ki=new Error("The operation was aborted.");Ki.name="AbortError",vn(Ki)})});let jn;try{yield Promise.race([Ft,wt]),jn=yield Ft}catch(an){let vn="fetch-client-network";throw"AbortError"===an.name&&(vn="fetch-timeout"),Mn.create(vn,{originalErrorMessage:an.message})}let kn=jn.status;const qs=jn.headers.get("ETag")||void 0;let Zo,oi;if(200===jn.status){let an;try{an=yield jn.json()}catch(vn){throw Mn.create("fetch-client-parse",{originalErrorMessage:vn.message})}Zo=an.entries,oi=an.state}if("INSTANCE_STATE_UNSPECIFIED"===oi?kn=500:"NO_CHANGE"===oi?kn=304:("NO_TEMPLATE"===oi||"EMPTY_CONFIG"===oi)&&(Zo={}),304!==kn&&200!==kn)throw Mn.create("fetch-status",{httpStatus:kn});return{status:kn,eTag:qs,config:Zo}})()}}class op{constructor(D,x){this.client=D,this.storage=x}fetch(D){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:x,backoffCount:F}){var Z=this;return(0,O.Z)(function*(){yield function Vn(I,D){return new Promise((x,F)=>{const Z=Math.max(D-Date.now(),0),ee=setTimeout(x,Z);I.addEventListener(()=>{clearTimeout(ee),F(Mn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,x);try{const ee=yield Z.client.fetch(D);return yield Z.storage.deleteThrottleMetadata(),ee}catch(ee){if(!function Oc(I){if(!(I instanceof X.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ee))throw ee;const xe={throttleEndTimeMillis:Date.now()+(0,X.$s)(F),backoffCount:F+1};return yield Z.storage.setThrottleMetadata(xe),Z.attemptFetch(D,xe)}})()}}class kc{constructor(D,x,F,Z,ee){this.app=D,this._client=x,this._storageCache=F,this._storage=Z,this._logger=ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Xu(I,D){const x=I.target.error||void 0;return Mn.create(D,{originalErrorMessage:x&&x.message})}const Ns="app_namespace_store";class cp{constructor(D,x,F,Z=function lp(){return new Promise((I,D)=>{try{const x=indexedDB.open("firebase_remote_config",1);x.onerror=F=>{D(Xu(F,"storage-open"))},x.onsuccess=F=>{I(F.target.result)},x.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Ns,{keyPath:"compositeKey"})}}catch(x){D(Mn.create("storage-open",{originalErrorMessage:x}))}})}()){this.appId=D,this.appName=x,this.namespace=F,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Z,ee)=>{const Ke=F.transaction([Ns],"readonly").objectStore(Ns),nt=x.createCompositeKey(D);try{const yt=Ke.get(nt);yt.onerror=Ft=>{ee(Xu(Ft,"storage-get"))},yt.onsuccess=Ft=>{const wt=Ft.target.result;Z(wt?wt.value:void 0)}}catch(yt){ee(Mn.create("storage-get",{originalErrorMessage:yt&&yt.message}))}})})()}set(D,x){var F=this;return(0,O.Z)(function*(){const Z=yield F.openDbPromise;return new Promise((ee,xe)=>{const nt=Z.transaction([Ns],"readwrite").objectStore(Ns),yt=F.createCompositeKey(D);try{const Ft=nt.put({compositeKey:yt,value:x});Ft.onerror=wt=>{xe(Xu(wt,"storage-set"))},Ft.onsuccess=()=>{ee()}}catch(Ft){xe(Mn.create("storage-set",{originalErrorMessage:Ft&&Ft.message}))}})})()}delete(D){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Z,ee)=>{const Ke=F.transaction([Ns],"readwrite").objectStore(Ns),nt=x.createCompositeKey(D);try{const yt=Ke.delete(nt);yt.onerror=Ft=>{ee(Xu(Ft,"storage-delete"))},yt.onsuccess=()=>{Z()}}catch(yt){ee(Mn.create("storage-delete",{originalErrorMessage:yt&&yt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Fc{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const x=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),Z=D.storage.getActiveConfig(),ee=yield x;ee&&(D.lastFetchStatus=ee);const xe=yield F;xe&&(D.lastSuccessfulFetchTimestampMillis=xe);const Ke=yield Z;Ke&&(D.activeConfig=Ke)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function oo(){return wh.apply(this,arguments)}function wh(){return(wh=(0,O.Z)(function*(){if(!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(I){return!1}})).apply(this,arguments)}!function Fo(){(0,oe._registerComponent)(new pe.wA("remote-config",function I(D,{instanceIdentifier:x}){const F=D.getProvider("app").getImmediate(),Z=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Mn.create("registration-window");if(!(0,X.hl)())throw Mn.create("indexed-db-unavailable");const{projectId:ee,apiKey:xe,appId:Ke}=F.options;if(!ee)throw Mn.create("registration-project-id");if(!xe)throw Mn.create("registration-api-key");if(!Ke)throw Mn.create("registration-app-id");const nt=new cp(Ke,F.name,x=x||"firebase"),yt=new Fc(nt),Ft=new ie.Yd(gr);Ft.logLevel=ie.in.ERROR;const wt=new eu(Z,oe.SDK_VERSION,x,ee,xe,Ke),jn=new op(wt,nt),kn=new vh(jn,nt,yt,Ft),qs=new kc(F,kn,yt,nt,Ft);return function Pr(I){const D=(0,X.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(qs),qs},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(gr,"0.3.7"),(0,oe.registerVersion)(gr,"0.3.7","esm2017")}();const el="/firebase-messaging-sw.js",Os="/firebase-cloud-messaging-push-scope",Gr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ao="google.c.a.c_id",wa="google.c.a.c_l",Lc="google.c.a.ts",dp="google.c.a.e";var ks=(()=>{return(I=ks||(ks={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",ks;var I})();function ri(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function nu(I){const x=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),Z=new Uint8Array(F.length);for(let ee=0;ee<F.length;++ee)Z[ee]=F.charCodeAt(ee);return Z}const ru="fcm_token_details_db",mr="fcm_token_object_Store";function Eh(I){return iu.apply(this,arguments)}function iu(){return iu=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ee=>ee.name).includes(ru))return null;let D=null;return(yield(0,X.X3)(ru,5,function(){var F=(0,O.Z)(function*(Z,ee,xe,Ke){var nt;if(ee<2||!Z.objectStoreNames.contains(mr))return;const yt=Ke.objectStore(mr),Ft=yield yt.index("fcmSenderId").get(I);if(yield yt.clear(),Ft)if(2===ee){const wt=Ft;if(!wt.auth||!wt.p256dh||!wt.endpoint)return;D={token:wt.fcmToken,createTime:null!==(nt=wt.createTime)&&void 0!==nt?nt:Date.now(),subscriptionOptions:{auth:wt.auth,p256dh:wt.p256dh,endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:"string"==typeof wt.vapidKey?wt.vapidKey:ri(wt.vapidKey)}}}else if(3===ee){const wt=Ft;D={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:ri(wt.auth),p256dh:ri(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:ri(wt.vapidKey)}}}else if(4===ee){const wt=Ft;D={token:wt.fcmToken,createTime:wt.createTime,subscriptionOptions:{auth:ri(wt.auth),p256dh:ri(wt.p256dh),endpoint:wt.endpoint,swScope:wt.swScope,vapidKey:ri(wt.vapidKey)}}}});return function(Z,ee,xe,Ke){return F.apply(this,arguments)}}())).close(),yield(0,X.Lj)(ru),yield(0,X.Lj)("fcm_vapid_details_db"),yield(0,X.Lj)("undefined"),Vc(D)?D:null}),iu.apply(this,arguments)}function Vc(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const fs="firebase-messaging-store";let Ea=null;function tl(){return Ea||(Ea=(0,X.X3)("firebase-messaging-database",1,(I,D)=>{0===D&&I.createObjectStore(fs)})),Ea}function fn(I){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,O.Z)(function*(I){const D=lo(I),F=yield(yield tl()).transaction(fs).objectStore(fs).get(D);if(F)return F;{const Z=yield Eh(I.appConfig.senderId);if(Z)return yield Ps(I,Z),Z}})).apply(this,arguments)}function Ps(I,D){return on.apply(this,arguments)}function on(){return(on=(0,O.Z)(function*(I,D){const x=lo(I),Z=(yield tl()).transaction(fs,"readwrite");return yield Z.objectStore(fs).put(D,x),yield Z.complete,D})).apply(this,arguments)}function Uc(I){return uo.apply(this,arguments)}function uo(){return(uo=(0,O.Z)(function*(I){const D=lo(I),F=(yield tl()).transaction(fs,"readwrite");yield F.objectStore(fs).delete(D),yield F.complete})).apply(this,arguments)}function lo({appConfig:I}){return I.appId}const Rn=new X.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ba(I,D){return yi.apply(this,arguments)}function yi(){return(yi=(0,O.Z)(function*(I,D){const x=yield Ls(I),F=ct(D),Z={method:"POST",headers:x,body:JSON.stringify(F)};let ee;try{ee=yield(yield fetch(Zr(I.appConfig),Z)).json()}catch(xe){throw Rn.create("token-subscribe-failed",{errorInfo:xe})}if(ee.error)throw Rn.create("token-subscribe-failed",{errorInfo:ee.error.message});if(!ee.token)throw Rn.create("token-subscribe-no-token");return ee.token})).apply(this,arguments)}function Tr(I,D){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,O.Z)(function*(I,D){const x=yield Ls(I),F=ct(D.subscriptionOptions),Z={method:"PATCH",headers:x,body:JSON.stringify(F)};let ee;try{ee=yield(yield fetch(`${Zr(I.appConfig)}/${D.token}`,Z)).json()}catch(xe){throw Rn.create("token-update-failed",{errorInfo:xe})}if(ee.error)throw Rn.create("token-update-failed",{errorInfo:ee.error.message});if(!ee.token)throw Rn.create("token-update-no-token");return ee.token})).apply(this,arguments)}function ps(I,D){return au.apply(this,arguments)}function au(){return(au=(0,O.Z)(function*(I,D){const F={method:"DELETE",headers:yield Ls(I)};try{const ee=yield(yield fetch(`${Zr(I.appConfig)}/${D}`,F)).json();if(ee.error)throw Rn.create("token-unsubscribe-failed",{errorInfo:ee.error.message})}catch(Z){throw Rn.create("token-unsubscribe-failed",{errorInfo:Z})}})).apply(this,arguments)}function Zr({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function Ls(I){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,O.Z)(function*({appConfig:I,installations:D}){const x=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function ct({p256dh:I,auth:D,endpoint:x,vapidKey:F}){const Z={web:{endpoint:x,auth:D,p256dh:I}};return F!==Gr&&(Z.web.applicationPubKey=F),Z}const uu=6048e5;function Ia(I){return lu.apply(this,arguments)}function lu(){return(lu=(0,O.Z)(function*(I){const D=yield il(I.swRegistration,I.vapidKey),x={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:ri(D.getKey("auth")),p256dh:ri(D.getKey("p256dh"))},F=yield fn(I.firebaseDependencies);if(F){if(Bo(F.subscriptionOptions,x))return Date.now()>=F.createTime+uu?nl(I,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield ps(I.firebaseDependencies,F.token)}catch(Z){console.warn(Z)}return be(I.firebaseDependencies,x)}return be(I.firebaseDependencies,x)})).apply(this,arguments)}function cu(I){return du.apply(this,arguments)}function du(){return(du=(0,O.Z)(function*(I){const D=yield fn(I.firebaseDependencies);D&&(yield ps(I.firebaseDependencies,D.token),yield Uc(I.firebaseDependencies));const x=yield I.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function nl(I,D){return rl.apply(this,arguments)}function rl(){return(rl=(0,O.Z)(function*(I,D){try{const x=yield Tr(I.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:x,createTime:Date.now()});return yield Ps(I.firebaseDependencies,F),x}catch(x){throw yield cu(I),x}})).apply(this,arguments)}function be(I,D){return xt.apply(this,arguments)}function xt(){return(xt=(0,O.Z)(function*(I,D){const F={token:yield ba(I,D),createTime:Date.now(),subscriptionOptions:D};return yield Ps(I,F),F.token})).apply(this,arguments)}function il(I,D){return wn.apply(this,arguments)}function wn(){return(wn=(0,O.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:nu(D)})})).apply(this,arguments)}function Bo(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function jo(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function zr(I,D){if(!D.notification)return;I.notification={};const x=D.notification.title;x&&(I.notification.title=x);const F=D.notification.body;F&&(I.notification.body=F);const Z=D.notification.image;Z&&(I.notification.image=Z)}(D,I),function sl(I,D){!D.data||(I.data=D.data)}(D,I),function ol(I,D){if(!D.fcmOptions)return;I.fcmOptions={};const x=D.fcmOptions.link;x&&(I.fcmOptions.link=x);const F=D.fcmOptions.analytics_label;F&&(I.fcmOptions.analyticsLabel=F)}(D,I),D}function Bc(I){return"object"==typeof I&&!!I&&ao in I}function al(I,D){const x=[];for(let F=0;F<I.length;F++)x.push(I.charAt(F)),F<D.length&&x.push(D.charAt(F));return x.join("")}function Us(I){return Rn.create("missing-app-config-values",{valueName:I})}al("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),al("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class yr{constructor(D,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function hu(I){if(!I||!I.options)throw Us("App Configuration Object");if(!I.name)throw Us("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:x}=I;for(const F of D)if(!x[F])throw Us(F);return{appName:I.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Z,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ii(I){return fu.apply(this,arguments)}function fu(){return(fu=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(el,{scope:Os}),I.swRegistration.update().catch(()=>{})}catch(D){throw Rn.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function Bs(I,D){return _i.apply(this,arguments)}function _i(){return(_i=(0,O.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield ii(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Rn.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function ul(I,D){return pu.apply(this,arguments)}function pu(){return(pu=(0,O.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=Gr)})).apply(this,arguments)}function ll(){return(ll=(0,O.Z)(function*(I,D){if(!navigator)throw Rn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Rn.create("permission-blocked");return yield ul(I,null==D?void 0:D.vapidKey),yield Bs(I,null==D?void 0:D.serviceWorkerRegistration),Ia(I)})).apply(this,arguments)}function Da(I,D,x){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,O.Z)(function*(I,D,x){const F=cl(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[ao],message_name:x[wa],message_time:x[Lc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function cl(I){switch(I){case ks.NOTIFICATION_CLICKED:return"notification_open";case ks.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function jc(){return(jc=(0,O.Z)(function*(I,D){const x=D.data;if(!x.isFirebaseMessaging)return;I.onMessageHandler&&x.messageType===ks.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(jo(x)):I.onMessageHandler.next(jo(x)));const F=x.data;Bc(F)&&"1"===F[dp]&&(yield Da(I,x.messageType,F))})).apply(this,arguments)}const hl="@firebase/messaging",$c=I=>{const D=new yr(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function dl(I,D){return jc.apply(this,arguments)}(D,x)),D},ho=I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:F=>function gu(I,D){return ll.apply(this,arguments)}(D,F)}};function Gc(){return fo.apply(this,arguments)}function fo(){return(fo=(0,O.Z)(function*(){try{yield(0,X.eu)()}catch(I){return!1}return"undefined"!=typeof window&&(0,X.hl)()&&(0,X.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Hc(){(0,oe._registerComponent)(new pe.wA("messaging",$c,"PUBLIC")),(0,oe._registerComponent)(new pe.wA("messaging-internal",ho,"PRIVATE")),(0,oe.registerVersion)(hl,"0.9.12"),(0,oe.registerVersion)(hl,"0.9.12","esm2017")}();const pl="analytics",xm="firebase_id",Ta="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",mu="https://www.googletagmanager.com/gtag/js",Un=new ie.Yd("@firebase/analytics");function qc(I){return Promise.all(I.map(D=>D.catch(x=>x)))}function hp(I,D){const x=document.createElement("script");x.src=`${mu}?l=${I}&id=${D}`,x.async=!0,document.head.appendChild(x)}function $o(I,D,x,F,Z,ee){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,O.Z)(function*(I,D,x,F,Z,ee){const xe=F[Z];try{if(xe)yield D[xe];else{const nt=(yield qc(x)).find(yt=>yt.measurementId===Z);nt&&(yield D[nt.appId])}}catch(Ke){Un.error(Ke)}I("config",Z,ee)})).apply(this,arguments)}function ml(I,D,x,F,Z){return po.apply(this,arguments)}function po(){return(po=(0,O.Z)(function*(I,D,x,F,Z){try{let ee=[];if(Z&&Z.send_to){let xe=Z.send_to;Array.isArray(xe)||(xe=[xe]);const Ke=yield qc(x);for(const nt of xe){const yt=Ke.find(wt=>wt.measurementId===nt),Ft=yt&&D[yt.appId];if(!Ft){ee=[];break}ee.push(Ft)}}0===ee.length&&(ee=Object.values(D)),yield Promise.all(ee),I("event",F,Z||{})}catch(ee){Un.error(ee)}})).apply(this,arguments)}function fp(){const I=window.document.getElementsByTagName("script");for(const D of Object.values(I))if(D.src&&D.src.includes(mu))return D;return null}const yn=new X.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Vi=new class _n{constructor(D={},x=1e3){this.throttleMetadata=D,this.intervalMillis=x}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,x){this.throttleMetadata[D]=x}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function dt(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function rr(I){return tn.apply(this,arguments)}function tn(){return(tn=(0,O.Z)(function*(I){var D;const{appId:x,apiKey:F}=I,Z={method:"GET",headers:dt(F)},ee=Ta.replace("{app-id}",x),xe=yield fetch(ee,Z);if(200!==xe.status&&304!==xe.status){let Ke="";try{const nt=yield xe.json();(null===(D=nt.error)||void 0===D?void 0:D.message)&&(Ke=nt.error.message)}catch(nt){}throw yn.create("config-fetch-failed",{httpStatus:xe.status,responseMessage:Ke})}return xe.json()})).apply(this,arguments)}function Dh(I){return si.apply(this,arguments)}function si(){return(si=(0,O.Z)(function*(I,D=Vi,x){const{appId:F,apiKey:Z,measurementId:ee}=I.options;if(!F)throw yn.create("no-app-id");if(!Z){if(ee)return{measurementId:ee,appId:F};throw yn.create("no-api-key")}const xe=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ke=new Tt;return setTimeout((0,O.Z)(function*(){Ke.abort()}),void 0!==x?x:6e4),_r({appId:F,apiKey:Z,measurementId:ee},xe,Ke,D)})).apply(this,arguments)}function _r(I,D,x){return vi.apply(this,arguments)}function vi(){return(vi=(0,O.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:x},F,Z=Vi){const{appId:ee,measurementId:xe}=I;try{yield Wr(F,D)}catch(Ke){if(xe)return Un.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${Ke.message}]`),{appId:ee,measurementId:xe};throw Ke}try{const Ke=yield rr(I);return Z.deleteThrottleMetadata(ee),Ke}catch(Ke){if(!yu(Ke)){if(Z.deleteThrottleMetadata(ee),xe)return Un.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${Ke.message}]`),{appId:ee,measurementId:xe};throw Ke}const nt=503===Number(Ke.customData.httpStatus)?(0,X.$s)(x,Z.intervalMillis,30):(0,X.$s)(x,Z.intervalMillis),yt={throttleEndTimeMillis:Date.now()+nt,backoffCount:x+1};return Z.setThrottleMetadata(ee,yt),Un.debug(`Calling attemptFetch again in ${nt} millis`),_r(I,yt,F,Z)}})).apply(this,arguments)}function Wr(I,D){return new Promise((x,F)=>{const Z=Math.max(D-Date.now(),0),ee=setTimeout(x,Z);I.addEventListener(()=>{clearTimeout(ee),F(yn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function yu(I){if(!(I instanceof X.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Tt{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function Ch(){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,O.Z)(function*(){if(!(0,X.hl)())return Un.warn(yn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,X.eu)()}catch(I){return Un.warn(yn.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function ys(){return(ys=(0,O.Z)(function*(I,D,x,F,Z,ee,xe){var Ke;const nt=Dh(I);nt.then(kn=>{x[kn.measurementId]=kn.appId,I.options.measurementId&&kn.measurementId!==I.options.measurementId&&Un.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${kn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(kn=>Un.error(kn)),D.push(nt);const yt=Ch().then(kn=>{if(kn)return F.getId()}),[Ft,wt]=yield Promise.all([nt,yt]);fp()||hp(ee,Ft.measurementId),Z("js",new Date);const jn=null!==(Ke=null==xe?void 0:xe.config)&&void 0!==Ke?Ke:{};return jn.origin="firebase",jn.update=!0,null!=wt&&(jn[xm]=wt),Z("config",Ft.measurementId,jn),Ft.measurementId})).apply(this,arguments)}class Ho{constructor(D){this.app=D}_delete(){return delete Nn[this.app.options.appId],Promise.resolve()}}let Nn={},ir=[];const Wc={};let wi,ji,go="dataLayer",$i=!1;function qn(I,D,x){!function _l(){const I=[];if((0,X.ru)()&&I.push("This is a browser extension environment."),(0,X.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((F,Z)=>`(${Z+1}) ${F}`).join(" "),x=yn.create("invalid-analytics-context",{errorInfo:D});Un.warn(x.message)}}();const F=I.options.appId;if(!F)throw yn.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw yn.create("no-api-key");Un.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Nn[F])throw yn.create("already-exists",{id:F});if(!$i){!function ms(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(go);const{wrappedGtag:ee,gtagCore:xe}=function Ih(I,D,x,F,Z){let ee=function(...xe){window[F].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(ee=window[Z]),window[Z]=function zc(I,D,x,F){function ee(){return(ee=(0,O.Z)(function*(xe,Ke,nt){try{"event"===xe?yield ml(I,D,x,Ke,nt):"config"===xe?yield $o(I,D,x,F,Ke,nt):I("set",Ke)}catch(yt){Un.error(yt)}})).apply(this,arguments)}return function Z(xe,Ke,nt){return ee.apply(this,arguments)}}(ee,I,D,x),{gtagCore:ee,wrappedGtag:window[Z]}}(Nn,ir,Wc,go,"gtag");ji=ee,wi=xe,$i=!0}return Nn[F]=function Bi(I,D,x,F,Z,ee,xe){return ys.apply(this,arguments)}(I,ir,Wc,D,wi,go,x),new Ho(I)}function Go(){return(Go=(0,O.Z)(function*(I,D,x,F,Z){if(Z&&Z.global)I("event",x,F);else{const ee=yield D;I("event",x,Object.assign(Object.assign({},F),{send_to:ee}))}})).apply(this,arguments)}function _s(){return On.apply(this,arguments)}function On(){return(On=(0,O.Z)(function*(){if((0,X.ru)()||!(0,X.zI)()||!(0,X.hl)())return!1;try{return yield(0,X.eu)()}catch(I){return!1}})).apply(this,arguments)}const Kc="@firebase/analytics";!function Qc(){(0,oe._registerComponent)(new pe.wA(pl,(D,{options:x})=>qn(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,oe._registerComponent)(new pe.wA("analytics-internal",function I(D){try{const x=D.getProvider(pl).getImmediate();return{logEvent:(F,Z,ee)=>function Ah(I,D,x,F){I=(0,X.m9)(I),function Ye(I,D,x,F,Z){return Go.apply(this,arguments)}(ji,Nn[I.app.options.appId],D,x,F).catch(Z=>Un.error(Z))}(x,F,Z,ee)}}catch(x){throw yn.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,oe.registerVersion)(Kc,"0.7.8"),(0,oe.registerVersion)(Kc,"0.7.8","esm2017")}();var vl=k(4408),Fr=k(7565);const sr=new class En extends Fr.v{}(class Hs extends vl.o{constructor(D,x){super(D,x),this.scheduler=D,this.work=x}schedule(D,x=0){return x>0?super.schedule(D,x):(this.delay=x,this.state=D,this.scheduler.flush(this),this)}execute(D,x){return x>0||this.closed?super.execute(D,x):this._execute(D,x)}requestAsyncId(D,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,x,F):D.flush(this)}});var Sh=k(4986),Aa=k(8505),vr=k(9468),Yr=k(5363);const wl=new d.GfV("7.3.0"),qi="__angularfire_symbol__analyticsIsSupportedValue",bi="__angularfire_symbol__analyticsIsSupported",Zi="__angularfire_symbol__remoteConfigIsSupportedValue",zi="__angularfire_symbol__remoteConfigIsSupported",wu="__angularfire_symbol__messagingIsSupportedValue",Eu="__angularfire_symbol__messagingIsSupported";function Gs(I,D,x){if(D){if(1===D.length)return D[0];const ee=D.filter(xe=>xe.app===x);if(1===ee.length)return ee[0]}return x.container.getProvider(I).getImmediate({optional:!0})}globalThis[bi]||(globalThis[bi]=_s().then(I=>globalThis[qi]=I).catch(()=>globalThis[qi]=!1)),globalThis[Eu]||(globalThis[Eu]=Gc().then(I=>globalThis[wu]=I).catch(()=>globalThis[wu]=!1)),globalThis[zi]||(globalThis[zi]=oo().then(I=>globalThis[Zi]=I).catch(()=>globalThis[Zi]=!1));const bu=(I,D)=>{const x=D?[D]:(0,W.C6)(),F=[];return x.forEach(Z=>{Z.container.getProvider(I).instances.forEach(xe=>{F.includes(xe)||F.push(xe)})}),F};function vs(){}class Iu{constructor(D,x=sr){this.zone=D,this.delegate=x}now(){return this.delegate.now()}schedule(D,x,F){const Z=this.zone;return this.delegate.schedule(function(xe){Z.runGuarded(()=>{D.apply(this,[xe])})},x,F)}}class xh{constructor(D){this.zone=D,this.task=null}call(D,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vs,{},vs,vs)),x.pipe((0,Aa.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let xa=(()=>{class I{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Iu(Zone.current)),this.insideAngular=x.run(()=>new Iu(Zone.current,Sh.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(x){return new(x||I)(d.LFG(d.R0b))},I.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Wi(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Il(I){return Wi(),function Di(I){return function(x){return(x=x.lift(new xh(I.ngZone))).pipe((0,vr.R)(I.outsideAngular),(0,Yr.Q)(I.insideAngular))}}(Wi())(I)}},2090:(st,Te,k)=>{k.d(Te,{$s:()=>ro,BH:()=>Ae,G6:()=>ne,L:()=>ue,LL:()=>ke,Lj:()=>kt,Mn:()=>je,Sg:()=>Re,UG:()=>we,US:()=>ie,X3:()=>lt,ZB:()=>Y,ZR:()=>ge,b$:()=>Ie,d:()=>_e,eu:()=>J,hl:()=>Ze,jU:()=>et,m9:()=>ut,ne:()=>at,pd:()=>as,r3:()=>$t,ru:()=>ze,tV:()=>B,uI:()=>fe,vZ:()=>Ts,w1:()=>ve,xO:()=>Pi,xb:()=>hr,z$:()=>Pe,zI:()=>se,zd:()=>kr});var d=k(5861);const X=function(U){const L=[];let H=0;for(let le=0;le<U.length;le++){let K=U.charCodeAt(le);K<128?L[H++]=K:K<2048?(L[H++]=K>>6|192,L[H++]=63&K|128):55296==(64512&K)&&le+1<U.length&&56320==(64512&U.charCodeAt(le+1))?(K=65536+((1023&K)<<10)+(1023&U.charCodeAt(++le)),L[H++]=K>>18|240,L[H++]=K>>12&63|128,L[H++]=K>>6&63|128,L[H++]=63&K|128):(L[H++]=K>>12|224,L[H++]=K>>6&63|128,L[H++]=63&K|128)}return L},ie={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,le=[];for(let K=0;K<U.length;K+=3){const Ve=U[K],gt=K+1<U.length,Ht=gt?U[K+1]:0,Dr=K+2<U.length,Bt=Dr?U[K+2]:0;let ln=(15&Ht)<<2|Bt>>6,er=63&Bt;Dr||(er=64,gt||(ln=64)),le.push(H[Ve>>2],H[(3&Ve)<<4|Ht>>4],H[ln],H[er])}return le.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(X(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let H=0,le=0;for(;H<U.length;){const K=U[H++];if(K<128)L[le++]=String.fromCharCode(K);else if(K>191&&K<224){const Ve=U[H++];L[le++]=String.fromCharCode((31&K)<<6|63&Ve)}else if(K>239&&K<365){const Dr=((7&K)<<18|(63&U[H++])<<12|(63&U[H++])<<6|63&U[H++])-65536;L[le++]=String.fromCharCode(55296+(Dr>>10)),L[le++]=String.fromCharCode(56320+(1023&Dr))}else{const Ve=U[H++],gt=U[H++];L[le++]=String.fromCharCode((15&K)<<12|(63&Ve)<<6|63&gt)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const H=L?this.charToByteMapWebSafe_:this.charToByteMap_,le=[];for(let K=0;K<U.length;){const Ve=H[U.charAt(K++)],Ht=K<U.length?H[U.charAt(K)]:0;++K;const Bt=K<U.length?H[U.charAt(K)]:64;++K;const Ct=K<U.length?H[U.charAt(K)]:64;if(++K,null==Ve||null==Ht||null==Bt||null==Ct)throw Error();le.push(Ve<<2|Ht>>4),64!==Bt&&(le.push(Ht<<4&240|Bt>>2),64!==Ct&&le.push(Bt<<6&192|Ct))}return le},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},ue=function(U){return function(U){const L=X(U);return ie.encodeByteArray(L,!0)}(U).replace(/\./g,"")},B=function(U){try{return ie.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Y(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const H in L)!L.hasOwnProperty(H)||!qe(H)||(U[H]=Y(U[H],L[H]));return U}function qe(U){return"__proto__"!==U}class Ae{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,H)=>{this.resolve=L,this.reject=H})}wrapCallback(L){return(H,le)=>{H?this.reject(H):this.resolve(le),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(H):L(H,le))}}}function Re(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const le=L||"demo-project",K=U.iat||0,Ve=U.sub||U.user_id;if(!Ve)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const gt=Object.assign({iss:`https://securetoken.google.com/${le}`,aud:le,iat:K,exp:K+3600,auth_time:K,sub:Ve,user_id:Ve,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(gt)),""].join(".")}function Pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function fe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function we(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function et(){return"object"==typeof self&&self.self===self}function ze(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function Ie(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _e(){return Pe().indexOf("Electron/")>=0}function ve(){const U=Pe();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function je(){return Pe().indexOf("MSAppHost/")>=0}function ne(){return!we()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ze(){return"object"==typeof indexedDB}function J(){return new Promise((U,L)=>{try{let H=!0;const le="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(le);K.onsuccess=()=>{K.result.close(),H||self.indexedDB.deleteDatabase(le),U(!0)},K.onupgradeneeded=()=>{H=!1},K.onerror=()=>{var Ve;L((null===(Ve=K.error)||void 0===Ve?void 0:Ve.message)||"")}}catch(H){L(H)}})}function se(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ge extends Error{constructor(L,H,le){super(H),this.code=L,this.customData=le,this.name="FirebaseError",Object.setPrototypeOf(this,ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ke.prototype.create)}}class ke{constructor(L,H,le){this.service=L,this.serviceName=H,this.errors=le}create(L,...H){const le=H[0]||{},K=`${this.service}/${L}`,Ve=this.errors[L],gt=Ve?function bt(U,L){return U.replace(jt,(H,le)=>{const K=L[le];return null!=K?String(K):`<${le}?>`})}(Ve,le):"Error";return new ge(K,`${this.serviceName}: ${gt} (${K}).`,le)}}const jt=/\{\$([^}]+)}/g;function $t(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function hr(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function Ts(U,L){if(U===L)return!0;const H=Object.keys(U),le=Object.keys(L);for(const K of H){if(!le.includes(K))return!1;const Ve=U[K],gt=L[K];if(Or(Ve)&&Or(gt)){if(!Ts(Ve,gt))return!1}else if(Ve!==gt)return!1}for(const K of le)if(!H.includes(K))return!1;return!0}function Or(U){return null!==U&&"object"==typeof U}function Pi(U){const L=[];for(const[H,le]of Object.entries(U))Array.isArray(le)?le.forEach(K=>{L.push(encodeURIComponent(H)+"="+encodeURIComponent(K))}):L.push(encodeURIComponent(H)+"="+encodeURIComponent(le));return L.length?"&"+L.join("&"):""}function kr(U){const L={};return U.replace(/^\?/,"").split("&").forEach(le=>{if(le){const[K,Ve]=le.split("=");L[decodeURIComponent(K)]=decodeURIComponent(Ve)}}),L}function as(U){const L=U.indexOf("?");if(!L)return"";const H=U.indexOf("#",L);return U.substring(L,H>0?H:void 0)}function at(U,L){const H=new $r(U,L);return H.subscribe.bind(H)}class $r{constructor(L,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{L(this)}).catch(le=>{this.error(le)})}next(L){this.forEachObserver(H=>{H.next(L)})}error(L){this.forEachObserver(H=>{H.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,H,le){let K;if(void 0===L&&void 0===H&&void 0===le)throw new Error("Missing Observer.");K=function Hn(U,L){if("object"!=typeof U||null===U)return!1;for(const H of L)if(H in U&&"function"==typeof U[H])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:H,complete:le},void 0===K.next&&(K.next=ei),void 0===K.error&&(K.error=ei),void 0===K.complete&&(K.complete=ei);const Ve=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch(gt){}}),this.observers.push(K),Ve}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,L)}sendOne(L,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{H(this.observers[L])}catch(le){"undefined"!=typeof console&&console.error&&console.error(le)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ei(){}function ro(U,L=1e3,H=2){const le=L*Math.pow(H,U),K=Math.round(.5*le*(Math.random()-.5)*2);return Math.min(144e5,le+K)}function ut(U){return U&&U._delegate?U._delegate:U}function Ir(U,L){return new Promise((H,le)=>{U.onsuccess=K=>{H(K.target.result)},U.onerror=K=>{var Ve;le(`${L}: ${null===(Ve=K.target.error)||void 0===Ve?void 0:Ve.message}`)}})}class Rt{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,H="readonly"){return new We(this._db.transaction.call(this._db,L,H))}createObjectStore(L,H){return new De(this._db.createObjectStore(L,H))}close(){this._db.close()}}class We{constructor(L){this._transaction=L,this.complete=new Promise((H,le)=>{this._transaction.oncomplete=function(){H()},this._transaction.onerror=()=>{le(this._transaction.error)},this._transaction.onabort=()=>{le(this._transaction.error)}})}objectStore(L){return new De(this._transaction.objectStore(L))}}class De{constructor(L){this._store=L}index(L){return new Je(this._store.index(L))}createIndex(L,H,le){return new Je(this._store.createIndex(L,H,le))}get(L){return Ir(this._store.get(L),"Error reading from IndexedDB")}put(L,H){return Ir(this._store.put(L,H),"Error writing to IndexedDB")}delete(L){return Ir(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return Ir(this._store.clear(),"Error clearing IndexedDB object store")}}class Je{constructor(L){this._index=L}get(L){return Ir(this._index.get(L),"Error reading from IndexedDB")}}function lt(U,L,H){return new Promise((le,K)=>{try{const Ve=indexedDB.open(U,L);Ve.onsuccess=gt=>{le(new Rt(gt.target.result))},Ve.onerror=gt=>{var Ht;K(`Error opening indexedDB: ${null===(Ht=gt.target.error)||void 0===Ht?void 0:Ht.message}`)},Ve.onupgradeneeded=gt=>{H(new Rt(Ve.result),gt.oldVersion,gt.newVersion,new We(Ve.transaction))}}catch(Ve){K(`Error opening indexedDB: ${Ve.message}`)}})}function kt(U){return St.apply(this,arguments)}function St(){return(St=(0,d.Z)(function*(U){return new Promise((L,H)=>{try{const le=indexedDB.deleteDatabase(U);le.onsuccess=()=>{L()},le.onerror=K=>{var Ve;H(`Error deleting indexedDB database "${U}": ${null===(Ve=K.target.error)||void 0===Ve?void 0:Ve.message}`)}}catch(le){H(`Error deleting indexedDB database "${U}": ${le.message}`)}})})).apply(this,arguments)}},6673:(st,Te,k)=>{var d=k(5e3);let W=null;function O(){return W}const ie=new d.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ue(){return(0,d.LFG)(j)}()},providedIn:"platform"}),n})();const B=new d.OlP("Location Initialized");let j=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Y()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Y()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function qe(){return new j((0,d.LFG)(ie))}()},providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Pe(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function we(n){const e=(0,d.LFG)(ie).location;return new ze((0,d.LFG)(de),e&&e.origin||"")}()},providedIn:"root"}),n})();const et=new d.OlP("appBaseHref");let ze=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Pe(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const h=this.prepareExternalUrl(o+Pe(u));this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){const h=this.prepareExternalUrl(o+Pe(u));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(de),d.LFG(et,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ie=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let h=this.prepareExternalUrl(o+Pe(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,u){let h=this.prepareExternalUrl(o+Pe(u));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(de),d.LFG(et,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),_e=(()=>{class n{constructor(t,r){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Re(Be(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Pe(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pe(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Pe(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Pe,n.joinWithSlash=Ae,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(d.LFG(fe),d.LFG(de))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function ve(){return new _e((0,d.LFG)(fe),(0,d.LFG)(de))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}class Ms{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let tr=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,h)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Ms(o.item,this._ngForOf,-1,-1),null===h?void 0:h);else if(null==h)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,h),cs(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{cs(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function cs(n,e){n.context.$implicit=e.item}let Pr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new sn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Qa("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Qa("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class sn{constructor(){this.$implicit=null,this.ngIf=null}}function Qa(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let Vo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function mr(n){return"server"===n}let su=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new ou((0,d.LFG)(ie),window)}),n})();class ou{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ea(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const h=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(h)return h}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=fs(this.window.history)||fs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function fs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ps extends class Uo extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function X(n){W||(W=n)}(new Ps)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Uc(){return on=on||document.querySelector("base"),on?on.getAttribute("href"):null}();return null==t?null:function lo(n){uo=uo||document.createElement("a"),uo.setAttribute("href",n);const e=uo.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){on=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Po(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let uo,on=null;const Cr=new d.OlP("TRANSITION_ID"),ba=[{provide:d.ip1,useFactory:function Rn(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Cr,ie,d.zs3],multi:!0}];class yi{static init(){(0,d.VLi)(new yi)}addToWindow(e){d.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const o=d.dqk.getAllAngularTestabilities();let u=o.length,h=!1;const m=function(E){h=h||E,u--,0==u&&r(h)};o.forEach(function(E){E.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Tr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Fs=new d.OlP("EventManagerPlugins");let ps=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const h=o[u];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Fs),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class au{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Zr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ls=(()=>{class n extends Zr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const h=this._doc.createElement("style");h.textContent=u,o.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Vs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Vs))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Vs(n){O().remove(n)}const ct={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},uu=/%COMP%/g;function be(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?be(n,o,t):(o=o.replace(uu,n),t.push(o))}return t}function xt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let wn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Bo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new sl(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case d.ifc.ShadowDom:return new ol(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=be(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ps),d.LFG(Ls),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Bo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ct[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=ct[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=ct[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,o&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,xt(r)):this.eventManager.addEventListener(e,t,xt(r))}}class sl extends Bo{constructor(e,t,r,o){super(e),this.component=r;const u=be(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function nl(n){return"_ngcontent-%COMP%".replace(uu,n)}(o+"-"+r.id),this.hostAttr=function rl(n){return"_nghost-%COMP%".replace(uu,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class ol extends Bo{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=be(o.id,o.styles,[]);for(let h=0;h<u.length;h++){const m=document.createElement("style");m.textContent=u[h],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Bc=(()=>{class n extends au{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const al=["alt","control","meta","shift"],Us={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},yr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ii={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let fu=(()=>{class n extends au{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),h=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let h="";if(al.forEach(E=>{const C=r.indexOf(E);C>-1&&(r.splice(C,1),h+=E+".")}),h+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=h,m}static getEventFullKey(t){let r="",o=function Bs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&yr.hasOwnProperty(e)&&(e=yr[e]))}return Us[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),al.forEach(u=>{u!=o&&ii[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ie))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ll=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function _i(){Ps.makeCurrent(),yi.init()},multi:!0},{provide:ie,useFactory:function pu(){return(0,d.RDi)(document),document},deps:[]}]),Da=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function ul(){return new d.qLn},deps:[]},{provide:Fs,useClass:Bc,multi:!0,deps:[ie,d.R0b,d.Lbi]},{provide:Fs,useClass:fu,multi:!0,deps:[ie]},{provide:wn,useClass:wn,deps:[ps,Ls,d.AFp]},{provide:d.FYo,useExisting:wn},{provide:Zr,useExisting:Ls},{provide:Ls,useClass:Ls,deps:[ie]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:ps,useClass:ps,deps:[Fs,d.R0b]},{provide:class fn{},useClass:Tr,deps:[]}];let Ca=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:Cr,useExisting:d.AFp},ba]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:Da,imports:[Vo,d.hGG]}),n})();"undefined"!=typeof window&&window;const Mm_firebase={projectId:"fir-demo2-a8a1c",appId:"1:179697109061:web:0464d182e734065f33fb2c",storageBucket:"fir-demo2-a8a1c.appspot.com",apiKey:"AIzaSyAiUNYKv2jUrs6WVmdeeb4_IOL8jN6vgAA",authDomain:"fir-demo2-a8a1c.firebaseapp.com",messagingSenderId:"179697109061"};var yn=k(727),yl=k(4986),nr=k(8306),_n=k(8996),Vi=k(7669);function dt(...n){const e=(0,Vi.yG)(n);return(0,_n.D)(n,e)}var rr=k(5813),tn=k(8189);function si(...n){return function Dh(){return(0,tn.J)(1)}()((0,_n.D)(n,(0,Vi.yG)(n)))}var _r=k(4482);function vi(...n){const e=(0,Vi.yG)(n);return(0,_r.e)((t,r)=>{(e?si(n,t,e):si(n,t)).subscribe(r)})}var Wr=k(5403);function yu(){return(0,_r.e)((n,e)=>{let t,r=!1;n.subscribe((0,Wr.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}var Tt=k(4004);function Ch(n,e,t,r,o){return(u,h)=>{let m=t,E=e,C=0;u.subscribe((0,Wr.x)(h,M=>{const N=C++;E=m?n(E,M,N):(m=!0,M),r&&h.next(E)},o&&(()=>{m&&h.next(E),h.complete()})))}}function Ui(n,e){return(0,_r.e)(Ch(n,e,arguments.length>=2,!0))}var Bi=k(4671);function Ho(n,e){return n===e}function Nn(n,e){return(0,_r.e)((t,r)=>{let o=0;t.subscribe((0,Wr.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var Ye,ir=k(2011),go=(k(820),k(3942)),me=k(5861),wi=k(9681),ji=k(4859),$i=k(1877),Nt=k(2090),_l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},qn={},Go=Go||{},vt=_l||self;function Kr(){}function _u(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Hi(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Gi="closure_uid_"+(1e9*Math.random()>>>0),qo=0;function Ei(n,e,t){return n.call.apply(n.bind,arguments)}function Th(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Bn(n,e,t){return(Bn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ei:Th).apply(null,arguments)}function _s(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function On(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var h=Array(arguments.length-2),m=2;m<arguments.length;m++)h[m-2]=arguments[m];return e.prototype[o].apply(r,h)}}function mo(){this.s=this.s,this.o=this.o}var pp={};mo.prototype.s=!1,mo.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function vu(n){return Object.prototype.hasOwnProperty.call(n,Gi)&&n[Gi]||(n[Gi]=++qo)}(this);delete pp[n]}},mo.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gp=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},Ah=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function Yc(n){return Array.prototype.concat.apply([],arguments)}function Qc(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function vl(n){return/^[\s\xa0]*$/.test(n)}var sr,Hs=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Fr(n,e){return-1!=n.indexOf(e)}function En(n,e){return n<e?-1:n>e?1:0}e:{var yo=vt.navigator;if(yo){var Sh=yo.userAgent;if(Sh){sr=Sh;break e}}sr=""}function Aa(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function vr(n){const e={};for(const t in n)e[t]=n[t];return e}var Yr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wl(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Yr.length;u++)t=Yr[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function qi(n){return qi[" "](n),n}qi[" "]=Kr;var Sa,n,Zi=Fr(sr,"Opera"),zi=Fr(sr,"Trident")||Fr(sr,"MSIE"),wu=Fr(sr,"Edge"),Eu=wu||zi,El=Fr(sr,"Gecko")&&!(Fr(sr.toLowerCase(),"webkit")&&!Fr(sr,"Edge"))&&!(Fr(sr,"Trident")||Fr(sr,"MSIE"))&&!Fr(sr,"Edge"),bl=Fr(sr.toLowerCase(),"webkit")&&!Fr(sr,"Edge");function Lr(){var n=vt.document;return n?n.documentMode:void 0}e:{var Gs="",bu=(n=sr,El?/rv:([^\);]+)(\)|;)/.exec(n):wu?/Edge\/([\d\.]+)/.exec(n):zi?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):bl?/WebKit\/(\S+)/.exec(n):Zi?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(bu&&(Gs=bu?bu[1]:""),zi){var vs=Lr();if(null!=vs&&vs>parseFloat(Gs)){Sa=String(vs);break e}}Sa=Gs}var Iu={};var Mh=vt.document&&zi&&(Lr()||parseInt(Sa,10))||void 0,Ii=function(){if(!vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{vt.addEventListener("test",Kr,e),vt.removeEventListener("test",Kr,e)}catch(t){}return n}();function or(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function _o(n,e){if(or.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(El){e:{try{qi(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Il[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&_o.Z.h.call(this)}}or.prototype.h=function(){this.defaultPrevented=!0},On(_o,or);var Il={2:"touch",3:"pen",4:"mouse"};_o.prototype.h=function(){_o.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Di="closure_listenable_"+(1e6*Math.random()|0),Ma=0;function Dl(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++Ma,this.ca=this.fa=!1}function I(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function D(n){this.src=n,this.g={},this.h=0}function x(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=gp(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(I(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function F(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}D.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var h=F(n,e,r,o);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new Dl(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var Z="closure_lm_"+(1e6*Math.random()|0),ee={};function xe(n,e,t,r,o){if(r&&r.once)return yt(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)xe(n,e[u],t,r,o);return null}return t=oi(t),n&&n[Di]?n.N(e,t,Hi(r)?!!r.capture:!!r,o):Ke(n,e,t,!1,r,o)}function Ke(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var h=Hi(o)?!!o.capture:!!o,m=qs(n);if(m||(n[Z]=m=new D(n)),(t=m.add(e,t,r,h,u)).proxy)return t;if(r=function nt(){var e=kn;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Ii||(o=h),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(jn(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function yt(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)yt(n,e[u],t,r,o);return null}return t=oi(t),n&&n[Di]?n.O(e,t,Hi(r)?!!r.capture:!!r,o):Ke(n,e,t,!0,r,o)}function Ft(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)Ft(n,e[u],t,r,o);else r=Hi(r)?!!r.capture:!!r,t=oi(t),n&&n[Di]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=F(u=n.g[e],t,r,o))&&(I(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=qs(n))&&(e=n.g[e.toString()],n=-1,e&&(n=F(e,t,r,o)),(t=-1<n?e[n]:null)&&wt(t))}function wt(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Di])x(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(jn(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=qs(e))?(x(t,n),0==t.h&&(t.src=null,e[Z]=null)):I(n)}}}function jn(n){return n in ee?ee[n]:ee[n]="on"+n}function kn(n,e){if(n.ca)n=!0;else{e=new _o(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&wt(n),n=t.call(r,e)}return n}function qs(n){return(n=n[Z])instanceof D?n:null}var Zo="__closure_events_fn_"+(1e9*Math.random()>>>0);function oi(n){return"function"==typeof n?n:(n[Zo]||(n[Zo]=function(e){return n.handleEvent(e)}),n[Zo])}function an(){mo.call(this),this.i=new D(this),this.P=this,this.I=null}function vn(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new or(e,n);else if(e instanceof or)e.target=e.target||n;else{var o=e;wl(e=new or(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var h=e.g=t[u];o=Ki(h,r,!0,e)&&o}if(o=Ki(h=e.g=n,r,!0,e)&&o,o=Ki(h,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Ki(h=e.g=t[u],r,!1,e)&&o}function Ki(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var h=e[u];if(h&&!h.ca&&h.capture==t){var m=h.listener,E=h.ia||h.src;h.fa&&x(n.i,h),o=!1!==m.call(E,r)&&o}}return o&&!r.defaultPrevented}On(an,mo),an.prototype[Di]=!0,an.prototype.removeEventListener=function(n,e,t,r){Ft(this,n,e,t,r)},an.prototype.M=function(){if(an.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)I(t[r]);delete n.g[e],n.h--}}this.I=null},an.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},an.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Jc=vt.JSON.stringify;function mp(){var n=_p;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Zs,Ra=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new yp,n=>n.reset());class yp{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Rm(n){vt.setTimeout(()=>{throw n},0)}function Rh(n,e){Zs||function Cl(){var n=vt.Promise.resolve(void 0);Zs=function(){n.then(vp)}}(),Nh||(Zs(),Nh=!0),_p.add(n,e)}var Nh=!1,_p=new class Xc{constructor(){this.h=this.g=null}add(e,t){const r=Ra.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function vp(){for(var n;n=mp();){try{n.h.call(n.g)}catch(t){Rm(t)}var e=Ra;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Nh=!1}function Na(n,e){an.call(this),this.h=n||1,this.g=e||vt,this.j=Bn(this.kb,this),this.l=Date.now()}function wp(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Oh(n,e,t){if("function"==typeof n)t&&(n=Bn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Bn(n.handleEvent,n)}return 2147483647<Number(e)?-1:vt.setTimeout(n,e||0)}function Ep(n){n.g=Oh(()=>{n.g=null,n.i&&(n.i=!1,Ep(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}On(Na,an),(Ye=Na.prototype).da=!1,Ye.S=null,Ye.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),vn(this,"tick"),this.da&&(wp(this),this.start()))}},Ye.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ye.M=function(){Na.Z.M.call(this),wp(this),delete this.g};class Nm extends mo{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ep(this)}M(){super.M(),this.g&&(vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zo(n){mo.call(this),this.h=n,this.g={}}On(zo,mo);var ed=[];function Oa(n,e,t,r){Array.isArray(t)||(t&&(ed[0]=t.toString()),t=ed);for(var o=0;o<t.length;o++){var u=xe(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function bp(n){Aa(n.g,function(e,t){this.g.hasOwnProperty(t)&&wt(e)},n),n.g={}}function Du(){this.g=!0}function Wo(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Dp(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var h=1;h<o.length;h++)o[h]=""}}}return Jc(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}zo.prototype.M=function(){zo.Z.M.call(this),bp(this)},zo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Du.prototype.Aa=function(){this.g=!1},Du.prototype.info=function(){};var vo={},kh=null;function nd(){return kh=kh||new an}function Cp(n){or.call(this,vo.Ma,n)}function Tl(n){const e=nd();vn(e,new Cp(e,n))}function rd(n,e){or.call(this,vo.STAT_EVENT,n),this.stat=e}function Qr(n){const e=nd();vn(e,new rd(e,n))}function ws(n,e){or.call(this,vo.Na,n),this.size=e}function wo(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return vt.setTimeout(function(){n()},e)}vo.Ma="serverreachability",On(Cp,or),vo.STAT_EVENT="statevent",On(rd,or),vo.Na="timingevent",On(ws,or);var Al={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Om={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function id(){}function Tp(){}id.prototype.h=null;var Fh,Sl={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function sd(){or.call(this,"d")}function Ph(){or.call(this,"c")}function Lh(){}function Es(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new zo(this),this.P=Fm,this.W=new Na(n=Eu?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Pm}function Pm(){this.i=null,this.g="",this.h=!1}On(sd,or),On(Ph,or),On(Lh,id),Lh.prototype.g=function(){return new XMLHttpRequest},Lh.prototype.i=function(){return{}},Fh=new Lh;var Fm=45e3,Ko={},xl={};function ai(n,e,t){n.K=1,n.v=ld(Yi(e)),n.s=t,n.U=!0,Cu(n,null)}function Cu(n,e){n.F=Date.now(),od(n),n.A=Yi(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Sr(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Pm,n.g=a0(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Nm(Bn(n.Ia,n,n.g),n.O)),Oa(n.V,n.g,"readystatechange",n.gb),e=n.H?vr(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Tl(1),function t0(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var h="",m=u.split("&"),E=0;E<m.length;E++){var C=m[E].split("=");if(1<C.length){var M=C[0];C=C[1];var N=M.split("_");h=2<=N.length&&"type"==N[1]?h+(M+"=")+C+"&":h+(M+"=redacted&")}}else h=null;else h=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Vh(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Ml(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=Ap(n,t),o==xl){4==e&&(n.o=4,Qr(14),r=!1),Wo(n.j,n.m,null,"[Incomplete Response]");break}if(o==Ko){n.o=4,Qr(15),Wo(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Wo(n.j,n.m,o,null),Rl(n,o)}Vh(n)&&o!=xl&&o!=Ko&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Qr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),xu(e),e.L=!0,Qr(11))):(Wo(n.j,n.m,t,"[Invalid Chunked Response]"),Eo(n),ka(n))}function Ap(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?xl:(t=Number(e.substring(t,r)),isNaN(t)?Ko:(r+=1)+t>e.length?xl:(e=e.substr(r,t),n.C=r+t,e))}function od(n){n.Y=Date.now()+n.P,Uh(n,n.P)}function Uh(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=wo(Bn(n.eb,n),e)}function Bh(n){n.B&&(vt.clearTimeout(n.B),n.B=null)}function ka(n){0==n.l.G||n.I||$l(n.l,n)}function Eo(n){Bh(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,wp(n.W),bp(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Rl(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Fl(t.i,n)))if(t.I=n.N,!n.J&&Fl(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=wo(Bn(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Mu(t),ht(t)}zs(t),Qr(18)}if(1>=Pl(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else Do(t,11)}else if((n.J||t.g==n)&&Mu(t),!vl(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const M=C[3];null!=M&&(t.ma=M,t.h.info("VER="+t.ma));const N=C[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const G=C[5];null!=G&&"number"==typeof G&&0<G&&(t.K=r=1.5*G,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const Q=n.g;if(Q){const ce=Q.g?Q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ce){var u=r.i;!u.g&&(Fr(ce,"spdy")||Fr(ce,"quic")||Fr(ce,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(dd(u,u.h),u.h=null))}if(r.D){const Fe=Q.g?Q.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.sa=Fe,bn(r.F,r.D,Fe))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=o0(r,r.H?r.la:null,r.W),h.J){Wh(r.i,h);var m=h,E=r.K;E&&m.setTimeout(E),m.B&&(Bh(m),od(m)),r.g=h}else kp(r);0<t.l.length&&Jr(t)}else"stop"!=C[0]&&"close"!=C[0]||Do(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Do(t,7):Qe(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Tl(4)}catch(C){}}function jh(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(_u(n)||"string"==typeof n)Ah(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(_u(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function n0(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(_u(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function bo(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof bo)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function $h(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Pa(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Pa(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Pa(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ye=Es.prototype).setTimeout=function(n){this.P=n},Ye.gb=function(n){n=n.target;const e=this.L;e&&3==v(n)?e.l():this.Ia(n)},Ye.Ia=function(n){try{if(n==this.g)e:{const M=v(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>M)&&(3!=M||Eu||this.g&&(this.h.h||this.g.ga()||T(this.g)))){this.I||4!=M||7==e||Tl(8==e||0>=N?3:2),Bh(this);var t=this.g.ba();this.N=t;t:if(Vh(this)){var r=T(this.g);n="";var o=r.length,u=4==v(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Eo(this),ka(this);var h="";break t}this.h.i=new vt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function td(n,e,t,r,o,u,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+h})}(this.j,this.u,this.A,this.m,this.X,M,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,E=this.g;if((m=E.g?E.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vl(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Qr(12),Eo(this),ka(this);break e}Wo(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Rl(this,t)}this.U?(Ml(this,M,h),Eu&&this.i&&3==M&&(Oa(this.V,this.W,"tick",this.fb),this.W.start())):(Wo(this.j,this.m,h,null),Rl(this,h)),4==M&&Eo(this),this.i&&!this.I&&(4==M?$l(this.l,this):(this.i=!1,od(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,Qr(12)):(this.o=0,Qr(13)),Eo(this),ka(this)}}}catch(M){}},Ye.fb=function(){if(this.g){var n=v(this.g),e=this.g.ga();this.C<e.length&&(Bh(this),Ml(this,n,e),this.i&&4!=n&&od(this))}},Ye.cancel=function(){this.I=!0,Eo(this)},Ye.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Ip(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Tl(3),Qr(17)),Eo(this),this.o=2,ka(this)):Uh(this,this.Y-n)},(Ye=bo.prototype).R=function(){$h(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ye.T=function(){return $h(this),this.g.concat()},Ye.get=function(n,e){return Pa(this.h,n)?this.h[n]:e},Ye.set=function(n,e){Pa(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ye.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var ad=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Yo(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Yo){this.g=void 0!==e?e:n.g,Fa(this,n.j),this.s=n.s,Tu(this,n.i),ud(this,n.m),this.l=n.l,e=n.h;var t=new Zn;t.i=e.i,e.g&&(t.g=new bo(e.g),t.h=e.h),$n(this,t),this.o=n.o}else n&&(t=String(n).match(ad))?(this.g=!!e,Fa(this,t[1]||"",!0),this.s=Nl(t[2]||""),Tu(this,t[3]||"",!0),ud(this,t[4]),this.l=Nl(t[5]||"",!0),$n(this,t[6]||"",!0),this.o=Nl(t[7]||"")):(this.g=!!e,this.h=new Zn(null,this.g))}function Yi(n){return new Yo(n)}function Fa(n,e,t){n.j=t?Nl(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Tu(n,e,t){n.i=t?Nl(e,!0):e}function ud(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function $n(n,e,t){e instanceof Zn?(n.h=e,function Zh(n,e){e&&!n.j&&(Qi(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(kl(this,r),Sr(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Qo(e,s0)),n.h=new Zn(e,n.g))}function bn(n,e,t){n.h.set(e,t)}function ld(n){return bn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Nl(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Qo(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Lm),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Lm(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Yo.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Qo(e,qh,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Qo(e,qh,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Qo(t,"/"==t.charAt(0)?r0:Vm,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Qo(t,Ol)),n.join("")};var qh=/[#\/\?@]/g,Vm=/[#\?:]/g,r0=/[#\?]/g,s0=/[#\?@]/g,Ol=/#/g;function Zn(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Qi(n){n.g||(n.g=new bo,n.h=0,n.i&&function Hh(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function kl(n,e){Qi(n),e=Ji(n,e),Pa(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Pa((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&$h(n)))}function cd(n,e){return Qi(n),e=Ji(n,e),Pa(n.g.h,e)}function Sr(n,e,t){kl(n,e),0<t.length&&(n.i=null,n.g.set(Ji(n,e),Qc(t)),n.h+=t.length)}function Ji(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Au(n){this.l=n||zh,n=vt.PerformanceNavigationTiming?0<(n=vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(vt.g&&vt.g.Ea&&vt.g.Ea()&&vt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ye=Zn.prototype).add=function(n,e){Qi(this),this.i=null,n=Ji(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ye.forEach=function(n,e){Qi(this),this.g.forEach(function(t,r){Ah(t,function(o){n.call(e,o,r,this)},this)},this)},Ye.T=function(){Qi(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Ye.R=function(n){Qi(this);var e=[];if("string"==typeof n)cd(this,n)&&(e=Yc(e,this.g.get(Ji(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Yc(e,n[t])}return e},Ye.set=function(n,e){return Qi(this),this.i=null,cd(this,n=Ji(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ye.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ye.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var h=o;""!==r[u]&&(h+="="+encodeURIComponent(String(r[u]))),n.push(h)}}return this.i=n.join("&")};var zh=10;function xp(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Pl(n){return n.h?1:n.g?n.g.size:0}function Fl(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function dd(n,e){n.g?n.g.add(e):n.h=e}function Wh(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Mp(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Qc(n.i)}function Xi(){}function Rp(){this.g=new Xi}function Um(n,e,t){const r=t||"";try{jh(n,function(o,u){let h=o;Hi(o)&&(h=Jc(o)),e.push(r+u+"="+encodeURIComponent(h))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function hd(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Su(n){this.l=n.$b||null,this.j=n.ib||!1}function zn(n,e){an.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Ll,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Au.prototype.cancel=function(){if(this.i=Mp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Xi.prototype.stringify=function(n){return vt.JSON.stringify(n,void 0)},Xi.prototype.parse=function(n){return vt.JSON.parse(n,void 0)},On(Su,id),Su.prototype.g=function(){return new zn(this.l,this.j)},Su.prototype.i=function(n){return function(){return n}}({}),On(zn,an);var Ll=0;function fd(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Vl(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ti(n)}function Ti(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ye=zn.prototype).open=function(n,e){if(this.readyState!=Ll)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ti(this)},Ye.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||vt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ye.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vl(this)),this.readyState=Ll},Ye.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ti(this)),this.g&&(this.readyState=3,Ti(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==vt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fd(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ye.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Vl(this):Ti(this),3==this.readyState&&fd(this)}},Ye.Ua=function(n){this.g&&(this.response=this.responseText=n,Vl(this))},Ye.Ta=function(n){this.g&&(this.response=n,Vl(this))},Ye.ha=function(){this.g&&Vl(this)},Ye.setRequestHeader=function(n,e){this.v.append(n,e)},Ye.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ye.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(zn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Ul=vt.JSON.parse;function Pn(n){an.call(this),this.headers=new bo,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Yh,this.K=this.L=!1}On(Pn,an);var Yh="",Bm=/^https?$/i,Qh=["POST","PUT"];function $m(n){return"content-type"==n.toLowerCase()}function Np(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Op(n),f(n)}function Op(n){n.D||(n.D=!0,vn(n,"complete"),vn(n,"error"))}function y(n){if(n.h&&void 0!==Go&&(!n.C[1]||4!=v(n)||2!=n.ba()))if(n.v&&4==v(n))Oh(n.Fa,0,n);else if(vn(n,"readystatechange"),4==v(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(ad)[1]||null;if(!o&&vt.self&&vt.self.location){var u=vt.self.location.protocol;o=u.substr(0,u.length-1)}r=!Bm.test(o?o.toLowerCase():"")}t=r}if(t)vn(n,"complete"),vn(n,"success");else{n.m=6;try{var h=2<v(n)?n.g.statusText:""}catch(E){h=""}n.j=h+" ["+n.ba()+"]",Op(n)}}finally{f(n)}}}function f(n,e){if(n.g){g(n);const t=n.g,r=n.C[0]?Kr:null;n.g=null,n.C=null,e||vn(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function g(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(vt.clearTimeout(n.A),n.A=null)}function v(n){return n.g?n.g.readyState:0}function T(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Yh:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function q(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function R(n){let e="";return Aa(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):bn(n,e,t))}function re(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Le(n){this.za=0,this.l=[],this.h=new Du,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=re("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=re("baseRetryDelayMs",5e3,n),this.$a=re("retryDelaySeedMs",1e4,n),this.Ya=re("forwardChannelMaxRetries",2,n),this.ra=re("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Au(n&&n.concurrentRequestLimit),this.Ca=new Rp,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Qe(n){if(ot(n),3==n.G){var e=n.V++,t=Yi(n.F);bn(t,"SID",n.J),bn(t,"RID",e),bn(t,"TYPE","terminate"),Io(n,t),(e=new Es(n,n.h,e,void 0)).K=2,e.v=ld(Yi(t)),t=!1,vt.navigator&&vt.navigator.sendBeacon&&(t=vt.navigator.sendBeacon(e.v.toString(),"")),!t&&vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=a0(e.l,null),e.g.ea(e.v)),e.F=Date.now(),od(e)}Fp(n)}function ht(n){n.g&&(xu(n),n.g.cancel(),n.g=null)}function ot(n){ht(n),n.u&&(vt.clearTimeout(n.u),n.u=null),Mu(n),n.i.cancel(),n.m&&("number"==typeof n.m&&vt.clearTimeout(n.m),n.m=null)}function In(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Jr(n)}function Jr(n){xp(n.i)||n.m||(n.m=!0,Rh(n.Ha,n),n.C=0)}function jl(n,e){var t;t=e?e.m:n.V++;const r=Yi(n.F);bn(r,"SID",n.J),bn(r,"RID",t),bn(r,"AID",n.U),Io(n,r),n.o&&n.s&&q(r,n.o,n.s),t=new Es(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=pd(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),dd(n.i,t),ai(t,r,e)}function Io(n,e){n.j&&jh({},function(t,r){bn(e,r,t)})}function pd(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Bn(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const h=["count="+t];-1==u?0<t?(u=o[0].h,h.push("ofs="+u)):u=0:h.push("ofs="+u);let m=!0;for(let E=0;E<t;E++){let C=o[E].h;const M=o[E].g;if(C-=u,0>C)u=Math.max(0,o[E].h-100),m=!1;else try{Um(M,h,"req"+C+"_")}catch(N){r&&r(M)}}if(m){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function kp(n){n.g||n.u||(n.Y=1,Rh(n.Ga,n),n.A=0)}function zs(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=wo(Bn(n.Ga,n),Pp(n,n.A)),n.A++,0))}function xu(n){null!=n.B&&(vt.clearTimeout(n.B),n.B=null)}function gd(n){n.g=new Es(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Yi(n.oa);bn(e,"RID","rpc"),bn(e,"SID",n.J),bn(e,"CI",n.N?"0":"1"),bn(e,"AID",n.U),Io(n,e),bn(e,"TYPE","xmlhttp"),n.o&&n.s&&q(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=ld(Yi(e)),t.s=null,t.U=!0,Cu(t,n)}function Mu(n){null!=n.v&&(vt.clearTimeout(n.v),n.v=null)}function $l(n,e){var t=null;if(n.g==e){Mu(n),xu(n),n.g=null;var r=2}else{if(!Fl(n.i,e))return;t=e.D,Wh(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;vn(r=nd(),new ws(r,t,e,o)),Jr(n)}else kp(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function Bl(n,e){return!(Pl(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=wo(Bn(n.Ha,n,e),Pp(n,n.C)),n.C++,0)))}(n,e)||2==r&&zs(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Do(n,5);break;case 4:Do(n,10);break;case 3:Do(n,6);break;default:Do(n,2)}}function Pp(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Do(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Bn(n.jb,n);t||(t=new Yo("//www.google.com/images/cleardot.gif"),vt.location&&"http"==vt.location.protocol||Fa(t,"https"),ld(t)),function Kh(n,e){const t=new Du;if(vt.Image){const r=new Image;r.onload=_s(hd,t,r,"TestLoadImage: loaded",!0,e),r.onerror=_s(hd,t,r,"TestLoadImage: error",!1,e),r.onabort=_s(hd,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=_s(hd,t,r,"TestLoadImage: timeout",!1,e),vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Qr(2);n.G=0,n.j&&n.j.va(e),Fp(n),ot(n)}function Fp(n){n.G=0,n.I=-1,n.j&&((0!=Mp(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Qc(n.l),n.l.length=0),n.j.ua())}function o0(n,e,t){let r=function Gh(n){return n instanceof Yo?Yi(n):new Yo(n,void 0)}(t);if(""!=r.i)e&&Tu(r,e+"."+r.i),ud(r,r.m);else{const o=vt.location;r=function Sp(n,e,t,r){var o=new Yo(null,void 0);return n&&Fa(o,n),e&&Tu(o,e),t&&ud(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&Aa(n.aa,function(o,u){bn(r,u,o)}),t=n.sa,(e=n.D)&&t&&bn(r,e,t),bn(r,"VER",n.ma),Io(n,r),r}function a0(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Pn(t&&n.Ba&&!n.qa?new Su({ib:!0}):n.qa)).L=n.H,e}function u0(){}function Jh(){if(zi&&!(10<=Number(Mh)))throw Error("Environmental error: no available transport.")}function Ai(n,e){an.call(this),this.g=new Le(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!vl(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vl(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new md(this)}function Hm(n){sd.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Lp(){Ph.call(this),this.status=1}function md(n){this.g=n}(Ye=Pn.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Fh.g(),this.C=function km(n){return n.h||(n.h=n.i())}(this.u?this.u:Fh),this.g.onreadystatechange=Bn(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Np(this,u)}n=t||"";const o=new bo(this.headers);r&&jh(r,function(u,h){o.set(h,u)}),r=function Kc(n){e:{var e=$m;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=vt.FormData&&n instanceof vt.FormData,!(0<=gp(Qh,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,h){this.g.setRequestHeader(h,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{g(this),0<this.B&&((this.K=function jm(n){return zi&&function xh(){return function bi(n){var e=Iu;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Hs(String(Sa)).split("."),t=Hs("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var o=e[h]||"",u=t[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=En(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||En(0==o[2].length,0==u[2].length)||En(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bn(this.pa,this)):this.A=Oh(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Np(this,u)}},Ye.pa=function(){void 0!==Go&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,vn(this,"timeout"),this.abort(8))},Ye.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,vn(this,"complete"),vn(this,"abort"),f(this))},Ye.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),f(this,!0)),Pn.Z.M.call(this)},Ye.Fa=function(){this.s||(this.F||this.v||this.l?y(this):this.cb())},Ye.cb=function(){y(this)},Ye.ba=function(){try{return 2<v(this)?this.g.status:-1}catch(n){return-1}},Ye.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ye.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Ul(e)}},Ye.Da=function(){return this.m},Ye.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ye=Le.prototype).ma=8,Ye.G=1,Ye.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ye.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Es(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=vr(u),wl(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=pd(this,o,e),bn(t=Yi(this.F),"RID",n),bn(t,"CVER",22),this.D&&bn(t,"X-HTTP-Session-Id",this.D),Io(this,t),this.o&&u&&q(t,this.o,u),dd(this.i,o),this.Ra&&bn(t,"TYPE","init"),this.ja?(bn(t,"$req",e),bn(t,"SID","null"),o.$=!0,ai(o,t,null)):ai(o,t,e),this.G=2}}else 3==this.G&&(n?jl(this,n):0==this.l.length||xp(this.i)||jl(this))},Ye.Ga=function(){if(this.u=null,gd(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=wo(Bn(this.bb,this),n)}},Ye.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Qr(10),ht(this),gd(this))},Ye.ab=function(){null!=this.v&&(this.v=null,ht(this),zs(this),Qr(19))},Ye.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Qr(2)):(this.h.info("Failed to ping google.com"),Qr(1))},(Ye=u0.prototype).xa=function(){},Ye.wa=function(){},Ye.va=function(){},Ye.ua=function(){},Ye.Oa=function(){},Jh.prototype.g=function(n,e){return new Ai(n,e)},On(Ai,an),Ai.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Rh(Bn(n.hb,n,e))),Qr(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=o0(n,null,n.W),Jr(n)},Ai.prototype.close=function(){Qe(this.g)},Ai.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,In(this.g,e)}else this.v?((e={}).__data__=Jc(n),In(this.g,e)):In(this.g,n)},Ai.prototype.M=function(){this.g.j=null,delete this.j,Qe(this.g),delete this.g,Ai.Z.M.call(this)},On(Hm,sd),On(Lp,Ph),On(md,u0),md.prototype.xa=function(){vn(this.g,"a")},md.prototype.wa=function(n){vn(this.g,new Hm(n))},md.prototype.va=function(n){vn(this.g,new Lp(n))},md.prototype.ua=function(){vn(this.g,"b")},Jh.prototype.createWebChannel=Jh.prototype.g,Ai.prototype.send=Ai.prototype.u,Ai.prototype.open=Ai.prototype.m,Ai.prototype.close=Ai.prototype.close,Al.NO_ERROR=0,Al.TIMEOUT=8,Al.HTTP_ERROR=6,Om.COMPLETE="complete",Tp.EventType=Sl,Sl.OPEN="a",Sl.CLOSE="b",Sl.ERROR="c",Sl.MESSAGE="d",an.prototype.listen=an.prototype.N,Pn.prototype.listenOnce=Pn.prototype.O,Pn.prototype.getLastError=Pn.prototype.La,Pn.prototype.getLastErrorCode=Pn.prototype.Da,Pn.prototype.getStatus=Pn.prototype.ba,Pn.prototype.getResponseJson=Pn.prototype.Qa,Pn.prototype.getResponseText=Pn.prototype.ga,Pn.prototype.send=Pn.prototype.ea;var Qb=qn.createWebChannelTransport=function(){return new Jh},l0=qn.getStatEventTarget=function(){return nd()},Vp=qn.ErrorCode=Al,Hl=qn.EventType=Om,c0=qn.Event=vo,Gm=qn.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Jb=qn.FetchXmlHttpFactory=Su,Gl=qn.WebChannel=Tp,Xb=qn.XhrIo=Pn;const qm="@firebase/firestore";class Vr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vr.UNAUTHENTICATED=new Vr(null),Vr.GOOGLE_CREDENTIALS=new Vr("google-credentials-uid"),Vr.FIRST_PARTY=new Vr("first-party-uid"),Vr.MOCK_USER=new Vr("mock-user");let ql="9.6.11";const Jo=new $i.Yd("@firebase/firestore");function Up(){return Jo.logLevel}function Me(n,...e){if(Jo.logLevel<=$i.in.DEBUG){const t=e.map(jp);Jo.debug(`Firestore (${ql}): ${n}`,...t)}}function ar(n,...e){if(Jo.logLevel<=$i.in.ERROR){const t=e.map(jp);Jo.error(`Firestore (${ql}): ${n}`,...t)}}function Zl(n,...e){if(Jo.logLevel<=$i.in.WARN){const t=e.map(jp);Jo.warn(`Firestore (${ql}): ${n}`,...t)}}function jp(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${ql}) INTERNAL ASSERTION FAILED: `+n;throw ar(e),new Error(e)}function _t(n,e){n||tt()}function Ge(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Se extends Nt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class $p{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class d0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Vr.UNAUTHENTICATED))}shutdown(){}}class cT{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class h0{constructor(e){this.t=e,this.currentUser=Vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let h=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new xr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=h;e.enqueueRetryable((0,me.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},E=C=>{Me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>E(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?E(C):(Me("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new xr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_t("string"==typeof r.accessToken),new $p(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return _t(null===e||"string"==typeof e),new Vr(e)}}class tI{constructor(e,t,r){this.type="FirstParty",this.user=Vr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class f0{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new tI(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Vr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class p0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nI{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.p;return this.p=u.token,Me("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(_t("string"==typeof t.token),this.p=t.token,new p0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class bs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function g0(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}bs.A=-1;class m0{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=g0(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Mt(n,e){return n<e?-1:n>e?1:0}function yd(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function y0(n){return n+"\0"}class Wn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Se(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Se(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Se(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Se(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Wn.fromMillis(Date.now())}static fromDate(e){return Wn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Wn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new Wn(0,0))}static max(){return new Et(new Wn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function _0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Dt(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class _d{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===_d.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _d?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),h=t.get(o);if(u<h)return-1;if(u>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Yt extends _d{construct(e,t,r){return new Yt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Se(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Yt(t)}static emptyPath(){return new Yt([])}}const v0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ur extends _d{construct(e,t,r){return new ur(e,t,r)}static isValidIdentifier(e){return v0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ur.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ur(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Se(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Se(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const E=e[o+1];if("\\"!==E&&"."!==E&&"`"!==E)throw new Se(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=E,o+=2}else"`"===m?(h=!h,o++):"."!==m||h?(r+=m,o++):(u(),o++)}if(u(),h)throw new Se(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ur(t)}static emptyPath(){return new ur([])}}class ui{constructor(e){this.fields=e,e.sort(ur.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yd(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Mr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Mr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Mr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mr.EMPTY_BYTE_STRING=new Mr("");const Zm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function li(n){if(_t(!!n),"string"==typeof n){let e=0;const t=Zm.exec(n);if(_t(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fn(n.seconds),nanos:Fn(n.nanos)}}function Fn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ru(n){return"string"==typeof n?Mr.fromBase64String(n):Mr.fromUint8Array(n)}function Xh(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function rI(n){const e=n.mapValue.fields.__previous_value__;return Xh(e)?rI(e):e}function vd(n){const e=li(n.mapValue.fields.__local_write_time__.timestampValue);return new Wn(e.seconds,e.nanos)}class dT{constructor(e,t,r,o,u,h,m,E){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.useFetchStreams=E}}class Ws{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ws("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ws&&e.projectId===this.projectId&&e.database===this.database}}function ea(n){return null==n}function Wl(n){return 0===n&&1/n==-1/0}function Hp(n){return"number"==typeof n&&Number.isInteger(n)&&!Wl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(Yt.fromString(e))}static fromName(e){return new Ue(Yt.fromString(e).popFirst(5))}static empty(){return new Ue(Yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Yt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new Yt(e.slice()))}}const iI={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},E0={nullValue:"NULL_VALUE"};function Kl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Xh(n)?4:aI(n)?9:10:tt()}function ta(n,e){if(n===e)return!0;const t=Kl(n);if(t!==Kl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vd(n).isEqual(vd(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=li(r.timestampValue),h=li(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Ru(n.bytesValue).isEqual(Ru(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Fn(r.geoPointValue.latitude)===Fn(o.geoPointValue.latitude)&&Fn(r.geoPointValue.longitude)===Fn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Fn(r.integerValue)===Fn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Fn(r.doubleValue),h=Fn(o.doubleValue);return u===h?Wl(u)===Wl(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return yd(n.arrayValue.values||[],e.arrayValue.values||[],ta);case 10:return function(r,o){const u=r.mapValue.fields||{},h=o.mapValue.fields||{};if(_0(u)!==_0(h))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===h[m]||!ta(u[m],h[m])))return!1;return!0}(n,e);default:return tt()}var o}function ef(n,e){return void 0!==(n.values||[]).find(t=>ta(t,e))}function La(n,e){if(n===e)return 0;const t=Kl(n),r=Kl(e);if(t!==r)return Mt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const h=Fn(o.integerValue||o.doubleValue),m=Fn(u.integerValue||u.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1}(n,e);case 3:return sI(n.timestampValue,e.timestampValue);case 4:return sI(vd(n),vd(e));case 5:return Mt(n.stringValue,e.stringValue);case 6:return function(o,u){const h=Ru(o),m=Ru(u);return h.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const h=o.split("/"),m=u.split("/");for(let E=0;E<h.length&&E<m.length;E++){const C=Mt(h[E],m[E]);if(0!==C)return C}return Mt(h.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const h=Mt(Fn(o.latitude),Fn(u.latitude));return 0!==h?h:Mt(Fn(o.longitude),Fn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const h=o.values||[],m=u.values||[];for(let E=0;E<h.length&&E<m.length;++E){const C=La(h[E],m[E]);if(C)return C}return Mt(h.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const h=o.fields||{},m=Object.keys(h),E=u.fields||{},C=Object.keys(E);m.sort(),C.sort();for(let M=0;M<m.length&&M<C.length;++M){const N=Mt(m[M],C[M]);if(0!==N)return N;const G=La(h[m[M]],E[C[M]]);if(0!==G)return G}return Mt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw tt()}}function sI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Mt(n,e);const t=li(n),r=li(e),o=Mt(t.seconds,r.seconds);return 0!==o?o:Mt(t.nanos,r.nanos)}function wd(n){return b0(n)}function b0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=li(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ru(n.bytesValue).toBase64():"referenceValue"in n?Ue.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const h of r.values||[])u?u=!1:o+=",",o+=b0(h);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",h=!0;for(const m of o)h?h=!1:u+=",",u+=`${m}:${b0(r.fields[m])}`;return u+"}"}(n.mapValue):tt();var e}function Nu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gp(n){return!!n&&"integerValue"in n}function tf(n){return!!n&&"arrayValue"in n}function qp(n){return!!n&&"nullValue"in n}function oI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zm(n){return!!n&&"mapValue"in n}function Zp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return zl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function aI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function hT(n){return"nullValue"in n?E0:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Nu(Ws.empty(),Ue.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tt()}function fT(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Nu(Ws.empty(),Ue.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?iI:tt()}function uI(n,e){return void 0===n?e:void 0===e||La(n,e)>0?n:e}function lI(n,e){return void 0===n?e:void 0===e||La(n,e)<0?n:e}class Si{constructor(e){this.value=e}static empty(){return new Si({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!zm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zp(t)}setAll(e){let t=ur.emptyPath(),r={},o=[];e.forEach((h,m)=>{if(!t.isImmediateParentOf(m)){const E=this.getFieldsMap(t);this.applyChanges(E,r,o),r={},o=[],t=m.popLast()}h?r[m.lastSegment()]=Zp(h):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());zm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ta(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];zm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){zl(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Si(Zp(this.value))}}function cI(n){const e=[];return zl(n.fields,(t,r)=>{const o=new ur([t]);if(zm(r)){const u=cI(r.mapValue).fields;if(0===u.length)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)}),new ui(e)}class un{constructor(e,t,r,o,u,h){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new un(e,0,Et.min(),Et.min(),Si.empty(),0)}static newFoundDocument(e,t,r){return new un(e,1,t,Et.min(),r,0)}static newNoDocument(e,t){return new un(e,2,t,Et.min(),Si.empty(),0)}static newUnknownDocument(e,t){return new un(e,3,t,Et.min(),Si.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Si.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Si.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ed{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Wm(n){return n.fields.find(e=>2===e.kind)}function Ou(n){return n.fields.filter(e=>2!==e.kind)}Ed.UNKNOWN_ID=-1;class bd{constructor(e,t){this.fieldPath=e,this.kind=t}}class Id{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Id(0,ci.min())}}function zp(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Et.fromTimestamp(1e9===r?new Wn(t+1,0):new Wn(t,r));return new ci(o,Ue.empty(),e)}function dI(n){return new ci(n.readTime,n.key,-1)}class ci{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ci(Et.min(),Ue.empty(),-1)}static max(){return new ci(Et.max(),Ue.empty(),-1)}}function I0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ue.comparator(n.documentKey,e.documentKey),0!==t?t:Mt(n.largestBatchId,e.largestBatchId))}class hI{constructor(e,t=null,r=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.P=null}}function Wp(n,e=null,t=[],r=[],o=null,u=null,h=null){return new hI(n,e,t,r,o,u,h)}function Yl(n){const e=Ge(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+wd(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),ea(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>wd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>wd(r)).join(",")),e.P=t}return e.P}function nf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!A0(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!ta(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Jm(n.startAt,e.startAt)&&Jm(n.endAt,e.endAt)}function Kp(n){return Ue.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ku(n,e){return n.filters.filter(t=>t instanceof Kn&&t.field.isEqual(e))}function Ql(n,e,t){let r,o=!0;for(const u of ku(n,e)){let h,m=!0;switch(u.op){case"<":case"<=":h=hT(u.value);break;case"==":case"in":case">=":h=u.value;break;case">":h=u.value,m=!1;break;case"!=":case"not-in":h=E0}uI(r,h)===h&&(r=h,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const h=t.position[u];uI(r,h)===h&&(r=h,o=t.inclusive);break}return{value:r,inclusive:o}}function Yp(n,e,t){let r,o=!0;for(const u of ku(n,e)){let h,m=!0;switch(u.op){case">=":case">":h=fT(u.value),m=!1;break;case"==":case"in":case"<=":h=u.value;break;case"<":h=u.value,m=!1;break;case"!=":case"not-in":h=iI}lI(r,h)===h&&(r=h,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const h=t.position[u];lI(r,h)===h&&(r=h,o=t.inclusive);break}return{value:r,inclusive:o}}class Kn extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new rf(e,t,r):"array-contains"===t?new C0(e,r):"in"===t?new Ym(e,r):"not-in"===t?new Qm(e,r):"array-contains-any"===t?new T0(e,r):new Kn(e,t,r)}static V(e,t,r){return"in"===t?new Dd(e,r):new fI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(La(t,this.value)):null!==t&&Kl(this.value)===Kl(t)&&this.v(La(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class rf extends Kn{constructor(e,t,r){super(e,t,r),this.key=Ue.fromName(r.referenceValue)}matches(e){const t=Ue.comparator(e.key,this.key);return this.v(t)}}class Dd extends Kn{constructor(e,t){super(e,"in",t),this.keys=Km(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class fI extends Kn{constructor(e,t){super(e,"not-in",t),this.keys=Km(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Km(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ue.fromName(r.referenceValue))}class C0 extends Kn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tf(t)&&ef(t.arrayValue,this.value)}}class Ym extends Kn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ef(this.value.arrayValue,t)}}class Qm extends Kn{constructor(e,t){super(e,"not-in",t)}matches(e){if(ef(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ef(this.value.arrayValue,t)}}class T0 extends Kn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ef(this.value.arrayValue,r))}}class Co{constructor(e,t){this.position=e,this.inclusive=t}}class Cd{constructor(e,t="asc"){this.field=e,this.dir=t}}function A0(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function pI(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],h=n.position[o];if(r=u.field.isKeyField()?Ue.comparator(Ue.fromName(h.referenceValue),t.key):La(h,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Jm(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ta(n.position[t],e.position[t]))return!1;return!0}class na{constructor(e,t=null,r=[],o=[],u=null,h="F",m=null,E=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=E,this.D=null,this.C=null}}function S0(n,e,t,r,o,u,h,m){return new na(n,e,t,r,o,u,h,m)}function Jl(n){return new na(n)}function Qp(n){return!ea(n.limit)&&"F"===n.limitType}function Jp(n){return!ea(n.limit)&&"L"===n.limitType}function xi(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Xm(n){for(const e of n.filters)if(e.S())return e.field;return null}function ey(n){return null!==n.collectionGroup}function sf(n){const e=Ge(n);if(null===e.D){e.D=[];const t=Xm(e),r=xi(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new Cd(t)),e.D.push(new Cd(ur.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Cd(ur.keyField(),u))}}}return e.D}function To(n){const e=Ge(n);if(!e.C)if("F"===e.limitType)e.C=Wp(e.path,e.collectionGroup,sf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of sf(e))t.push(new Cd(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Co(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new Co(e.startAt.position,!e.startAt.inclusive):null;e.C=Wp(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function ty(n,e,t){return new na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Xp(n,e){return nf(To(n),To(e))&&n.limitType===e.limitType}function x0(n){return`${Yl(To(n))}|lt:${n.limitType}`}function of(n){return`Query(target=${function D0(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${wd(r.value)}`;var r}).join(", ")}]`),ea(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>wd(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>wd(t)).join(",")),`Target(${e})`}(To(n))}; limitType=${n.limitType})`}function eg(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ue.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,h){const m=pI(o,u,h);return o.inclusive?m<=0:m<0}(t.startAt,sf(t),r)||t.endAt&&!function(o,u,h){const m=pI(o,u,h);return o.inclusive?m>=0:m>0}(t.endAt,sf(t),r)));var t,r}function M0(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function R0(n){return(e,t)=>{let r=!1;for(const o of sf(n)){const u=gI(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function gI(n,e,t){const r=n.field.isKeyField()?Ue.comparator(e.key,t.key):function(o,u,h){const m=u.data.field(o),E=h.data.field(o);return null!==m&&null!==E?La(m,E):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function ny(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wl(e)?"-0":e}}function N0(n){return{integerValue:""+n}}function ry(n,e){return Hp(e)?N0(e):ny(n,e)}class tg{constructor(){this._=void 0}}function mI(n,e,t){return n instanceof Td?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof di?ng(n,e):n instanceof Xl?k0(n,e):function(r,o){const u=iy(r,o),h=sy(u)+sy(r.k);return Gp(u)&&Gp(r.k)?N0(h):ny(r.M,h)}(n,e)}function O0(n,e,t){return n instanceof di?ng(n,e):n instanceof Xl?k0(n,e):t}function iy(n,e){return n instanceof af?Gp(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Td extends tg{}class di extends tg{constructor(e){super(),this.elements=e}}function ng(n,e){const t=P0(e);for(const r of n.elements)t.some(o=>ta(o,r))||t.push(r);return{arrayValue:{values:t}}}class Xl extends tg{constructor(e){super(),this.elements=e}}function k0(n,e){let t=P0(e);for(const r of n.elements)t=t.filter(o=>!ta(o,r));return{arrayValue:{values:t}}}class af extends tg{constructor(e,t){super(),this.M=e,this.k=t}}function sy(n){return Fn(n.integerValue||n.doubleValue)}function P0(n){return tf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class uf{constructor(e,t){this.field=e,this.transform=t}}class oy{constructor(e,t){this.version=e,this.transformResults=t}}class wr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wr}static exists(e){return new wr(void 0,e)}static updateTime(e){return new wr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ec{}function ay(n,e,t){n instanceof lf?function(r,o,u){const h=r.value.clone(),m=_I(r.fieldTransforms,o,u.transformResults);h.setAll(m),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof tc?function(r,o,u){if(!rg(r.precondition,o))return void o.convertToUnknownDocument(u.version);const h=_I(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(sg(r)),m.setAll(h),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function uy(n,e,t){var o;n instanceof lf?function(r,o,u){if(!rg(r.precondition,o))return;const h=r.value.clone(),m=F0(r.fieldTransforms,u,o);h.setAll(m),o.convertToFoundDocument(cy(o),h).setHasLocalMutations()}(n,e,t):n instanceof tc?function(r,o,u){if(!rg(r.precondition,o))return;const h=F0(r.fieldTransforms,u,o),m=o.data;m.setAll(sg(r)),m.setAll(h),o.convertToFoundDocument(cy(o),m).setHasLocalMutations()}(n,e,t):rg(n.precondition,o=e)&&o.convertToNoDocument(Et.min())}function ly(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=iy(r.transform,o||null);null!=u&&(null==t&&(t=Si.empty()),t.set(r.field,u))}return t||null}function ig(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&yd(t,r,(o,u)=>function yI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof di&&r instanceof di||t instanceof Xl&&r instanceof Xl?yd(t.elements,r.elements,ta):t instanceof af&&r instanceof af?ta(t.k,r.k):t instanceof Td&&r instanceof Td);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function cy(n){return n.isFoundDocument()?n.version:Et.min()}class lf extends ec{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class tc extends ec{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function sg(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function _I(n,e,t){const r=new Map;_t(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],h=u.transform,m=e.data.field(u.field);r.set(u.field,O0(h,m,t[o]))}return r}function F0(n,e,t){const r=new Map;for(const o of n){const u=o.transform,h=t.data.field(o.field);r.set(o.field,mI(u,h,e))}return r}class Ad extends ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class og extends ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class L0{constructor(e){this.count=e}}var lr,Qt;function ra(n){switch(n){default:return tt();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function cf(n){if(void 0===n)return ar("GRPC error has no .code"),ae.UNKNOWN;switch(n){case lr.OK:return ae.OK;case lr.CANCELLED:return ae.CANCELLED;case lr.UNKNOWN:return ae.UNKNOWN;case lr.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case lr.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case lr.INTERNAL:return ae.INTERNAL;case lr.UNAVAILABLE:return ae.UNAVAILABLE;case lr.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case lr.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case lr.NOT_FOUND:return ae.NOT_FOUND;case lr.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case lr.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case lr.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case lr.ABORTED:return ae.ABORTED;case lr.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case lr.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case lr.DATA_LOSS:return ae.DATA_LOSS;default:return tt()}}(Qt=lr||(lr={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";class Pu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){zl(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return Dt(this.inner)}size(){return this.innerSize}}class cr{constructor(e,t){this.comparator=e,this.root=t||Rr.EMPTY}insert(e,t){return new cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rr.BLACK,null,null))}remove(e){return new cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dy(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dy(this.root,e,this.comparator,!1)}getReverseIterator(){return new dy(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dy(this.root,e,this.comparator,!0)}}class dy{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rr{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Rr.RED,this.left=null!=o?o:Rr.EMPTY,this.right=null!=u?u:Rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Rr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Rr.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}Rr.EMPTY=null,Rr.RED=!0,Rr.BLACK=!1,Rr.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Rr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Dn{constructor(e){this.comparator=e,this.data=new cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ag(this.data.getIterator())}getIteratorFrom(e){return new ag(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Dn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Dn(this.comparator);return t.data=e,t}}class ag{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ia(n){return n.hasNext()?n.getNext():void 0}const vI=new cr(Ue.comparator);function es(){return vI}const V0=new cr(Ue.comparator);function ug(){return V0}function Sd(){return new Pu(n=>n.toString(),(n,e)=>n.isEqual(e))}const wI=new cr(Ue.comparator),hy=new Dn(Ue.comparator);function dn(...n){let e=hy;for(const t of n)e=e.add(t);return e}const EI=new Dn(Mt);function df(){return EI}class sa{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,xd.createSynthesizedTargetChangeForCurrentChange(e,t)),new sa(Et.min(),r,df(),es(),dn())}}class xd{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new xd(Mr.EMPTY_BYTE_STRING,t,dn(),dn(),dn())}}class lg{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class U0{constructor(e,t){this.targetId=e,this.$=t}}class nc{constructor(e,t,r=Mr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class B0{constructor(){this.B=0,this.L=$0(),this.U=Mr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=dn(),t=dn(),r=dn();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:tt()}}),new xd(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=$0()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class bI{constructor(e){this.nt=e,this.st=new Map,this.it=es(),this.rt=j0(),this.ot=new Dn(Mt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(Kp(u))if(0===r){const h=new Ue(u.path);this.ct(t,h,un.newNoDocument(h,Et.min()))}else _t(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,h)=>{const m=this.wt(h);if(m){if(u.current&&Kp(m.target)){const E=new Ue(m.target.path);null!==this.it.get(E)||this.It(h,E)||this.ct(h,E,un.newNoDocument(E,e))}u.j&&(t.set(h,u.H()),u.J())}});let r=dn();this.rt.forEach((u,h)=>{let m=!0;h.forEachWhile(E=>{const C=this.wt(E);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,h)=>h.setReadTime(e));const o=new sa(e,t,this.ot,this.it,r);return this.it=es(),this.rt=j0(),this.ot=new Dn(Mt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new B0,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new Dn(Mt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Me("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new B0),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function j0(){return new cr(Ue.comparator)}function $0(){return new cr(Ue.comparator)}const oa={asc:"ASCENDING",desc:"DESCENDING"},fy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class H0{constructor(e,t){this.databaseId=e,this.N=t}}function Md(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function py(n,e){return n.N?e.toBase64():e.toUint8Array()}function G0(n,e){return Md(n,e.toTimestamp())}function Ur(n){return _t(!!n),Et.fromTimestamp(function(e){const t=li(e);return new Wn(t.seconds,t.nanos)}(n))}function gy(n,e){return(t=n,new Yt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function q0(n){const e=Yt.fromString(n);return _t(Y0(e)),e}function hf(n,e){return gy(n.databaseId,e.path)}function Ao(n,e){const t=q0(e);if(t.get(1)!==n.databaseId.projectId)throw new Se(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Se(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ue(z0(t))}function Z0(n,e){return gy(n.databaseId,e)}function my(n){const e=q0(n);return 4===e.length?Yt.emptyPath():z0(e)}function ff(n){return new Yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function z0(n){return _t(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function II(n,e,t){return{name:hf(n,e),fields:t.value.mapValue.fields}}function DI(n,e,t){const r=Ao(n,e.name),o=Ur(e.updateTime),u=new Si({mapValue:{fields:e.fields}}),h=un.newFoundDocument(r,o,u);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Rd(n,e){let t;if(e instanceof lf)t={update:II(n,e.key,e.value)};else if(e instanceof Ad)t={delete:hf(n,e.key)};else if(e instanceof tc)t={update:II(n,e.key,e.data),updateMask:wy(e.fieldMask)};else{if(!(e instanceof og))return tt();t={verify:hf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const h=u.transform;if(h instanceof Td)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof di)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Xl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof af)return{fieldPath:u.field.canonicalString(),increment:h.k};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:G0(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:tt()),t;var o}function cg(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?wr.updateTime(Ur(o.updateTime)):void 0!==o.exists?wr.exists(o.exists):wr.none():wr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,h){let m=null;"setToServerValue"in h?(_t("REQUEST_TIME"===h.setToServerValue),m=new Td):"appendMissingElements"in h?m=new di(h.appendMissingElements.values||[]):"removeAllFromArray"in h?m=new Xl(h.removeAllFromArray.values||[]):"increment"in h?m=new af(u,h.increment):tt();const E=ur.fromServerFormat(h.fieldPath);return new uf(E,m)}(n,o)):[];var o;if(e.update){const o=Ao(n,e.update.name),u=new Si({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new ui((e.updateMask.fieldPaths||[]).map(C=>ur.fromServerFormat(C)));return new tc(o,u,h,t,r)}return new lf(o,u,t,r)}if(e.delete){const o=Ao(n,e.delete);return new Ad(o,t)}if(e.verify){const o=Ao(n,e.verify);return new og(o,t)}return tt()}function Ks(n,e){return{documents:[Z0(n,e.path)]}}function TI(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Z0(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Z0(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(E){if(0===E.length)return;const C=E.map(M=>function(N){if("=="===N.op){if(oI(N.value))return{unaryFilter:{field:pf(N.field),op:"IS_NAN"}};if(qp(N.value))return{unaryFilter:{field:pf(N.field),op:"IS_NULL"}}}else if("!="===N.op){if(oI(N.value))return{unaryFilter:{field:pf(N.field),op:"IS_NOT_NAN"}};if(qp(N.value))return{unaryFilter:{field:pf(N.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pf(N.field),op:SI(N.op),value:N.value}}}(M));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(E){if(0!==E.length)return E.map(C=>{return{field:pf((M=C).field),direction:K0(M.dir)};var M})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=(C=e.limit,n.N||ea(C)?C:{value:C});var C,m,E;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(E=e.endAt).inclusive,values:E.position}),t}function AI(n){let e=my(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){_t(1===r);const M=t.from[0];M.allDescendants?o=M.collectionId:e=e.child(M.collectionId)}let u=[];t.where&&(u=_y(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(M=>{return new Cd(rc((N=M).field),function(G){switch(G){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(M){let N;return N="object"==typeof M?M.value:M,ea(N)?null:N}(t.limit));let E=null;var M;t.startAt&&(E=new Co((M=t.startAt).values||[],!!M.before));let C=null;return t.endAt&&(C=function(M){return new Co(M.values||[],!M.before)}(t.endAt)),S0(e,o,h,u,m,"F",E,C)}function _y(n){return n?void 0!==n.unaryFilter?[xI(n)]:void 0!==n.fieldFilter?[vy(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>_y(e)).reduce((e,t)=>e.concat(t)):tt():[]}function K0(n){return oa[n]}function SI(n){return fy[n]}function pf(n){return{fieldPath:n.canonicalString()}}function rc(n){return ur.fromServerFormat(n.fieldPath)}function vy(n){return Kn.create(rc(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function xI(n){switch(n.unaryFilter.op){case"IS_NAN":const e=rc(n.unaryFilter.field);return Kn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=rc(n.unaryFilter.field);return Kn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=rc(n.unaryFilter.field);return Kn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=rc(n.unaryFilter.field);return Kn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function wy(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Y0(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Mi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Q0(e)),e=MI(n.get(t),e);return Q0(e)}function MI(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Q0(n){return n+"\x01\x01"}function aa(n){const e=n.length;if(_t(e>=2),2===e)return _t("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Yt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const h=n.indexOf("\x01",u);switch((h<0||h>t)&&tt(),n.charAt(h+1)){case"\x01":const m=n.substring(u,h);let E;0===o.length?E=m:(o+=m,E=o,o=""),r.push(E);break;case"\x10":o+=n.substring(u,h),o+="\0";break;case"\x11":o+=n.substring(u,h+1);break;default:tt()}u=h+2}return new Yt(r)}const J0=["userId","batchId"];function ic(n,e){return[n,Mi(e)]}function sc(n,e,t){return[n,Mi(e),t]}const RI={},gf=["prefixPath","collectionGroup","readTime","documentId"],NI=["prefixPath","collectionGroup","documentId"],OI=["collectionGroup","readTime","prefixPath","documentId"],Ey=["canonicalId","targetId"],ua=["targetId","path"],mf=["path","targetId"],hi=["collectionId","parent"],oc=["indexId","uid"],dg=["uid","sequenceNumber"],Ys=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],by=["indexId","uid","orderedDocumentKey"],Nd=["userId","collectionPath","documentId"],Od=["userId","collectionPath","largestBatchId"],kd=["userId","collectionGroup","largestBatchId"],ac=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Pd=[...ac,"documentOverlays"],uc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fd=[...uc,"indexConfiguration","indexState","indexEntries"],lc="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let o=0,u=0,h=!1;e.forEach(m=>{++o,m.next(()=>{++u,h&&u===o&&t()},E=>r(E))}),h=!0,u===o&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(o=>o?he.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class yf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new xr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Ld(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=Dy(r.target.error);this.At.reject(new Ld(e,o))}}static open(e,t,r,o){try{return new yf(t,e.transaction(o,r))}catch(u){throw new Ld(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Me("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ew(t)}}class Qs{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===Qs.Vt((0,Nt.z$)())&&ar("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Me("SimpleDb","Removing database:",e),Lu(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Nt.hl)())return!1;if(Qs.St())return!0;const e=(0,Nt.z$)(),t=Qs.Vt(e),r=0<t&&t<10,o=Qs.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,me.Z)(function*(){return t.db||(Me("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=h=>{r(h.target.result)},u.onblocked=()=>{o(new Ld(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=h=>{const m=h.target.error;o("VersionError"===m.name?new Se(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Se(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Ld(e,m))},u.onupgradeneeded=h=>{Me("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.bt.kt(h.target.result,u.transaction,h.oldVersion,t.version).next(()=>{Me("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,me.Z)(function*(){const h="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const E=yf.open(u.db,e,h?"readonly":"readwrite",r),C=o(E).next(M=>(E.Pt(),M)).catch(M=>(E.abort(M),he.reject(M))).toPromise();return C.catch(()=>{}),yield E.Rt,C}catch(E){const C="FirebaseError"!==E.name&&m<3;if(Me("SimpleDb","Transaction failed with error:",E.message,"Retrying:",C),u.close(),!C)return Promise.reject(E)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class X0{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Lu(this.Ft.delete())}}class Ld extends Se{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Fu(n){return"IndexedDbTransactionError"===n.name}class ew{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Me("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Me("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Lu(r)}add(e){return Me("SimpleDb","ADD",this.store.name,e,e),Lu(this.store.add(e))}get(e){return Lu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Me("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Me("SimpleDb","DELETE",this.store.name,e),Lu(this.store.delete(e))}count(){return Me("SimpleDb","COUNT",this.store.name),Lu(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(h,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new he((u,h)=>{o.onerror=m=>{h(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((o,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{o(h.target.result)}})}Qt(e,t){Me("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,h,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new he((r,o)=>{t.onerror=u=>{const h=Dy(u.target.error);o(h)},t.onsuccess=u=>{const h=u.target.result;h?e(h.primaryKey,h.value).next(m=>{m?h.continue():r()}):r()}})}Kt(e,t){const r=[];return new he((o,u)=>{e.onerror=h=>{u(h.target.error)},e.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const E=new X0(m),C=t(m.primaryKey,m.value,E);if(C instanceof he){const M=C.catch(N=>(E.done(),he.reject(N)));r.push(M)}E.isDone?o():null===E.Lt?m.continue():m.continue(E.Lt)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Lu(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Dy(r.target.error);t(o)}})}let Iy=!1;function Dy(n){const e=Qs.Vt((0,Nt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Iy||(Iy=!0,setTimeout(()=>{throw r},0)),r}}return n}class Cy extends cc{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Br(n,e){const t=Ge(n);return Qs.xt(t.Ht,e)}class Ty{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&ay(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&uy(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&uy(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(Et.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),dn())}isEqual(e){return this.batchId===e.batchId&&yd(this.mutations,e.mutations,(t,r)=>ig(t,r))&&yd(this.baseMutations,e.baseMutations,(t,r)=>ig(t,r))}}class hg{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){_t(e.mutations.length===r.length);let o=wI;const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new hg(e,t,r,o)}}class Ay{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Vu{constructor(e,t,r,o,u=Et.min(),h=Et.min(),m=Mr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m}withSequenceNumber(e){return new Vu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Vu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Sy{constructor(e){this.Jt=e}}function xy(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:fg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:hf(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Md(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:dc(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:dc(e.version)}}var o,u;return r}function fg(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function dc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vd(n){const e=new Wn(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function Ud(n,e){const t=(e.baseMutations||[]).map(u=>cg(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const h=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(h.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>cg(n.Jt,u)),o=Wn.fromMillis(e.localWriteTimeMs);return new Ty(e.batchId,o,t,r)}function hc(n){const e=Vd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Vd(n.lastLimboFreeSnapshotVersion):Et.min();let r;var o;return void 0!==n.query.documents?(_t(1===(o=n.query).documents.length),r=To(Jl(my(o.documents[0])))):r=To(AI(n.query)),new Vu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Mr.fromBase64String(n.resumeToken))}function pg(n,e){const t=dc(e.snapshotVersion),r=dc(e.lastLimboFreeSnapshotVersion);let o;o=Kp(e.target)?Ks(n.Jt,e.target):TI(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Yl(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function My(n){const e=AI({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?ty(e,e.limit,"L"):e}function tw(n,e){return new Ay(e.largestBatchId,cg(n.Jt,e.overlayMutation))}function PI(n,e){const t=e.path.lastSegment();return[n,Mi(e.path.popLast()),t]}class gT{getBundleMetadata(e,t){return nw(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Vd(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return nw(e).put({bundleId:(r=t).id,createTime:dc(Ur(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return Ry(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:My(o.bundledQuery),readTime:Vd(o.readTime)};var o})}saveNamedQuery(e,t){return Ry(e).put({name:(r=t).name,readTime:dc(Ur(r.readTime)),bundledQuery:r.bundledQuery});var r}}function nw(n){return Br(n,"bundles")}function Ry(n){return Br(n,"namedQueries")}class rw{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new rw(e,t.uid||"")}getOverlay(e,t){return _f(e).get(PI(this.userId,t)).next(r=>r?tw(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,h)=>{const m=new Ay(t,h);o.push(this.Xt(e,m))}),he.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(h=>o.add(Mi(h.getCollectionPath())));const u=[];return o.forEach(h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(_f(e).Qt("collectionPathOverlayIndex",m))}),he.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Sd(),u=Mi(t),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return _f(e).qt("collectionPathOverlayIndex",h).next(m=>{for(const E of m){const C=tw(this.M,E);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Sd();let h;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return _f(e).Wt({index:"collectionGroupOverlayIndex",range:m},(E,C,M)=>{const N=tw(this.M,C);u.size()<o||N.largestBatchId===h?(u.set(N.getKey(),N),h=N.largestBatchId):M.done()}).next(()=>u)}Xt(e,t){return _f(e).put(function(r,o,u){const[h,m,E]=PI(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:E,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Rd(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function _f(n){return Br(n,"documentOverlays")}class Js{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Fn(e.integerValue));else if("doubleValue"in e){const r=Fn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),Wl(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Ru(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?aI(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):tt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),Ue.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function FI(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Ny(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=FI(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Js.fe=new Js;class LI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=Ny(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=Ny(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class iw{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class gg{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class vf{constructor(){this.De=new LI,this.Ce=new iw(this.De),this.xe=new gg(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Va{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Va(this.indexId,this.documentKey,this.arrayValue,r)}}function fc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=sw(n.arrayValue,e.arrayValue),0!==t?t:(t=sw(n.directionalValue,e.directionalValue),0!==t?t:Ue.comparator(n.documentKey,e.documentKey)))}function sw(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class VI{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Wm(e);if(void 0!==t&&!this.Be(t))return!1;const r=Ou(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const h=r[o];if(!this.Le(this.Fe,h)||!this.Ue(this.Me[u++],h))return!1;++o}for(;o<r.length;++o){const h=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],h))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class UI{constructor(){this.qe=new Oy}addToCollectionParentIndex(e,t){return this.qe.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getFieldIndex(e,t){return he.resolve(null)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class Oy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Dn(Yt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Dn(Yt.comparator)).toArray()}}const pc=new Uint8Array(0);class BI{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Oy,this.Ge=new Pu(r=>Yl(r),(r,o)=>nf(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:Mi(o)};return ky(e).put(u)}return he.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[y0(t),""],!1,!0);return ky(e).qt(o).next(u=>{for(const h of u){if(h.collectionId!==t)break;r.push(aa(h.parent))}return r})}addFieldIndex(e,t){const r=jd(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=jd(e),o=Py(e),u=Bd(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Bd(e);let o=!0;const u=new Map;return he.forEach(this.Qe(t),h=>this.getFieldIndex(e,h).next(m=>{o&&(o=!!m),u.set(h,m)})).next(()=>{if(o){let h=dn();const m=[];return he.forEach(u,(E,C)=>{var M;Me("IndexedDbIndexManager",`Using index ${M=E,`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(Xt=>`${Xt.fieldPath}:${Xt.kind}`).join(",")}`} to execute ${Yl(t)}`);const N=function(Xt,Ot){const Wt=Wm(Ot);if(void 0===Wt)return null;for(const gn of ku(Xt,Wt.fieldPath))switch(gn.op){case"array-contains-any":return gn.value.arrayValue.values||[];case"array-contains":return[gn.value]}return null}(C,E),G=function(Xt,Ot){const Wt=new Map;for(const gn of Ou(Ot))for(const os of ku(Xt,gn.fieldPath))switch(os.op){case"==":case"in":Wt.set(gn.fieldPath.canonicalString(),os.value);break;case"not-in":case"!=":return Wt.set(gn.fieldPath.canonicalString(),os.value),Array.from(Wt.values())}return null}(C,E),Q=function(Xt,Ot){const Wt=[];let gn=!0;for(const os of Ou(Ot)){const sp=0===os.kind?Ql(Xt,os.fieldPath,Xt.startAt):Yp(Xt,os.fieldPath,Xt.startAt);if(!sp.value)return null;Wt.push(sp.value),gn&&(gn=sp.inclusive)}return new Co(Wt,gn)}(C,E),ce=function(Xt,Ot){const Wt=[];let gn=!0;for(const os of Ou(Ot)){const sp=0===os.kind?Yp(Xt,os.fieldPath,Xt.endAt):Ql(Xt,os.fieldPath,Xt.endAt);if(!sp.value)return null;Wt.push(sp.value),gn&&(gn=sp.inclusive)}return new Co(Wt,gn)}(C,E),Fe=this.je(E,C,Q),it=this.je(E,C,ce),Zt=this.We(E,C,G),zt=this.ze(E.indexId,N,Fe,!!Q&&Q.inclusive,it,!!ce&&ce.inclusive,Zt);return he.forEach(zt,Xt=>r.Gt(Xt,t.limit).next(Ot=>{Ot.forEach(Wt=>{const gn=Ue.fromSegments(Wt.documentKey);h.has(gn)||(h=h.add(gn),m.push(gn))})}))}).next(()=>m)}return he.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,o,u,h,m){const E=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),C=E/(null!=t?t.length:1),M=[];for(let N=0;N<E;++N){const G=t?this.He(t[N/C]):pc,Q=r?this.Je(e,G,r[N%C],o):this.Ye(e),ce=u?this.Xe(e,G,u[N%C],h):this.Ye(e+1);M.push(...this.createRange(Q,ce,m.map(Fe=>this.Je(e,G,Fe,!0))))}return M}Je(e,t,r,o){const u=new Va(e,Ue.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new Va(e,Ue.empty(),t,r);return o?u.ke():u}Ye(e){return new Va(e,Ue.empty(),pc,pc)}getFieldIndex(e,t){const r=new VI(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{const h=u.filter(m=>r.$e(m));return h.sort((m,E)=>E.fields.length-m.fields.length),h.length>0?h[0]:null})}Ze(e,t){const r=new vf;for(const o of Ou(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const h=r.Ne(o.kind);Js.fe.Zt(u,h)}return r.Se()}He(e){const t=new vf;return Js.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new vf;return Js.fe.Zt(Nu(this.databaseId,t),r.Ne(function(o){const u=Ou(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new vf);let u=0;for(const h of Ou(e)){const m=r[u++];for(const E of o)if(this.en(t,h.fieldPath)&&tf(m))o=this.nn(o,h,m);else{const C=E.Ne(h.kind);Js.fe.Zt(m,C)}}return this.sn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const h of r.arrayValue.values||[])for(const m of o){const E=new vf;E.seed(m.Se()),Js.fe.Zt(h,E.Ne(t.kind)),u.push(E)}return u}en(e,t){return!!e.filters.find(r=>r instanceof Kn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=jd(e),o=Py(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const h=[];return he.forEach(u,m=>o.get([m.indexId,this.uid]).next(E=>{h.push(function(C,M){const N=M?new Id(M.sequenceNumber,new ci(Vd(M.readTime),new Ue(aa(M.documentKey)),M.largestBatchId)):Id.empty(),G=C.fields.map(([Q,ce])=>new bd(ur.fromServerFormat(Q),ce));return new Ed(C.indexId,C.collectionGroup,G,N)}(m,E))})).next(()=>h)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Mt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=jd(e),u=Py(e);return this.rn(e).next(h=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>he.forEach(m,E=>{return u.put({indexId:E.indexId,uid:this.user.uid||"",sequenceNumber:h,readTime:dc((G=r).readTime),documentKey:Mi(G.documentKey.path),largestBatchId:G.largestBatchId});var G})))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(o,u)=>{const h=r.get(o.collectionGroup);return(h?he.resolve(h):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),he.forEach(m,E=>this.on(e,o,E).next(C=>{const M=this.un(u,E);return C.isEqual(M)?he.resolve():this.an(e,u,E,C,M)}))))})}cn(e,t,r,o){return Bd(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return Bd(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=Bd(e);let u=new Dn(fc);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(h,m)=>{u=u.add(new Va(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new Dn(fc);const o=this.Ze(t,e);if(null==o)return r;const u=Wm(t);if(null!=u){const h=e.data.field(u.fieldPath);if(tf(h))for(const m of h.arrayValue.values||[])r=r.add(new Va(t.indexId,e.key,this.He(m),o))}else r=r.add(new Va(t.indexId,e.key,pc,o));return r}an(e,t,r,o,u){Me("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const h=[];return function(m,E,C,M,N){const G=m.getIterator(),Q=E.getIterator();let ce=ia(G),Fe=ia(Q);for(;ce||Fe;){let it=!1,Zt=!1;if(ce&&Fe){const zt=C(ce,Fe);zt<0?Zt=!0:zt>0&&(it=!0)}else null!=ce?Zt=!0:it=!0;it?(M(Fe),Fe=ia(Q)):Zt?(N(ce),ce=ia(G)):(ce=ia(G),Fe=ia(Q))}}(o,u,fc,m=>{h.push(this.cn(e,t,r,m))},m=>{h.push(this.hn(e,t,r,m))}),he.waitFor(h)}rn(e){let t=1;return Py(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((h,m)=>fc(h,m)).filter((h,m,E)=>!m||0!==fc(h,E[m-1]));const o=[];o.push(e);for(const h of r){const m=fc(h,e),E=fc(h,t);if(0===m)o[0]=e.ke();else if(m>0&&E<0)o.push(h),o.push(h.ke());else if(E>0)break}o.push(t);const u=[];for(let h=0;h<o.length;h+=2)u.push(IDBKeyRange.bound([o[h].indexId,this.uid,o[h].arrayValue,o[h].directionalValue,pc,[]],[o[h+1].indexId,this.uid,o[h+1].arrayValue,o[h+1].directionalValue,pc,[]]));return u}}function ky(n){return Br(n,"collectionParents")}function Bd(n){return Br(n,"indexEntries")}function jd(n){return Br(n,"indexConfiguration")}function Py(n){return Br(n,"indexState")}const mg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ts{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ts(e,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function jI(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],h=IDBKeyRange.only(t.batchId);let m=0;const E=r.Wt({range:h},(M,N,G)=>(m++,G.delete()));u.push(E.next(()=>{_t(1===m)}));const C=[];for(const M of t.mutations){const N=sc(e,M.key.path,t.batchId);u.push(o.delete(N)),C.push(M.key)}return he.waitFor(u).next(()=>C)}function Uu(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}ts.DEFAULT_COLLECTION_PERCENTILE=10,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ts.DEFAULT=new ts(41943040,ts.DEFAULT_COLLECTION_PERCENTILE,ts.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ts.DISABLED=new ts(-1,0,0);class yg{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){_t(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new yg(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return la(e).Wt({index:"userMutationsIndex",range:r},(o,u,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=$d(e),h=la(e);return h.add({}).next(m=>{_t("number"==typeof m);const E=new Ty(m,t,r,o),C=function(G,Q,ce){const Fe=ce.baseMutations.map(Zt=>Rd(G.Jt,Zt)),it=ce.mutations.map(Zt=>Rd(G.Jt,Zt));return{userId:Q,batchId:ce.batchId,localWriteTimeMs:ce.localWriteTime.toMillis(),baseMutations:Fe,mutations:it}}(this.M,this.userId,E),M=[];let N=new Dn((G,Q)=>Mt(G.canonicalString(),Q.canonicalString()));for(const G of o){const Q=sc(this.userId,G.key.path,m);N=N.add(G.key.path.popLast()),M.push(h.put(C)),M.push(u.put(Q,RI))}return N.forEach(G=>{M.push(this.indexManager.addToCollectionParentIndex(e,G))}),e.addOnCommittedListener(()=>{this.ln[m]=E.keys()}),he.waitFor(M).next(()=>E)})}lookupMutationBatch(e,t){return la(e).get(t).next(r=>r?(_t(r.userId===this.userId),Ud(this.M,r)):null)}fn(e,t){return this.ln[t]?he.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return la(e).Wt({index:"userMutationsIndex",range:o},(h,m,E)=>{m.userId===this.userId&&(_t(m.batchId>=r),u=Ud(this.M,m)),E.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return la(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,h)=>{r=u.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return la(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Ud(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ic(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return $d(e).Wt({range:o},(h,m,E)=>{const[C,M,N]=h,G=aa(M);if(C===this.userId&&t.path.isEqual(G))return la(e).get(N).next(Q=>{if(!Q)throw tt();_t(Q.userId===this.userId),u.push(Ud(this.M,Q))});E.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dn(Mt);const o=[];return t.forEach(u=>{const h=ic(this.userId,u.path),m=IDBKeyRange.lowerBound(h),E=$d(e).Wt({range:m},(C,M,N)=>{const[G,Q,ce]=C,Fe=aa(Q);G===this.userId&&u.path.isEqual(Fe)?r=r.add(ce):N.done()});o.push(E)}),he.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=ic(this.userId,r),h=IDBKeyRange.lowerBound(u);let m=new Dn(Mt);return $d(e).Wt({range:h},(E,C,M)=>{const[N,G,Q]=E,ce=aa(G);N===this.userId&&r.isPrefixOf(ce)?ce.length===o&&(m=m.add(Q)):M.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(la(e).get(u).next(h=>{if(null===h)throw tt();_t(h.userId===this.userId),r.push(Ud(this.M,h))}))}),he.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return jI(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),he.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return $d(e).Wt({range:r},(u,h,m)=>{if(u[0]===this.userId){const E=aa(u[1]);o.push(E)}else m.done()}).next(()=>{_t(0===o.length)})})}containsKey(e,t){return _g(e,this.userId,t)}wn(e){return wf(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function _g(n,e,t){const r=ic(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return $d(n).Wt({range:u,jt:!0},(m,E,C)=>{const[M,N,G]=m;M===e&&N===o&&(h=!0),C.done()}).next(()=>h)}function la(n){return Br(n,"mutations")}function $d(n){return Br(n,"documentMutations")}function wf(n){return Br(n,"mutationQueues")}class ca{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new ca(0)}static yn(){return new ca(-1)}}class Fy{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new ca(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>Et.fromTimestamp(new Wn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ef(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(_t(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return Ef(e).Wt((h,m)=>{const E=hc(m);E.sequenceNumber<=t&&null===r.get(E.targetId)&&(o++,u.push(this.removeTargetData(e,E)))}).next(()=>he.waitFor(u)).next(()=>o)}forEachTarget(e,t){return Ef(e).Wt((r,o)=>{const u=hc(o);t(u)})}pn(e){return ow(e).get("targetGlobalKey").next(t=>(_t(null!==t),t))}In(e,t){return ow(e).put("targetGlobalKey",t)}Tn(e,t){return Ef(e).put(pg(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Yl(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Ef(e).Wt({range:o,index:"queryTargetsIndex"},(h,m,E)=>{const C=hc(m);nf(t,C.target)&&(u=C,E.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=da(e);return t.forEach(h=>{const m=Mi(h.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,h))}),he.waitFor(o)}removeMatchingKeys(e,t,r){const o=da(e);return he.forEach(t,u=>{const h=Mi(u.path);return he.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=da(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=da(e);let u=dn();return o.Wt({range:r,jt:!0},(h,m,E)=>{const C=aa(h[1]),M=new Ue(C);u=u.add(M)}).next(()=>u)}containsKey(e,t){const r=Mi(t.path),o=IDBKeyRange.bound([r],[y0(r)],!1,!0);let u=0;return da(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([h,m],E,C)=>{0!==h&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return Ef(e).get(t).next(r=>r?hc(r):null)}}function Ef(n){return Br(n,"targets")}function ow(n){return Br(n,"targetGlobal")}function da(n){return Br(n,"targetDocuments")}function Ua(n){return vg.apply(this,arguments)}function vg(){return vg=(0,me.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==lc)throw n;Me("LocalStore","Unexpectedly lost primary lease")}),vg.apply(this,arguments)}function Ly([n,e],[t,r]){const o=Mt(n,t);return 0===o?Mt(e,r):o}class Vy{constructor(e){this.An=e,this.buffer=new Dn(Ly),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Ly(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aw{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Me("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,me.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Fu(o)?Me("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Ua(o)}yield t.Sn(e)}))}}class uw{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(bs.A);const r=new Vy(t);return this.Dn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(mg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mg):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,h,m,E,C;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,h=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,E=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),Up()<=$i.in.DEBUG&&Me("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-M}ms\n\tDetermined least recently used ${o} in `+(m-h)+`ms\n\tRemoved ${u} targets in `+(E-m)+`ms\n\tRemoved ${N} documents in `+(C-E)+`ms\nTotal Duration: ${C-M}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class Uy{constructor(e,t){this.db=e,this.garbageCollector=new uw(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return bf(e,r)}removeReference(e,t,r){return bf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return bf(e,t)}On(e,t){return function(r,o){let u=!1;return wf(r).zt(h=>_g(r,h,o).next(m=>(m&&(u=!0),he.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(h,m)=>{if(m<=t){const E=this.On(e,h).next(C=>{if(!C)return u++,r.getEntry(e,h).next(()=>(r.removeEntry(h,Et.min()),da(e).delete([0,Mi(h.path)])))});o.push(E)}}).next(()=>he.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return bf(e,t)}Mn(e,t){const r=da(e);let o,u=bs.A;return r.Wt({index:"documentTargetsIndex"},([h,m],{path:E,sequenceNumber:C})=>{0===h?(u!==bs.A&&t(new Ue(aa(o)),u),u=C,o=E):u=bs.A}).next(()=>{u!==bs.A&&t(new Ue(aa(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function bf(n,e){return da(n).put((r=n.currentSequenceNumber,{targetId:0,path:Mi(e.path),sequenceNumber:r}));var r}class lw{constructor(){this.changes=new Pu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class cw{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Bu(e).put(r)}removeEntry(e,t,r){return Bu(e).delete(function(o,u){const h=o.path.toArray();return[h.slice(0,h.length-2),h[h.length-2],fg(u),h[h.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=un.newInvalidDocument(t);return Bu(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(If(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:un.newInvalidDocument(t)};return Bu(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(If(t))},(o,u)=>{r={document:this.$n(t,u),size:Uu(u)}}).next(()=>r)}getEntries(e,t){let r=es();return this.Ln(e,t,(o,u)=>{const h=this.$n(o,u);r=r.insert(o,h)}).next(()=>r)}Un(e,t){let r=es(),o=new cr(Ue.comparator);return this.Ln(e,t,(u,h)=>{const m=this.$n(u,h);r=r.insert(u,m),o=o.insert(u,Uu(h))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return he.resolve();let o=new Dn(fw);t.forEach(E=>o=o.add(E));const u=IDBKeyRange.bound(If(o.first()),If(o.last())),h=o.getIterator();let m=h.getNext();return Bu(e).Wt({index:"documentKeyIndex",range:u},(E,C,M)=>{const N=Ue.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&fw(m,N)<0;)r(m,null),m=h.getNext();m&&m.isEqual(N)&&(r(m,C),m=h.hasNext()?h.getNext():null),m?M.Ut(If(m)):M.done()}).next(()=>{for(;m;)r(m,null),m=h.hasNext()?h.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),fg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Bu(e).qt(IDBKeyRange.bound(o,u,!0)).next(h=>{let m=es();for(const E of h){const C=this.$n(Ue.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=es();const h=hw(t,r),m=hw(t,ci.max());return Bu(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(h,m,!0)},(E,C,M)=>{const N=this.$n(Ue.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(N.key,N),u.size===o&&M.done()}).next(()=>u)}newChangeBuffer(e){return new dw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return wg(e).get("remoteDocumentGlobalKey").next(t=>(_t(!!t),t))}Fn(e,t){return wg(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function kI(n,e){let t;if(e.document)t=DI(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ue.fromSegments(e.noDocument.path),o=Vd(e.noDocument.readTime);t=un.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=Ue.fromSegments(e.unknownDocument.path),o=Vd(e.unknownDocument.version);t=un.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Wn(r[0],r[1]);return Et.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(Et.min()))return r}return un.newInvalidDocument(e)}}class dw extends lw{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Pu(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Dn((u,h)=>Mt(u.canonicalString(),h.canonicalString()));return this.changes.forEach((u,h)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),h.isValidDocument()){const E=xy(this.Kn.M,h);o=o.add(u.path.popLast()),r+=Uu(E)-m.size,t.push(this.Kn.addEntry(e,u,E))}else if(r-=m.size,this.trackRemovals){const E=xy(this.Kn.M,h.convertToNoDocument(Et.min()));t.push(this.Kn.addEntry(e,u,E))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,h)=>{this.Gn.set(u,{size:h,readTime:r.get(u).readTime})}),r))}}function wg(n){return Br(n,"remoteDocumentGlobal")}function Bu(n){return Br(n,"remoteDocumentsV14")}function If(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hw(n,e){const t=e.documentKey.path.toArray();return[n,fg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function fw(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Mt(t[u],r[u]),o)return o;return o=Mt(t.length,r.length),o||(o=Mt(t[t.length-2],r[r.length-2]),o||Mt(t[t.length-1],r[r.length-1]))}class By{constructor(e){this.M=e}kt(e,t,r,o){const u=new yf("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",J0,{unique:!0}),m.createObjectStore("documentMutations"),Eg(e),function(m){m.createObjectStore("remoteDocuments")}(e));let h=he.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Eg(e)),h=h.next(()=>function(m){const E=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return E.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(h=h.next(()=>function(m,E){return E.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",J0,{unique:!0});const M=E.store("mutations"),N=C.map(G=>M.put(G));return he.waitFor(N)})}(e,u))),h=h.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(h=h.next(()=>this.Qn(u))),r<6&&o>=6&&(h=h.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(h=h.next(()=>this.Wn(u))),r<8&&o>=8&&(h=h.next(()=>this.zn(e,u))),r<9&&o>=9&&(h=h.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(h=h.next(()=>this.Hn(u))),r<11&&o>=11&&(h=h.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(h=h.next(()=>{!function(m){const E=m.createObjectStore("documentOverlays",{keyPath:Nd});E.createIndex("collectionPathOverlayIndex",Od,{unique:!1}),E.createIndex("collectionGroupOverlayIndex",kd,{unique:!1})}(e)})),r<13&&o>=13&&(h=h.next(()=>function(m){const E=m.createObjectStore("remoteDocumentsV14",{keyPath:gf});E.createIndex("documentKeyIndex",NI),E.createIndex("collectionGroupIndex",OI)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(h=h.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:oc}).createIndex("sequenceNumberIndex",dg,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:Ys}).createIndex("documentKeyIndex",by,{unique:!1})}(e)})),h}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=Uu(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>he.forEach(o,u=>{const h=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",h).next(m=>he.forEach(m,E=>{_t(E.userId===u.userId);const C=Ud(this.M,E);return jI(e,u.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((h,m)=>{const E=new Yt(h),C=[0,Mi(E)];u.push(t.get(C).next(M=>M?he.resolve():t.put({targetId:0,path:Mi(E),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>he.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:hi});const r=t.store("collectionParents"),o=new Oy,u=h=>{if(o.add(h)){const m=h.lastSegment(),E=h.popLast();return r.put({collectionId:m,parent:Mi(E)})}};return t.store("remoteDocuments").Wt({jt:!0},(h,m)=>{const E=new Yt(h);return u(E.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([h,m,E],C)=>{const M=aa(m);return u(M.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=hc(o),h=pg(this.M,u);return t.put(h)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,h)=>{const m=t.store("remoteDocumentsV14"),E=(C=h,C.document?new Ue(Yt.fromString(C.document.name).popFirst(5)):C.noDocument?Ue.fromSegments(C.noDocument.path):C.unknownDocument?Ue.fromSegments(C.unknownDocument.path):tt()).path.toArray();var C;const M={prefixPath:E.slice(0,E.length-2),collectionGroup:E[E.length-2],documentId:E[E.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(m.put(M))}).next(()=>he.waitFor(o))}}function Eg(n){n.createObjectStore("targetDocuments",{keyPath:ua}).createIndex("documentTargetsIndex",mf,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ey,{unique:!0}),n.createObjectStore("targetGlobal")}const bg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ig{constructor(e,t,r,o,u,h,m,E,C,M,N=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=h,this.document=m,this.Xn=C,this.Zn=M,this.ts=N,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=G=>Promise.resolve(),!Ig.vt())throw new Se(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Uy(this,o),this.hs=t+"main",this.M=new Sy(E),this.ls=new Qs(this.hs,this.ts,new By(this.M)),this.fs=new Fy(this.referenceDelegate,this.M),this.ds=new cw(this.M),this._s=new gT,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===M&&ar("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Se(ae.FAILED_PRECONDITION,bg);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new bs(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,me.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Df(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(Fu(e))return Me("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Me("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Hd(e).get("owner").next(t=>he.resolve(this.bs(t)))}Vs(e){return Df(e).delete(this.clientId)}vs(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Br(r,"clientMetadata");return o.qt().next(u=>{const h=e.Ds(u,18e5),m=u.filter(E=>-1===h.indexOf(E));return he.forEach(m,E=>o.delete(E.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?he.resolve(!0):Hd(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Se(ae.FAILED_PRECONDITION,bg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Df(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Me("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Cy(t,bs.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Df(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return yg.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new BI(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return rw.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Me("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(h=this.ts)?Fd:13===h?uc:12===h?Pd:11===h?ac:void tt();var h;let m;return this.ls.runTransaction(e,o,u,E=>(m=new Cy(E,this.es?this.es.next():bs.A),"readwrite-primary"===t?this.Es(m).next(C=>!!C||this.As(m)).next(C=>{if(!C)throw ar(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Se(ae.FAILED_PRECONDITION,lc);return r(m)}).next(C=>this.Ps(m).next(()=>C)):this.$s(m).next(()=>r(m)))).then(E=>(m.raiseOnCommittedEvent(),E))}$s(e){return Hd(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Se(ae.FAILED_PRECONDITION,bg)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Hd(e).put("owner",t)}static vt(){return Qs.vt()}Rs(e){const t=Hd(e);return t.get("owner").next(r=>this.bs(r)?(Me("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(ar(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Nt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Me("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ar("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){ar("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Hd(n){return Br(n,"owner")}function Df(n){return Br(n,"clientMetadata")}function Dg(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class pw{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Ue.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):ey(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new Ue(t)).next(r=>{let o=ug();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=ug();return this.indexManager.getCollectionParents(e,o).next(h=>he.forEach(h,m=>{const E=(C=t,M=m.child(o),new na(M,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,M;return this.zs(e,E,r).next(C=>{C.forEach((M,N)=>{u=u.insert(M,N)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const h of u)for(const m of h.mutations){const E=m.key;let C=o.get(E);null==C&&(C=un.newInvalidDocument(E),o=o.insert(E,C)),uy(m,C,h.localWriteTime),C.isFoundDocument()||(o=o.remove(E))}}).next(()=>(o.forEach((u,h)=>{eg(t,h)||(o=o.remove(u))}),o))}}class Cg{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=dn(),o=dn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Cg(e,t.fromCache,r,o)}}class jy{Xs(e){this.Zs=e}Qs(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(Et.min())?this.ti(e,t):this.Zs.Ks(e,o).next(u=>{const h=this.ei(t,u);return(Qp(t)||Jp(t))&&this.ni(t.limitType,h,o,r)?this.ti(e,t):(Up()<=$i.in.DEBUG&&Me("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),of(t)),this.Zs.Qs(e,t,zp(r,-1)).next(m=>(h.forEach(E=>{m=m.insert(E.key,E)}),m)))});var u}ei(e,t){let r=new Dn(R0(e));return t.forEach((o,u)=>{eg(e,u)&&(r=r.add(u))}),r}ni(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ti(e,t){return Up()<=$i.in.DEBUG&&Me("QueryEngine","Using full collection scan to execute query:",of(t)),this.Zs.Qs(e,t,ci.min())}}class mT{constructor(e,t,r,o){this.persistence=e,this.si=t,this.M=o,this.ii=new cr(Mt),this.ri=new Pu(u=>Yl(u),nf),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new pw(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function gw(n,e,t,r){return new mT(n,e,t,r)}function mw(n,e){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,me.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.ai(e),t.Bs.getAllMutationBatches(r))).next(u=>{const h=[],m=[];let E=dn();for(const C of o){h.push(C.batchId);for(const M of C.mutations)E=E.add(M.key)}for(const C of u){m.push(C.batchId);for(const M of C.mutations)E=E.add(M.key)}return t.ci.Ks(r,E).next(C=>({hi:C,removedBatchIds:h,addedBatchIds:m}))})})}),Tg.apply(this,arguments)}function $I(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.ui.newChangeBuffer({trackRemovals:!0});return function(h,m,E,C){const M=E.batch,N=M.keys();let G=he.resolve();return N.forEach(Q=>{G=G.next(()=>C.getEntry(m,Q)).next(ce=>{const Fe=E.docVersions.get(Q);_t(null!==Fe),ce.version.compareTo(Fe)<0&&(M.applyToRemoteDocument(ce,E),ce.isValidDocument()&&(ce.setReadTime(E.commitVersion),C.addEntry(ce)))})}),G.next(()=>h.Bs.removeMutationBatch(m,M))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,o))})}function Er(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function yw(n,e){const t=Ge(n),r=e.snapshotVersion;let o=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const h=t.ui.newChangeBuffer({trackRemovals:!0});o=t.ii;const m=[];e.targetChanges.forEach((C,M)=>{const N=o.get(M);if(!N)return;m.push(t.fs.removeMatchingKeys(u,C.removedDocuments,M).next(()=>t.fs.addMatchingKeys(u,C.addedDocuments,M)));let G=N.withSequenceNumber(u.currentSequenceNumber);var Q,ce,Fe;e.targetMismatches.has(M)?G=G.withResumeToken(Mr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):C.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(C.resumeToken,r)),o=o.insert(M,G),ce=G,Fe=C,(0===(Q=N).resumeToken.approximateByteSize()||ce.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=3e8||Fe.addedDocuments.size+Fe.modifiedDocuments.size+Fe.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,G))});let E=es();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),m.push(_w(u,h,e.documentUpdates).next(C=>{E=C})),!r.isEqual(Et.min())){const C=t.fs.getLastRemoteSnapshotVersion(u).next(M=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(C)}return he.waitFor(m).next(()=>h.apply(u)).next(()=>t.ci.Gs(u,E)).next(()=>E)}).then(u=>(t.ii=o,u))}function _w(n,e,t){let r=dn();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=es();return t.forEach((h,m)=>{const E=o.get(h);m.isNoDocument()&&m.version.isEqual(Et.min())?(e.removeEntry(h,m.readTime),u=u.insert(h,m)):!E.isValidDocument()||m.version.compareTo(E.version)>0||0===m.version.compareTo(E.version)&&E.hasPendingWrites?(e.addEntry(m),u=u.insert(h,m)):Me("LocalStore","Ignoring outdated watch update for ",h,". Current version:",E.version," Watch version:",m.version)}),u})}function HI(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function gc(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,he.resolve(o)):t.fs.allocateTargetId(r).next(h=>(o=new Vu(e,h,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ii.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function Gd(n,e,t){return Ag.apply(this,arguments)}function Ag(){return Ag=(0,me.Z)(function*(n,e,t){const r=Ge(n),o=r.ii.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Fu(h))throw h;Me("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.ii=r.ii.remove(e),r.ri.delete(o.target)}),Ag.apply(this,arguments)}function Cf(n,e,t){const r=Ge(n);let o=Et.min(),u=dn();return r.persistence.runTransaction("Execute query","readonly",h=>function(m,E,C){const M=Ge(m),N=M.ri.get(C);return void 0!==N?he.resolve(M.ii.get(N)):M.fs.getTargetData(E,C)}(r,h,To(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(h,m.targetId).next(E=>{u=E})}).next(()=>r.si.Qs(h,e,t?o:Et.min(),t?u:dn())).next(m=>(ww(r,M0(e),m),{documents:m,li:u})))}function mc(n,e){const t=Ge(n),r=Ge(t.fs),o=t.ii.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(h=>h?h.target:null))}function vw(n,e){const t=Ge(n),r=t.oi.get(e)||Et.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.ui.getAllFromCollectionGroup(o,e,zp(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(ww(t,e,o),o))}function ww(n,e,t){let r=Et.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.oi.set(e,r)}function $y(){return $y=(0,me.Z)(function*(n,e,t,r){const o=Ge(n);let u=dn(),h=es();for(const C of t){const M=e.fi(C.metadata.name);C.document&&(u=u.add(M));const N=e.di(C);N.setReadTime(e._i(C.metadata.readTime)),h=h.insert(M,N)}const m=o.ui.newChangeBuffer({trackRemovals:!0}),E=yield gc(o,(C=r,To(Jl(Yt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>_w(C,m,h).next(M=>(m.apply(C),M)).next(M=>o.fs.removeMatchingKeysForTargetId(C,E.targetId).next(()=>o.fs.addMatchingKeys(C,u,E.targetId)).next(()=>o.ci.Gs(C,M)).next(()=>M)))}),$y.apply(this,arguments)}function bw(n,e){return Iw.apply(this,arguments)}function Iw(){return Iw=(0,me.Z)(function*(n,e,t=dn()){const r=yield gc(n,To(My(e.bundledQuery))),o=Ge(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const h=Ur(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o._s.saveNamedQuery(u,e);const m=r.withResumeToken(Mr.EMPTY_BYTE_STRING,h);return o.ii=o.ii.insert(m.targetId,m),o.fs.updateTargetData(u,m).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),Iw.apply(this,arguments)}class Hy{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return he.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:Ur(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:My(r.bundledQuery),readTime:Ur(r.readTime)}),he.resolve();var r}}class Gy{constructor(){this.overlays=new cr(Ue.comparator),this.gi=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.gi.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.gi.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const o=Sd(),u=t.length+1,h=new Ue(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const E=m.getNext().value,C=E.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&E.largestBatchId>r&&o.set(E.getKey(),E)}return he.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new cr((C,M)=>C-M);const h=this.overlays.getIterator();for(;h.hasNext();){const C=h.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let M=u.get(C.largestBatchId);null===M&&(M=Sd(),u=u.insert(C.largestBatchId,M)),M.set(C.getKey(),C)}}const m=Sd(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach((C,M)=>m.set(C,M)),!(m.size()>=o)););return he.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const h=this.gi.get(o.largestBatchId).delete(r.key);this.gi.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new Ay(t,r));let u=this.gi.get(t);void 0===u&&(u=dn(),this.gi.set(t,u)),this.gi.set(t,u.add(r.key))}}class Xs{constructor(){this.yi=new Dn(jr.pi),this.Ii=new Dn(jr.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new jr(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new jr(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new Ue(new Yt([])),r=new jr(t,e),o=new jr(t,e+1),u=[];return this.Ii.forEachInRange([r,o],h=>{this.Ai(h),u.push(h.key)}),u}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new Ue(new Yt([])),r=new jr(t,e),o=new jr(t,e+1);let u=dn();return this.Ii.forEachInRange([r,o],h=>{u=u.add(h.key)}),u}containsKey(e){const t=new jr(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class jr{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return Ue.comparator(e.key,t.key)||Mt(e.vi,t.vi)}static Ti(e,t){return Mt(e.vi,t.vi)||Ue.comparator(e.key,t.key)}}class GI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new Dn(jr.pi)}checkEmpty(e){return he.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.Si;this.Si++;const h=new Ty(u,t,r,o);this.Bs.push(h);for(const m of o)this.Di=this.Di.add(new jr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return he.resolve(h)}lookupMutationBatch(e,t){return he.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.xi(t+1),u=o<0?0:o;return he.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return he.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new jr(t,0),o=new jr(t,Number.POSITIVE_INFINITY),u=[];return this.Di.forEachInRange([r,o],h=>{const m=this.Ci(h.vi);u.push(m)}),he.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dn(Mt);return t.forEach(o=>{const u=new jr(o,0),h=new jr(o,Number.POSITIVE_INFINITY);this.Di.forEachInRange([u,h],m=>{r=r.add(m.vi)})}),he.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ue.isDocumentKey(u)||(u=u.child(""));const h=new jr(new Ue(u),0);let m=new Dn(Mt);return this.Di.forEachWhile(E=>{const C=E.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(E.vi)),!0)},h),he.resolve(this.Ni(m))}Ni(e){const t=[];return e.forEach(r=>{const o=this.Ci(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){_t(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return he.forEach(t.mutations,o=>{const u=new jr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new jr(t,0),o=this.Di.firstAfterOrEqual(r);return he.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return he.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class ha{constructor(e){this.Mi=e,this.docs=new cr(Ue.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,h=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():un.newInvalidDocument(t))}getEntries(e,t){let r=es();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():un.newInvalidDocument(o))}),he.resolve(r)}getAllFromCollection(e,t,r){let o=es();const u=new Ue(t.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:m,value:{document:E}}=h.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||I0(dI(E),r)<=0||(o=o.insert(E.key,E.mutableCopy()))}return he.resolve(o)}getAllFromCollectionGroup(e,t,r,o){tt()}Oi(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new So(this)}getSize(e){return he.resolve(this.size)}}class So extends lw{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class xo{constructor(e){this.persistence=e,this.Fi=new Pu(t=>Yl(t),nf),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Xs,this.targetCount=0,this.Li=ca.gn()}forEachTarget(e,t){return this.Fi.forEach((r,o)=>t(o)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),he.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new ca(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Tn(t),he.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Fi.forEach((h,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Fi.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),he.waitFor(u).next(()=>o)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(h=>{u.push(o.markPotentiallyOrphaned(e,h))}),he.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.Bi.containsKey(t))}}class Dw{constructor(e,t){this.Ui={},this.overlays={},this.es=new bs(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new xo(this),this.indexManager=new UI,this.ds=new ha(r=>this.referenceDelegate.qi(r)),this.M=new Sy(t),this._s=new Hy(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Gy,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new GI(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Me("MemoryPersistence","Starting transaction:",e);const o=new Cw(this.es.next());return this.referenceDelegate.Ki(),r(o).next(u=>this.referenceDelegate.Gi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Qi(e,t){return he.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class Cw extends cc{constructor(e){super(),this.currentSequenceNumber=e}}class qy{constructor(e){this.persistence=e,this.ji=new Xs,this.Wi=null}static zi(e){return new qy(e)}get Hi(){if(this.Wi)return this.Wi;throw tt()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),he.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(o=>this.Hi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Hi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Hi,r=>{const o=Ue.fromPath(r);return this.Ji(e,o).next(u=>{u||t.removeEntry(o,Et.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return he.or([()=>he.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function Tw(n,e){return`firestore_clients_${n}_${e}`}function Aw(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Zy(n,e){return`firestore_targets_${n}_${e}`}class qd{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Yi(e,t,r){const o=JSON.parse(r);let u,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(u=new Se(o.error.code,o.error.message))),h?new qd(e,t,o.state,u):(ar("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ba{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Se(r.error.code,r.error.message))),u?new Ba(e,r.state,o):(ar("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Sg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=df();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=Hp(r.activeTargetIds[h]),u=u.add(r.activeTargetIds[h]);return o?new Sg(e,u):(ar("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class xg{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new xg(t.clientId,t.onlineState):(ar("SharedClientState",`Failed to parse online state: ${e}`),null)}}class zy{constructor(){this.activeTargetIds=df()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mg{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new cr(Mt),this.started=!1,this.rr=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ur=Tw(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new zy),this.cr=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.er)continue;const u=e.getItem(Tw(e.persistenceKey,o));if(u){const h=Sg.Yi(o,u);h&&(e.ir=e.ir.insert(h.clientId,h))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const o=e.mr(r);o&&e.gr(o)}for(const o of e.rr)e.sr(o);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Zy(this.persistenceKey,e));if(r){const o=Ba.Yi(e,r);o&&(t=o.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Zy(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ir(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Me("SharedClientState","READ",e,t),t}setItem(e,t){Me("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Me("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Me("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void ar("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Pr(r.key);return t.br(o,null)}{const o=t.Vr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Sr(o)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(r.key===t.dr){if(null!==r.newValue){const o=t.mr(r.newValue);if(o)return t.gr(o)}}else if(r.key===t.ar){const o=function(u){let h=bs.A;if(null!=u)try{const m=JSON.parse(u);_t("number"==typeof m),h=m}catch(m){ar("SharedClientState","Failed to read sequence number from WebStorage",m)}return h}(r.newValue);o!==bs.A&&t.sequenceNumberHandler(o)}else if(r.key===t._r){const o=t.Nr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.kr(u)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const o=new qd(this.currentUser,e,t,r),u=Aw(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Xi())}Ir(e){const t=Aw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const o=Zy(this.persistenceKey,e),u=new Ba(e,t,r);this.setItem(o,u.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return Sg.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return qd.Yi(new Vr(void 0!==r[2]?r[2]:null),o,t)}Dr(e,t){const r=this.lr.exec(e),o=Number(r[1]);return Ba.Yi(o,t)}mr(e){return xg.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Me("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),o=this.yr(this.ir),u=this.yr(r),h=[],m=[];return u.forEach(E=>{o.has(E)||h.push(E)}),o.forEach(E=>{u.has(E)||m.push(E)}),this.syncEngine.Fr(h,m).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=df();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class Wy{constructor(){this.$r=new zy,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new zy,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Rg{Lr(e){}shutdown(){}}class Sw{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Me("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Me("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const xw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Mw{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class Ky extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,o,u){const h=this.uo(e,t);Me("RestConnection","Sending: ",h,r);const m={};return this.ao(m,o,u),this.co(e,h,m,r).then(E=>(Me("RestConnection","Received: ",E),E),E=>{throw Zl("RestConnection",`${e} failed with error: `,E,"url: ",h,"request:",r),E})}ho(e,t,r,o,u){return this.oo(e,t,r,o,u)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ql,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}uo(e,t){return`${this.io}/v1/${t}:${xw[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((u,h)=>{const m=new Xb;m.listenOnce(Hl.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Vp.NO_ERROR:const C=m.getResponseJson();Me("Connection","XHR received:",JSON.stringify(C)),u(C);break;case Vp.TIMEOUT:Me("Connection",'RPC "'+e+'" timed out'),h(new Se(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Vp.HTTP_ERROR:const M=m.getStatus();if(Me("Connection",'RPC "'+e+'" failed with status:',M,"response text:",m.getResponseText()),M>0){const N=m.getResponseJson().error;if(N&&N.status&&N.message){const G=function(Q){const ce=Q.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(ce)>=0?ce:ae.UNKNOWN}(N.status);h(new Se(G,N.message))}else h(new Se(ae.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new Se(ae.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{Me("Connection",'RPC "'+e+'" completed.')}});const E=JSON.stringify(o);m.send(t,"POST",E,r,15)})}lo(e,t,r){const o=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Qb(),h=l0(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new Jb({})),this.ao(m.initMessageHeaders,t,r),(0,Nt.uI)()||(0,Nt.b$)()||(0,Nt.d)()||(0,Nt.w1)()||(0,Nt.Mn)()||(0,Nt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const E=o.join("");Me("Connection","Creating WebChannel: "+E,m);const C=u.createWebChannel(E,m);let M=!1,N=!1;const G=new Mw({Wr:ce=>{N?Me("Connection","Not sending because WebChannel is closed:",ce):(M||(Me("Connection","Opening WebChannel transport."),C.open(),M=!0),Me("Connection","WebChannel sending:",ce),C.send(ce))},zr:()=>C.close()}),Q=(ce,Fe,it)=>{ce.listen(Fe,Zt=>{try{it(Zt)}catch(zt){setTimeout(()=>{throw zt},0)}})};return Q(C,Gl.EventType.OPEN,()=>{N||Me("Connection","WebChannel transport opened.")}),Q(C,Gl.EventType.CLOSE,()=>{N||(N=!0,Me("Connection","WebChannel transport closed"),G.no())}),Q(C,Gl.EventType.ERROR,ce=>{N||(N=!0,Zl("Connection","WebChannel transport errored:",ce),G.no(new Se(ae.UNAVAILABLE,"The operation could not be completed")))}),Q(C,Gl.EventType.MESSAGE,ce=>{var Fe;if(!N){const it=ce.data[0];_t(!!it);const Zt=it,zt=Zt.error||(null===(Fe=Zt[0])||void 0===Fe?void 0:Fe.error);if(zt){Me("Connection","WebChannel received error:",zt);const Xt=zt.status;let Ot=function(gn){const os=lr[gn];if(void 0!==os)return cf(os)}(Xt),Wt=zt.message;void 0===Ot&&(Ot=ae.INTERNAL,Wt="Unknown error status: "+Xt+" with message "+zt.message),N=!0,G.no(new Se(Ot,Wt)),C.close()}else Me("Connection","WebChannel received:",it),G.so(it)}}),Q(h,c0.STAT_EVENT,ce=>{ce.stat===Gm.PROXY?Me("Connection","Detected buffering proxy"):ce.stat===Gm.NOPROXY&&Me("Connection","Detected no buffering proxy")}),setTimeout(()=>{G.eo()},0),G}}function Tf(){return"undefined"!=typeof window?window:null}function Af(){return"undefined"!=typeof document?document:null}function Zd(n){return new H0(n,!0)}class Ng{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=o,this.wo=u,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),o=Math.max(0,t-r);o>0&&Me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class Yy{constructor(e,t,r,o,u,h,m,E){this.Yn=e,this.Ro=r,this.Po=o,this.bo=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=E,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Ng(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,me.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,me.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(ar(t.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Vo===t&&this.qo(r,o)},r=>{e(()=>{const o=new Se(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(o)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(o=>{r(()=>this.Ko(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}No(){var e=this;this.state=5,this.Do.To((0,me.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Me("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Me("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Rw extends Yy{constructor(e,t,r,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,h),this.M=u}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function CI(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(E=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===E?1:"REMOVE"===E?2:"CURRENT"===E?3:"RESET"===E?4:tt(),o=e.targetChange.targetIds||[],u=function(E,C){return E.N?(_t(void 0===C||"string"==typeof C),Mr.fromBase64String(C||"")):(_t(void 0===C||C instanceof Uint8Array),Mr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&function(E){const C=void 0===E.code?ae.UNKNOWN:cf(E.code);return new Se(C,E.message||"")}(h);t=new nc(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Ao(n,r.document.name),u=Ur(r.document.updateTime),h=new Si({mapValue:{fields:r.document.fields}}),m=un.newFoundDocument(o,u,h);t=new lg(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Ao(n,r.document),u=r.readTime?Ur(r.readTime):Et.min(),h=un.newNoDocument(o,u);t=new lg([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,o=Ao(n,r.document);t=new lg([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return tt();{const r=e.filter,u=new L0(r.count||0);t=new U0(r.targetId,u)}}var E;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return Et.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Et.min():u.readTime?Ur(u.readTime):Et.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=ff(this.M),t.addTarget=function(o,u){let h;const m=u.target;return h=Kp(m)?{documents:Ks(o,m)}:{query:TI(o,m)},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?h.resumeToken=py(o,u.resumeToken):u.snapshotVersion.compareTo(Et.min())>0&&(h.readTime=Md(o,u.snapshotVersion.toTimestamp())),h}(this.M,e);const r=function W0(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=ff(this.M),t.removeTarget=e,this.Fo(t)}}class Nw extends Yy{constructor(e,t,r,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,h),this.M=u,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(_t(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function pT(n,e){return n&&n.length>0?(_t(void 0!==e),n.map(t=>function(r,o){let u=Ur(r.updateTime?r.updateTime:o);return u.isEqual(Et.min())&&(u=Ur(o)),new oy(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.Yo(r,t)}return _t(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=ff(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Rd(this.M,r))};this.Fo(t)}}class Ow extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.tu=!1}eu(){if(this.tu)throw new Se(ae.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.oo(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(ae.UNKNOWN,o.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ho(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Se(ae.UNKNOWN,o.toString())})}terminate(){this.tu=!0}}class kw{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(ar(t),this.iu=!1):Me("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class Pw{constructor(e,t,r,o,u){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=u,this._u.Lr(m=>{r.enqueueAndForget((0,me.Z)(function*(){var E;ju(h)&&(Me("RemoteStore","Restarting streams for network reachability change."),yield(E=(0,me.Z)(function*(C){const M=Ge(C);M.fu.add(4),yield zd(M),M.wu.set("Unknown"),M.fu.delete(4),yield Sf(M)}),function(C){return E.apply(this,arguments)})(h))}))}),this.wu=new kw(r,o)}}function Sf(n){return Qy.apply(this,arguments)}function Qy(){return Qy=(0,me.Z)(function*(n){if(ju(n))for(const e of n.du)yield e(!0)}),Qy.apply(this,arguments)}function zd(n){return Jy.apply(this,arguments)}function Jy(){return Jy=(0,me.Z)(function*(n){for(const e of n.du)yield e(!1)}),Jy.apply(this,arguments)}function Og(n,e){const t=Ge(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),t_(t)?e_(t):Kd(t).xo()&&Xy(t,e))}function xf(n,e){const t=Ge(n),r=Kd(t);t.lu.delete(e),r.xo()&&Fw(t,e),0===t.lu.size&&(r.xo()?r.Mo():ju(t)&&t.wu.set("Unknown"))}function Xy(n,e){n.mu.Z(e.targetId),Kd(n).jo(e)}function Fw(n,e){n.mu.Z(e),Kd(n).Wo(e)}function e_(n){n.mu=new bI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),Kd(n).start(),n.wu.ru()}function t_(n){return ju(n)&&!Kd(n).Co()&&n.lu.size>0}function ju(n){return 0===Ge(n).fu.size}function Lw(n){n.mu=void 0}function qI(n){return n_.apply(this,arguments)}function n_(){return n_=(0,me.Z)(function*(n){n.lu.forEach((e,t)=>{Xy(n,e)})}),n_.apply(this,arguments)}function ZI(n,e){return r_.apply(this,arguments)}function r_(){return r_=(0,me.Z)(function*(n,e){Lw(n),t_(n)?(n.wu.au(e),e_(n)):n.wu.set("Unknown")}),r_.apply(this,arguments)}function zI(n,e,t){return kg.apply(this,arguments)}function kg(){return kg=(0,me.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof nc&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(o,u){const h=u.cause;for(const m of u.targetIds)o.lu.has(m)&&(yield o.remoteSyncer.rejectListen(m,h),o.lu.delete(m),o.mu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Me("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Mf(n,r)}else if(e instanceof lg?n.mu.ut(e):e instanceof U0?n.mu._t(e):n.mu.ht(e),!t.isEqual(Et.min()))try{const r=yield Er(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const h=o.mu.yt(u);return h.targetChanges.forEach((m,E)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.lu.get(E);C&&o.lu.set(E,C.withResumeToken(m.resumeToken,u))}}),h.targetMismatches.forEach(m=>{const E=o.lu.get(m);if(!E)return;o.lu.set(m,E.withResumeToken(Mr.EMPTY_BYTE_STRING,E.snapshotVersion)),Fw(o,m);const C=new Vu(E.target,m,1,E.sequenceNumber);Xy(o,C)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){Me("RemoteStore","Failed to raise snapshot:",r),yield Mf(n,r)}var r}),kg.apply(this,arguments)}function Mf(n,e,t){return Pg.apply(this,arguments)}function Pg(){return Pg=(0,me.Z)(function*(n,e,t){if(!Fu(e))throw e;n.fu.add(1),yield zd(n),n.wu.set("Offline"),t||(t=()=>Er(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Me("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield Sf(n)}))}),Pg.apply(this,arguments)}function i_(n,e){return e().catch(t=>Mf(n,t,e))}function yc(n){return Fg.apply(this,arguments)}function Fg(){return Fg=(0,me.Z)(function*(n){const e=Ge(n),t=$u(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;Vw(e);)try{const o=yield HI(e.localStore,r);if(null===o){0===e.hu.length&&t.Mo();break}r=o.batchId,Uw(e,o)}catch(o){yield Mf(e,o)}s_(e)&&o_(e)}),Fg.apply(this,arguments)}function Vw(n){return ju(n)&&n.hu.length<10}function Uw(n,e){n.hu.push(e);const t=$u(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function s_(n){return ju(n)&&!$u(n).Co()&&n.hu.length>0}function o_(n){$u(n).start()}function Bw(n){return ja.apply(this,arguments)}function ja(){return ja=(0,me.Z)(function*(n){$u(n).Zo()}),ja.apply(this,arguments)}function WI(n){return a_.apply(this,arguments)}function a_(){return a_=(0,me.Z)(function*(n){const e=$u(n);for(const t of n.hu)e.Jo(t.mutations)}),a_.apply(this,arguments)}function Wd(n,e,t){return jw.apply(this,arguments)}function jw(){return jw=(0,me.Z)(function*(n,e,t){const r=n.hu.shift(),o=hg.from(r,e,t);yield i_(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield yc(n)}),jw.apply(this,arguments)}function u_(n,e){return $w.apply(this,arguments)}function $w(){return $w=(0,me.Z)(function*(n,e){var t;e&&$u(n).Ho&&(yield(t=(0,me.Z)(function*(r,o){if(ra(u=o.code)&&u!==ae.ABORTED){const h=r.hu.shift();$u(r).ko(),yield i_(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield yc(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),s_(n)&&o_(n)}),$w.apply(this,arguments)}function l_(n,e){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,me.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Me("RemoteStore","RemoteStore received new credentials");const r=ju(t);t.fu.add(3),yield zd(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield Sf(t)}),Lg.apply(this,arguments)}function Hw(n,e){return pt.apply(this,arguments)}function pt(){return pt=(0,me.Z)(function*(n,e){const t=Ge(n);e?(t.fu.delete(2),yield Sf(t)):e||(t.fu.add(2),yield zd(t),t.wu.set("Unknown"))}),pt.apply(this,arguments)}function Kd(n){return n.gu||(n.gu=function(e,t,r){const o=Ge(e);return o.eu(),new Rw(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:qI.bind(null,n),Yr:ZI.bind(null,n),Qo:zI.bind(null,n)}),n.du.push(function(){var e=(0,me.Z)(function*(t){t?(n.gu.ko(),t_(n)?e_(n):n.wu.set("Unknown")):(yield n.gu.stop(),Lw(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function $u(n){return n.yu||(n.yu=function(e,t,r){const o=Ge(e);return o.eu(),new Nw(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:Bw.bind(null,n),Yr:u_.bind(null,n),Xo:WI.bind(null,n),Yo:Wd.bind(null,n)}),n.du.push(function(){var e=(0,me.Z)(function*(t){t?(n.yu.ko(),yield yc(n)):(yield n.yu.stop(),n.hu.length>0&&(Me("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class c_{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,o,u){const h=Date.now()+r,m=new c_(e,t,h,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Se(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $a(n,e){if(ar("AsyncQueue",`${e}: ${n}`),Fu(n))return new Se(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class Yd{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ue.comparator(t.key,r.key):(t,r)=>Ue.comparator(t.key,r.key),this.keyedMap=ug(),this.sortedSet=new cr(this.comparator)}static emptySet(e){return new Yd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Yd;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Rf{constructor(){this.pu=new cr(Ue.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):tt():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ha{constructor(e,t,r,o,u,h,m,E){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=E}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new Ha(e,t,Yd.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class Yn{constructor(){this.Tu=void 0,this.listeners=[]}}class yT{constructor(){this.queries=new Pu(e=>x0(e),Xp),this.onlineState="Unknown",this.Eu=new Set}}function Vg(n,e){return d_.apply(this,arguments)}function d_(){return d_=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new Yn),o)try{u.Tu=yield t.onListen(r)}catch(h){const m=$a(h,`Initialization of query '${of(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Au(t.onlineState),u.Tu&&e.Ru(u.Tu)&&Bg(t)}),d_.apply(this,arguments)}function h_(n,e){return Ug.apply(this,arguments)}function Ug(){return Ug=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const h=u.listeners.indexOf(e);h>=0&&(u.listeners.splice(h,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),Ug.apply(this,arguments)}function Gw(n,e){const t=Ge(n);let r=!1;for(const o of e){const h=t.queries.get(o.query);if(h){for(const m of h.listeners)m.Ru(o)&&(r=!0);h.Tu=o}}r&&Bg(t)}function qw(n,e,t){const r=Ge(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function Bg(n){n.Eu.forEach(e=>{e.next()})}class f_{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Ha(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=Ha.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class KI{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class Zw{constructor(e){this.M=e}fi(e){return Ao(this.M,e)}di(e){return e.metadata.exists?DI(this.M,e.document,!1):un.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return Ur(e)}}class Nf{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=zw(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Yt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new Zw(this.M);for(const o of e)if(o.metadata.queries){const u=r.fi(o.metadata.name);for(const h of o.metadata.queries){const m=(t.get(h)||dn()).add(u);t.set(h,m)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function Ew(n,e,t,r){return $y.apply(this,arguments)}(e.localStore,new Zw(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const o of e.queries)yield bw(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function zw(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Ww{constructor(e){this.key=e}}class Kw{constructor(e){this.key=e}}class Of{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=dn(),this.mutatedKeys=dn(),this.Uu=R0(e),this.qu=new Yd(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new Rf,o=t?t.qu:this.qu;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const E=Qp(this.query)&&o.size===this.query.limit?o.last():null,C=Jp(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((M,N)=>{const G=o.get(M),Q=eg(this.query,N)?N:null,ce=!!G&&this.mutatedKeys.has(G.key),Fe=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let it=!1;G&&Q?G.data.isEqual(Q.data)?ce!==Fe&&(r.track({type:3,doc:Q}),it=!0):this.ju(G,Q)||(r.track({type:2,doc:Q}),it=!0,(E&&this.Uu(Q,E)>0||C&&this.Uu(Q,C)<0)&&(m=!0)):!G&&Q?(r.track({type:0,doc:Q}),it=!0):G&&!Q&&(r.track({type:1,doc:G}),it=!0,(E||C)&&(m=!0)),it&&(Q?(h=h.add(Q),u=Fe?u.add(M):u.delete(M)):(h=h.delete(M),u=u.delete(M)))}),Qp(this.query)||Jp(this.query))for(;h.size>this.query.limit;){const M=Qp(this.query)?h.last():h.first();h=h.delete(M.key),u=u.delete(M.key),r.track({type:1,doc:M})}return{qu:h,Qu:r,ni:m,mutatedKeys:u}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const u=e.Qu.Iu();u.sort((C,M)=>function(N,G){const Q=ce=>{switch(ce){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return Q(N)-Q(G)}(C.type,M.type)||this.Uu(C.doc,M.doc)),this.Wu(r);const h=t?this.zu():[],m=0===this.Lu.size&&this.current?1:0,E=m!==this.Bu;return this.Bu=m,0!==u.length||E?{snapshot:new Ha(this.query,e.qu,o,u,e.mutatedKeys,0===m,E,!1),Hu:h}:{Hu:h}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new Rf,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=dn(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new Kw(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new Ww(r))}),t}Yu(e){this.$u=e.li,this.Lu=dn();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return Ha.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class Yw{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Qw{constructor(e){this.key=e,this.Zu=!1}}class Jw{constructor(e,t,r,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.ta={},this.ea=new Pu(m=>x0(m),Xp),this.na=new Map,this.sa=new Set,this.ia=new cr(Ue.comparator),this.ra=new Map,this.oa=new Xs,this.ua={},this.aa=new Map,this.ca=ca.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function YI(n,e){return _c.apply(this,arguments)}function _c(){return _c=(0,me.Z)(function*(n,e){const t=O_(n);let r,o;const u=t.ea.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Xu();else{const h=yield gc(t.localStore,To(e));t.isPrimaryClient&&Og(t.remoteStore,h);const m=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,o=yield vc(t,e,r,"current"===m)}return o}),_c.apply(this,arguments)}function vc(n,e,t,r){return p_.apply(this,arguments)}function p_(){return p_=(0,me.Z)(function*(n,e,t,r){n.la=(M,N,G)=>{return(Q=(0,me.Z)(function*(ce,Fe,it,Zt){let zt=Fe.view.Gu(it);zt.ni&&(zt=yield Cf(ce.localStore,Fe.query,!1).then(({documents:Wt})=>Fe.view.Gu(Wt,zt)));const Xt=Zt&&Zt.targetChanges.get(Fe.targetId),Ot=Fe.view.applyChanges(zt,ce.isPrimaryClient,Xt);return b_(ce,Fe.targetId,Ot.Hu),Ot.snapshot}),function(ce,Fe,it,Zt){return Q.apply(this,arguments)})(n,M,N,G);var Q};const o=yield Cf(n.localStore,e,!0),u=new Of(e,o.li),h=u.Gu(o.documents),m=xd.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),E=u.applyChanges(h,n.isPrimaryClient,m);b_(n,t,E.Hu);const C=new Yw(e,t,u);return n.ea.set(e,C),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),E.snapshot}),p_.apply(this,arguments)}function QI(n,e){return g_.apply(this,arguments)}function g_(){return g_=(0,me.Z)(function*(n,e){const t=Ge(n),r=t.ea.get(e),o=t.na.get(r.targetId);if(o.length>1)return t.na.set(r.targetId,o.filter(u=>!Xp(u,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Gd(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),xf(t.remoteStore,r.targetId),wc(t,r.targetId)}).catch(Ua))):(wc(t,r.targetId),yield Gd(t.localStore,r.targetId,!0))}),g_.apply(this,arguments)}function jg(){return jg=(0,me.Z)(function*(n,e,t){const r=Hg(n);try{const o=yield function(u,h){const m=Ge(u),E=Wn.now(),C=h.reduce((N,G)=>N.add(G.key),dn());let M;return m.persistence.runTransaction("Locally write mutations","readwrite",N=>m.ci.Ks(N,C).next(G=>{M=G;const Q=[];for(const ce of h){const Fe=ly(ce,M.get(ce.key));null!=Fe&&Q.push(new tc(ce.key,Fe,cI(Fe.value.mapValue),wr.exists(!0)))}return m.Bs.addMutationBatch(N,E,Q,h)})).then(N=>(N.applyToLocalDocumentSet(M),{batchId:N.batchId,changes:M}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,h,m){let E=u.ua[u.currentUser.toKey()];E||(E=new cr(Mt)),E=E.insert(h,m),u.ua[u.currentUser.toKey()]=E}(r,o.batchId,t),yield Ga(r,o.changes),yield yc(r.remoteStore)}catch(o){const u=$a(o,"Failed to persist write");t.reject(u)}}),jg.apply(this,arguments)}function m_(n,e){return y_.apply(this,arguments)}function y_(){return y_=(0,me.Z)(function*(n,e){const t=Ge(n);try{const r=yield yw(t.localStore,e);e.targetChanges.forEach((o,u)=>{const h=t.ra.get(u);h&&(_t(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Zu=!0:o.modifiedDocuments.size>0?_t(h.Zu):o.removedDocuments.size>0&&(_t(h.Zu),h.Zu=!1))}),yield Ga(t,r,e)}catch(r){yield Ua(r)}}),y_.apply(this,arguments)}function __(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ea.forEach((u,h)=>{const m=h.view.Au(e);m.snapshot&&o.push(m.snapshot)}),function(u,h){const m=Ge(u);m.onlineState=h;let E=!1;m.queries.forEach((C,M)=>{for(const N of M.listeners)N.Au(h)&&(E=!0)}),E&&Bg(m)}(r.eventManager,e),o.length&&r.ta.Qo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function JI(n,e,t){return v_.apply(this,arguments)}function v_(){return v_=(0,me.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ra.get(e),u=o&&o.key;if(u){let h=new cr(Ue.comparator);h=h.insert(u,un.newNoDocument(u,Et.min()));const m=dn().add(u),E=new sa(Et.min(),new Map,new Dn(Mt),h,m);yield m_(r,E),r.ia=r.ia.remove(u),r.ra.delete(e),I_(r)}else yield Gd(r.localStore,e,!1).then(()=>wc(r,e,t)).catch(Ua)}),v_.apply(this,arguments)}function _T(n,e){return eE.apply(this,arguments)}function eE(){return eE=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const o=yield $I(t.localStore,e);E_(t,r,null),w_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ga(t,o)}catch(o){yield Ua(o)}}),eE.apply(this,arguments)}function vT(n,e,t){return tE.apply(this,arguments)}function tE(){return tE=(0,me.Z)(function*(n,e,t){const r=Ge(n);try{const o=yield function(u,h){const m=Ge(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let C;return m.Bs.lookupMutationBatch(E,h).next(M=>(_t(null!==M),C=M.keys(),m.Bs.removeMutationBatch(E,M))).next(()=>m.Bs.performConsistencyCheck(E)).next(()=>m.ci.Ks(E,C))})}(r.localStore,e);E_(r,e,t),w_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ga(r,o)}catch(o){yield Ua(o)}}),tE.apply(this,arguments)}function Qd(){return Qd=(0,me.Z)(function*(n,e){const t=Ge(n);ju(t.remoteStore)||Me("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const h=Ge(u);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>h.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.aa.get(r)||[];o.push(e),t.aa.set(r,o)}catch(r){const o=$a(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),Qd.apply(this,arguments)}function w_(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function E_(n,e,t){const r=Ge(n);let o=r.ua[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ua[r.currentUser.toKey()]=o}}function wc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||Jd(n,r)})}function Jd(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(xf(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),I_(n))}function b_(n,e,t){for(const r of t)r instanceof Ww?(n.oa.addReference(r.key,e),XI(n,r)):r instanceof Kw?(Me("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||Jd(n,r.key)):tt()}function XI(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(Me("SyncEngine","New document in limbo: "+t),n.sa.add(r),I_(n))}function I_(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new Ue(Yt.fromString(e)),r=n.ca.next();n.ra.set(r,new Qw(t)),n.ia=n.ia.insert(t,r),Og(n.remoteStore,new Vu(To(Jl(t.path)),r,2,bs.A))}}function Ga(n,e,t){return D_.apply(this,arguments)}function D_(){return D_=(0,me.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[],h=[];var m;r.ea.isEmpty()||(r.ea.forEach((m,E)=>{h.push(r.la(E,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(E.targetId,C.fromCache?"not-current":"current"),o.push(C);const M=Cg.Ys(E.targetId,C);u.push(M)}}))}),yield Promise.all(h),r.ta.Qo(o),yield(m=(0,me.Z)(function*(E,C){const M=Ge(E);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>he.forEach(C,G=>he.forEach(G.Hs,Q=>M.persistence.referenceDelegate.addReference(N,G.targetId,Q)).next(()=>he.forEach(G.Js,Q=>M.persistence.referenceDelegate.removeReference(N,G.targetId,Q)))))}catch(N){if(!Fu(N))throw N;Me("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const G=N.targetId;if(!N.fromCache){const Q=M.ii.get(G),Fe=Q.withLastLimboFreeSnapshotVersion(Q.snapshotVersion);M.ii=M.ii.insert(G,Fe)}}}),function(E,C){return m.apply(this,arguments)})(r.localStore,u))}),D_.apply(this,arguments)}function rE(n,e){return C_.apply(this,arguments)}function C_(){return C_=(0,me.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Me("SyncEngine","User change. New user:",e.toKey());const r=yield mw(t.localStore,e);t.currentUser=e,(o=t).aa.forEach(h=>{h.forEach(m=>{m.reject(new Se(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ga(t,r.hi)}var o}),C_.apply(this,arguments)}function eD(n,e){const t=Ge(n),r=t.ra.get(e);if(r&&r.Zu)return dn().add(r.key);{let o=dn();const u=t.na.get(e);if(!u)return o;for(const h of u){const m=t.ea.get(h);o=o.unionWith(m.view.Ku)}return o}}function Xd(n,e){return T_.apply(this,arguments)}function T_(){return T_=(0,me.Z)(function*(n,e){const t=Ge(n),r=yield Cf(t.localStore,e.query,!0),o=e.view.Yu(r);return t.isPrimaryClient&&b_(t,e.targetId,o.Hu),o}),T_.apply(this,arguments)}function iE(n,e){return A_.apply(this,arguments)}function A_(){return A_=(0,me.Z)(function*(n,e){const t=Ge(n);return vw(t.localStore,e).then(r=>Ga(t,r))}),A_.apply(this,arguments)}function sE(n,e,t,r){return S_.apply(this,arguments)}function S_(){return S_=(0,me.Z)(function*(n,e,t,r){const o=Ge(n),u=yield function(h,m){const E=Ge(h),C=Ge(E.Bs);return E.persistence.runTransaction("Lookup mutation documents","readonly",M=>C.fn(M,m).next(N=>N?E.ci.Ks(M,N):he.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield yc(o.remoteStore):"acknowledged"===t||"rejected"===t?(E_(o,e,r||null),w_(o,e),m=e,Ge(Ge(o.localStore).Bs)._n(m)):tt(),yield Ga(o,u)):Me("SyncEngine","Cannot apply mutation batch with id: "+e)}),S_.apply(this,arguments)}function x_(){return x_=(0,me.Z)(function*(n,e){const t=Ge(n);if(O_(t),Hg(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield $g(t,r.toArray());t.ha=!0,yield Hw(t.remoteStore,!0);for(const u of o)Og(t.remoteStore,u)}else if(!1===e&&!1!==t.ha){const r=[];let o=Promise.resolve();t.na.forEach((u,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(wc(t,h),Gd(t.localStore,h,!0))),xf(t.remoteStore,h)}),yield o,yield $g(t,r),function(u){const h=Ge(u);h.ra.forEach((m,E)=>{xf(h.remoteStore,E)}),h.oa.bi(),h.ra=new Map,h.ia=new cr(Ue.comparator)}(t),t.ha=!1,yield Hw(t.remoteStore,!1)}}),x_.apply(this,arguments)}function $g(n,e,t){return M_.apply(this,arguments)}function M_(){return M_=(0,me.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[];for(const h of e){let m;const E=r.na.get(h);if(E&&0!==E.length){m=yield gc(r.localStore,To(E[0]));for(const C of E){const M=r.ea.get(C),N=yield Xd(r,M);N.snapshot&&u.push(N.snapshot)}}else{const C=yield mc(r.localStore,h);m=yield gc(r.localStore,C),yield vc(r,R_(C),h,!1)}o.push(m)}return r.ta.Qo(u),o}),M_.apply(this,arguments)}function R_(n){return S0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function aE(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).Fs()}function tD(n,e,t,r){return N_.apply(this,arguments)}function N_(){return N_=(0,me.Z)(function*(n,e,t,r){const o=Ge(n);if(o.ha)return void Me("SyncEngine","Ignoring unexpected query state notification.");const u=o.na.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const h=yield vw(o.localStore,M0(u[0])),m=sa.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Ga(o,h,m);break}case"rejected":yield Gd(o.localStore,e,!0),wc(o,e,r);break;default:tt()}}),N_.apply(this,arguments)}function nD(n,e,t){return kf.apply(this,arguments)}function kf(){return kf=(0,me.Z)(function*(n,e,t){const r=O_(n);if(r.ha){for(const o of e){if(r.na.has(o)){Me("SyncEngine","Adding an already active target "+o);continue}const u=yield mc(r.localStore,o),h=yield gc(r.localStore,u);yield vc(r,R_(u),h.targetId,!1),Og(r.remoteStore,h)}for(const o of t)r.na.has(o)&&(yield Gd(r.localStore,o,!1).then(()=>{xf(r.remoteStore,o),wc(r,o)}).catch(Ua))}}),kf.apply(this,arguments)}function O_(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=m_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JI.bind(null,e),e.ta.Qo=Gw.bind(null,e.eventManager),e.ta.fa=qw.bind(null,e.eventManager),e}function Hg(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_T.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vT.bind(null,e),e}class uE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.M=Zd(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return gw(this.persistence,new jy,e.initialUser,this.M)}wa(e){return new Dw(qy.zi,this.M)}_a(e){return new Wy}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class lE extends uE{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield Hg(r.ya.syncEngine),yield yc(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return gw(this.persistence,new jy,e.initialUser,this.M)}ma(e){return new aw(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=Dg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ts.withCacheSize(this.cacheSizeBytes):ts.DEFAULT;return new Ig(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Tf(),Af(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new Wy}}class iD extends lE{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const o=r.ya.syncEngine;r.sharedClientState instanceof Mg&&(r.sharedClientState.syncEngine={Mr:sE.bind(null,o),Or:tD.bind(null,o),Fr:nD.bind(null,o),Fs:aE.bind(null,o),kr:iE.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,me.Z)(function*(h){yield function oE(n,e){return x_.apply(this,arguments)}(r.ya.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return u.apply(this,arguments)}}())})()}_a(e){const t=Tf();if(!Mg.vt(t))throw new Se(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Dg(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Mg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class k_{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>__(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=rE.bind(null,r.syncEngine),yield Hw(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new yT}createDatastore(e){const t=Zd(e.databaseInfo.databaseId),r=new Ky(e.databaseInfo);return new Ow(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>__(this.syncEngine,m,0),h=Sw.vt()?new Sw:new Rg,new Pw(t,r,o,u,h);var t,r,o,u,h}createSyncEngine(e,t){return function(r,o,u,h,m,E,C){const M=new Jw(r,o,u,h,m,E);return C&&(M.ha=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=Ge(t);Me("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield zd(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function cE(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Gg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class sD{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new xr,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,me.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),o=Number(r);isNaN(o)&&e.Pa(`length string (${r}) is not valid number`);const u=yield e.ba(o);return new KI(JSON.parse(u),t.length+o)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,me.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,me.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class dE{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Se(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,me.Z)(function*(u,h){const m=Ge(u),E=ff(m.M)+"/documents",C={documents:h.map(Q=>hf(m.M,Q))},M=yield m.ho("BatchGetDocuments",E,C),N=new Map;M.forEach(Q=>{const ce=function yy(n,e){return"found"in e?function(t,r){_t(!!r.found);const o=Ao(t,r.found.name),u=Ur(r.found.updateTime),h=new Si({mapValue:{fields:r.found.fields}});return un.newFoundDocument(o,u,h)}(n,e):"missing"in e?function(t,r){_t(!!r.missing),_t(!!r.readTime);const o=Ao(t,r.missing),u=Ur(r.readTime);return un.newNoDocument(o,u)}(n,e):tt()}(m.M,Q);N.set(ce.key.toString(),ce)});const G=[];return h.forEach(Q=>{const ce=N.get(Q.toString());_t(!!ce),G.push(ce)}),G}),function(u,h){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ad(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ue.fromPath(o);e.mutations.push(new og(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(o,u){const h=Ge(o),m=ff(h.M)+"/documents",E={writes:u.map(C=>Rd(h.M,C))};yield h.oo("Commit",m,E)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=Et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Se(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?wr.updateTime(t):wr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new Se(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return wr.updateTime(t)}return wr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class hE{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.Sa=5,this.Do=new Ng(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,me.Z)(function*(){const t=new dE(e.datastore),r=e.Ca(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.xa(u)}))}).catch(o=>{e.xa(o)})}))}Ca(e){try{const t=this.updateFunction(e);return!ea(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!ra(t)}return!1}}class oD{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Vr.UNAUTHENTICATED,this.clientId=m0.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var h=(0,me.Z)(function*(m){Me("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return h.apply(this,arguments)}}()),this.appCheckCredentials.start(r,h=>(Me("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Se(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=$a(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function fE(n,e){return qg.apply(this,arguments)}function qg(){return qg=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Me("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,me.Z)(function*(u){r.isEqual(u)||(yield mw(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),qg.apply(this,arguments)}function pE(n,e){return P_.apply(this,arguments)}function P_(){return P_=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield F_(n);Me("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>l_(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>l_(e.remoteStore,u)),n.onlineComponents=e}),P_.apply(this,arguments)}function F_(n){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,me.Z)(function*(n){return n.offlineComponents||(Me("FirestoreClient","Using default OfflineComponentProvider"),yield fE(n,new uE)),n.offlineComponents}),Pf.apply(this,arguments)}function eh(n){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,me.Z)(function*(n){return n.onlineComponents||(Me("FirestoreClient","Using default OnlineComponentProvider"),yield pE(n,new k_)),n.onlineComponents}),Zg.apply(this,arguments)}function zg(n){return F_(n).then(e=>e.persistence)}function L_(n){return F_(n).then(e=>e.localStore)}function gE(n){return eh(n).then(e=>e.remoteStore)}function Ff(n){return eh(n).then(e=>e.syncEngine)}function th(n){return Wg.apply(this,arguments)}function Wg(){return Wg=(0,me.Z)(function*(n){const e=yield eh(n),t=e.eventManager;return t.onListen=YI.bind(null,e.syncEngine),t.onUnlisten=QI.bind(null,e.syncEngine),t}),Wg.apply(this,arguments)}function V_(n,e,t={}){const r=new xr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,h,m,E){const C=new Gg({next:N=>{u.enqueueAndForget(()=>h_(o,M));const G=N.docs.has(h);!G&&N.fromCache?E.reject(new Se(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):G&&N.fromCache&&m&&"server"===m.source?E.reject(new Se(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(N)},error:N=>E.reject(N)}),M=new f_(Jl(h.path),C,{includeMetadataChanges:!0,Cu:!0});return Vg(o,M)}(yield th(n),n.asyncQueue,e,t,r)})),r.promise}function yE(n,e,t={}){const r=new xr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,h,m,E){const C=new Gg({next:N=>{u.enqueueAndForget(()=>h_(o,M)),N.fromCache&&"server"===m.source?E.reject(new Se(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):E.resolve(N)},error:N=>E.reject(N)}),M=new f_(h,C,{includeMetadataChanges:!0,Cu:!0});return Vg(o,M)}(yield th(n),n.asyncQueue,e,t,r)})),r.promise}const _E=new Map;function vE(n,e,t){if(!t)throw new Se(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function U_(n,e,t,r){if(!0===e&&!0===r)throw new Se(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function wE(n){if(!Ue.isDocumentKey(n))throw new Se(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function EE(n){if(Ue.isDocumentKey(n))throw new Se(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Yg(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Se(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Yg(n);throw new Se(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function B_(n,e){if(e<=0)throw new Se(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class j_{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Se(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Se(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,U_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ec{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new j_({}),this._settingsFrozen=!1,e instanceof Ws?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Se(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ws(o.options.projectId)}(e))}get app(){if(!this._app)throw new Se(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Se(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new j_(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new d0;switch(t.type){case"gapi":const r=t.client;return _t(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new f0(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Se(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_E.get(e);t&&(Me("ComponentProvider","Removing Datastore"),_E.delete(e),t.terminate())}(this),Promise.resolve()}}class pn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}}class fi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fi(this.firestore,e,this._query)}}class Mo extends fi{constructor(e,t,r){super(e,t,Jl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new Ue(e))}withConverter(e){return new Mo(this.firestore,e,this._path)}}function $_(n,e,...t){if(n=(0,Nt.m9)(n),vE("collection","path",e),n instanceof Ec){const r=Yt.fromString(e,...t);return EE(r),new Mo(n,null,r)}{if(!(n instanceof pn||n instanceof Mo))throw new Se(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return EE(r),new Mo(n.firestore,null,r)}}function Jg(n,e,...t){if(n=(0,Nt.m9)(n),1===arguments.length&&(e=m0.R()),vE("doc","path",e),n instanceof Ec){const r=Yt.fromString(e,...t);return wE(r),new pn(n,null,new Ue(r))}{if(!(n instanceof pn||n instanceof Mo))throw new Se(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Yt.fromString(e,...t));return wE(r),new pn(n.firestore,n instanceof Mo?n.converter:null,new Ue(r))}}function Xg(n,e){return n=(0,Nt.m9)(n),e=(0,Nt.m9)(e),(n instanceof pn||n instanceof Mo)&&(e instanceof pn||e instanceof Mo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function bE(n,e){return n=(0,Nt.m9)(n),e=(0,Nt.m9)(e),n instanceof fi&&e instanceof fi&&n.firestore===e.firestore&&Xp(n._query,e._query)&&n.converter===e.converter}class ET{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Ng(this,"async_queue_retry"),this.qa=()=>{const t=Af();t&&Me("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=Af();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=Af();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new xr;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,me.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!Fu(t))throw t;Me("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,ar("INTERNAL UNHANDLED ERROR: ",function(u){let h=u.message||"";return u.stack&&(h=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),h}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const o=c_.createAndSchedule(this,e,t,r,u=>this.ja(u));return this.Fa.push(o),o}Ka(){this.$a&&tt()}verifyOperationInProgress(){}Wa(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function H_(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class dD{constructor(){this._progressObserver={},this._taskCompletionResolver=new xr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class xn extends Ec{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new ET,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||IE(this),this._firestoreClient.terminate()}}function dr(n){return n._firestoreClient||IE(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function IE(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new dT(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new oD(n._authCredentials,n._appCheckCredentials,n._queue,r)}function hD(n,e,t){const r=new xr;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield fE(n,t),yield pE(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ae.FAILED_PRECONDITION||u.code===ae.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function TE(n){if(n._initialized||n._terminated)throw new Se(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class qa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Se(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ur(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fa(Mr.fromBase64String(e))}catch(t){throw new Se(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new fa(Mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class bc{constructor(e){this._methodName=e}}class Hu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Se(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Se(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}const AE=/^__.*__$/;class SE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new tc(e,this.data,this.fieldMask,t,this.fieldTransforms):new lf(e,this.data,t,this.fieldTransforms)}}class q_{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new tc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Z_(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class Uf{constructor(e,t,r,o,u,h){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Ya(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new Uf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.nc(e),o}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.Ya(),o}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return nm(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(Z_(this.Xa)&&AE.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class yD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Zd(e)}ac(e,t,r,o=!1){return new Uf({Xa:e,methodName:t,uc:r,path:ur.emptyPath(),ec:!1,oc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Ic(n){const e=n._freezeSettings(),t=Zd(n._databaseId);return new yD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function em(n,e,t,r,o,u={}){const h=n.ac(u.merge||u.mergeFields?2:0,e,t,o);W_("Data must be an object, but it was:",h,r);const m=ih(r,h);let E,C;if(u.merge)E=new ui(h.fieldMask),C=h.fieldTransforms;else if(u.mergeFields){const M=[];for(const N of u.mergeFields){const G=K_(e,N,t);if(!h.contains(G))throw new Se(ae.INVALID_ARGUMENT,`Field '${G}' is specified in your field mask but missing from your input data.`);NE(M,G)||M.push(G)}E=new ui(M),C=h.fieldTransforms.filter(N=>E.covers(N.field))}else E=null,C=h.fieldTransforms;return new SE(new Si(m),E,C)}class Bf extends bc{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bf}}function xE(n,e,t){return new Uf({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class z_ extends bc{_toFieldTransform(e){return new uf(e.path,new Td)}isEqual(e){return e instanceof z_}}class _D extends bc{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=xE(this,e,!0),r=this.cc.map(u=>Za(u,t)),o=new di(r);return new uf(e.path,o)}isEqual(e){return this===e}}class jf extends bc{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=xE(this,e,!0),r=this.cc.map(u=>Za(u,t)),o=new Xl(r);return new uf(e.path,o)}isEqual(e){return this===e}}class vD extends bc{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new af(e.M,ry(e.M,this.hc));return new uf(e.path,t)}isEqual(e){return this===e}}function $f(n,e,t,r){const o=n.ac(1,e,t);W_("Data must be an object, but it was:",o,r);const u=[],h=Si.empty();zl(r,(E,C)=>{const M=Dc(e,E,t);C=(0,Nt.m9)(C);const N=o.sc(M);if(C instanceof Bf)u.push(M);else{const G=Za(C,N);null!=G&&(u.push(M),h.set(M,G))}});const m=new ui(u);return new q_(h,m,o.fieldTransforms)}function eo(n,e,t,r,o,u){const h=n.ac(1,e,t),m=[K_(e,r,t)],E=[o];if(u.length%2!=0)throw new Se(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let G=0;G<u.length;G+=2)m.push(K_(e,u[G])),E.push(u[G+1]);const C=[],M=Si.empty();for(let G=m.length-1;G>=0;--G)if(!NE(C,m[G])){const Q=m[G];let ce=E[G];ce=(0,Nt.m9)(ce);const Fe=h.sc(Q);if(ce instanceof Bf)C.push(Q);else{const it=Za(ce,Fe);null!=it&&(C.push(Q),M.set(Q,it))}}const N=new ui(C);return new q_(M,N,h.fieldTransforms)}function ME(n,e,t,r=!1){return Za(t,n.ac(r?4:3,e))}function Za(n,e){if(RE(n=(0,Nt.m9)(n)))return W_("Unsupported field value:",e,n),ih(n,e);if(n instanceof bc)return function(t,r){if(!Z_(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const h of t){let m=Za(h,r.ic(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Nt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ry(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Wn.fromDate(t);return{timestampValue:Md(r.M,o)}}if(t instanceof Wn){const o=new Wn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Md(r.M,o)}}if(t instanceof Hu)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fa)return{bytesValue:py(r.M,t._byteString)};if(t instanceof pn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.rc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:gy(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${Yg(t)}`)}(n,e)}function ih(n,e){const t={};return Dt(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zl(n,(r,o)=>{const u=Za(o,e.tc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function RE(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Wn||n instanceof Hu||n instanceof fa||n instanceof pn||n instanceof bc)}function W_(n,e,t){if(!RE(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Yg(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function K_(n,e,t){if((e=(0,Nt.m9)(e))instanceof qa)return e._internalPath;if("string"==typeof e)return Dc(n,e);throw nm("Field path arguments must be of type string or ",n,!1,void 0,t)}const tm=new RegExp("[~\\*/\\[\\]]");function Dc(n,e,t){if(e.search(tm)>=0)throw nm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qa(...e.split("."))._internalPath}catch(r){throw nm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function nm(n,e,t,r,o){const u=r&&!r.isEmpty(),h=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let E="";return(u||h)&&(E+=" (found",u&&(E+=` in field ${r}`),h&&(E+=` in document ${o}`),E+=")"),new Se(ae.INVALID_ARGUMENT,m+n+E)}function NE(n,e){return n.some(t=>t.isEqual(e))}class sh{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new OE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(oh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class OE extends sh{data(){return super.data()}}function oh(n,e){return"string"==typeof e?Dc(n,e):e instanceof qa?e._internalPath:e._delegate._internalPath}class Gu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class za extends sh{constructor(e,t,r,o,u,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(oh("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Hf extends za{data(e={}){return super.data(e)}}class Cc{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Gu(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Hf(this._firestore,this._userDataWriter,r.key,r,new Gu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Se(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new Hf(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Gu(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const m=new Hf(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Gu(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let E=-1,C=-1;return 0!==h.type&&(E=u.indexOf(h.doc.key),u=u.delete(h.doc.key)),1!==h.type&&(u=u.add(h.doc),C=u.indexOf(h.doc.key)),{type:Y_(h.type),doc:m,oldIndex:E,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Y_(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function rm(n,e){return n instanceof za&&e instanceof za?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Cc&&e instanceof Cc&&n._firestore===e._firestore&&bE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function Q_(n){if(Jp(n)&&0===n.explicitOrderBy.length)throw new Se(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tc{}function pa(n,...e){for(const t of e)n=t._apply(n);return n}class wD extends Tc{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=Ic(e.firestore),r=function(o,u,h,m,E,C,M){let N;if(E.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Se(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){$E(M,C);const Q=[];for(const ce of M)Q.push(ev(m,o,ce));N={arrayValue:{values:Q}}}else N=ev(m,o,M)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||$E(M,C),N=ME(h,"where",M,"in"===C||"not-in"===C);const G=Kn.create(E,C,N);return function(Q,ce){if(ce.S()){const it=Xm(Q);if(null!==it&&!it.isEqual(ce.field))throw new Se(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${it.toString()}' and '${ce.field.toString()}'`);const Zt=xi(Q);null!==Zt&&pi(0,ce.field,Zt)}const Fe=function(it,Zt){for(const zt of it.filters)if(Zt.indexOf(zt.op)>=0)return zt.op;return null}(Q,function(it){switch(it){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ce.op));if(null!==Fe)throw new Se(ae.INVALID_ARGUMENT,Fe===ce.op?`Invalid query. You cannot use more than one '${ce.op.toString()}' filter.`:`Invalid query. You cannot use '${ce.op.toString()}' filters with '${Fe.toString()}' filters.`)}(o,G),G}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new fi(e.firestore,e.converter,function(o,u){const h=o.filters.concat([u]);return new na(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class bD extends Tc{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Se(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Se(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new Cd(o,u);return function(m,E){if(null===xi(m)){const C=Xm(m);null!==C&&pi(0,C,E.field)}}(r,h),h}(e._query,this.lc,this._c);return new fi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new na(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class J_ extends Tc{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new fi(e.firestore,e.converter,ty(e._query,this.wc,this.mc))}}class PE extends Tc{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=jE(e,this.type,this.gc,this.yc);return new fi(e.firestore,e.converter,(o=t,new na((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class VE extends Tc{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=jE(e,this.type,this.gc,this.yc);return new fi(e.firestore,e.converter,(o=t,new na((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function jE(n,e,t,r){if(t[0]=(0,Nt.m9)(t[0]),t[0]instanceof sh)return function(o,u,h,m,E){if(!m)throw new Se(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const C=[];for(const M of sf(o))if(M.field.isKeyField())C.push(Nu(u,m.key));else{const N=m.data.field(M.field);if(Xh(N))throw new Se(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const G=M.field.canonicalString();throw new Se(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${G}' (used as the orderBy) does not exist.`)}C.push(N)}return new Co(C,E)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Ic(n.firestore);return function(u,h,m,E,C,M){const N=u.explicitOrderBy;if(C.length>N.length)throw new Se(ae.INVALID_ARGUMENT,`Too many arguments provided to ${E}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const G=[];for(let Q=0;Q<C.length;Q++){const ce=C[Q];if(N[Q].field.isKeyField()){if("string"!=typeof ce)throw new Se(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${E}(), but got a ${typeof ce}`);if(!ey(u)&&-1!==ce.indexOf("/"))throw new Se(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${E}() must be a plain document ID, but '${ce}' contains a slash.`);const Fe=u.path.child(Yt.fromString(ce));if(!Ue.isDocumentKey(Fe))throw new Se(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${E}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const it=new Ue(Fe);G.push(Nu(h,it))}else{const Fe=ME(m,E,ce);G.push(Fe)}}return new Co(G,M)}(n._query,n.firestore._databaseId,o,e,t,r)}}function ev(n,e,t){if("string"==typeof(t=(0,Nt.m9)(t))){if(""===t)throw new Se(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ey(e)&&-1!==t.indexOf("/"))throw new Se(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Yt.fromString(t));if(!Ue.isDocumentKey(r))throw new Se(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nu(n,new Ue(r))}if(t instanceof pn)return Nu(n,t._key);throw new Se(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yg(t)}.`)}function $E(n,e){if(!Array.isArray(n)||0===n.length)throw new Se(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Se(ae.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function pi(n,e,t){if(!t.isEqual(e))throw new Se(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class qu{convertValue(e,t="none"){switch(Kl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ru(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return zl(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Hu(Fn(e.latitude),Fn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=rI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vd(e));default:return null}}convertTimestamp(e){const t=li(e);return new Wn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Yt.fromString(e);_t(Y0(r));const o=new Ws(r.get(1),r.get(3)),u=new Ue(r.popFirst(5));return o.isEqual(t)||ar(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function im(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class DD extends qu{constructor(e){super(),this.firestore=e}convertBytes(e){return new fa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,t)}}class CD{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ic(e)}set(e,t,r){this._verifyNotCommitted();const o=to(e,this._firestore),u=im(o.converter,t,r),h=em(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(h.toMutation(o._key,wr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=to(e,this._firestore);let h;return h="string"==typeof(t=(0,Nt.m9)(t))||t instanceof qa?eo(this._dataReader,"WriteBatch.update",u._key,t,r,o):$f(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(h.toMutation(u._key,wr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=to(e,this._firestore);return this._mutations=this._mutations.concat(new Ad(t._key,wr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Se(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function to(n,e){if((n=(0,Nt.m9)(n)).firestore!==e)throw new Se(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Wa extends qu{constructor(e){super(),this.firestore=e}convertBytes(e){return new fa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,t)}}function nv(n,e,t){n=Jt(n,pn);const r=Jt(n.firestore,xn),o=im(n.converter,e,t);return ah(r,[em(Ic(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,wr.none())])}function rv(n,e,t,...r){n=Jt(n,pn);const o=Jt(n.firestore,xn),u=Ic(o);let h;return h="string"==typeof(e=(0,Nt.m9)(e))||e instanceof qa?eo(u,"updateDoc",n._key,e,t,r):$f(u,"updateDoc",n._key,e),ah(o,[h.toMutation(n._key,wr.exists(!0))])}function MD(n,...e){var t,r,o;n=(0,Nt.m9)(n);let u={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||H_(e[h])||(u=e[h],h++);const m={includeMetadataChanges:u.includeMetadataChanges};if(H_(e[h])){const N=e[h];e[h]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[h+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[h+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let E,C,M;if(n instanceof pn)C=Jt(n.firestore,xn),M=Jl(n._key.path),E={next:N=>{e[h]&&e[h](om(C,n,N))},error:e[h+1],complete:e[h+2]};else{const N=Jt(n,fi);C=Jt(N.firestore,xn),M=N._query;const G=new Wa(C);E={next:Q=>{e[h]&&e[h](new Cc(C,G,N,Q))},error:e[h+1],complete:e[h+2]},Q_(n._query)}return function(N,G,Q,ce){const Fe=new Gg(ce),it=new f_(G,Fe,Q);return N.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return Vg(yield th(N),it)})),()=>{Fe.Ia(),N.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return h_(yield th(N),it)}))}}(dr(C),M,m,E)}function ah(n,e){return function(t,r){const o=new xr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function Xw(n,e,t){return jg.apply(this,arguments)}(yield Ff(t),r,o)})),o.promise}(dr(n),e)}function om(n,e,t){const r=t.docs.get(e._key),o=new Wa(n);return new za(n,o,e._key,r,new Gu(t.hasPendingWrites,t.fromCache),e.converter)}class am extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ic(e)}get(e){const t=to(e,this._firestore),r=new DD(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return tt();const u=o[0];if(u.isFoundDocument())return new sh(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new sh(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const o=to(e,this._firestore),u=im(o.converter,t,r),h=em(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const u=to(e,this._firestore);let h;return h="string"==typeof(t=(0,Nt.m9)(t))||t instanceof qa?eo(this._dataReader,"Transaction.update",u._key,t,r,o):$f(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,h),this}delete(e){const t=to(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=to(e,this._firestore),r=new Wa(this._firestore);return super.get(e).then(o=>new za(this._firestore,r,t._key,o._document,new Gu(!1,!1),t.converter))}}function um(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Se("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function zE(){if("undefined"==typeof Uint8Array)throw new Se("unimplemented","Uint8Arrays are not available in this environment.")}function WE(){if(!function w0(){return"undefined"!=typeof atob}())throw new Se("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ql=wi.SDK_VERSION,(0,wi._registerComponent)(new ji.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new xn(o,new h0(t.getProvider("auth-internal")),new nI(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,wi.registerVersion)(qm,"3.4.8",n),(0,wi.registerVersion)(qm,"3.4.8","esm2017")}();class uh{constructor(e){this._delegate=e}static fromBase64String(e){return WE(),new uh(fa.fromBase64String(e))}static fromUint8Array(e){return zE(),new uh(fa.fromUint8Array(e))}toBase64(){return WE(),this._delegate.toBase64()}toUint8Array(){return zE(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function uv(n){return function KE(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class YE{enableIndexedDbPersistence(e,t){return function bT(n,e){TE(n=Jt(n,xn));const t=dr(n),r=n._freezeSettings(),o=new k_;return hD(t,o,new lE(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function DE(n){TE(n=Jt(n,xn));const e=dr(n),t=n._freezeSettings(),r=new k_;return hD(e,r,new iD(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function CE(n){if(n._initialized&&!n._terminated)throw new Se(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new xr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!Qs.vt())return Promise.resolve();const o=r+"main";yield Qs.delete(o)}),function(r){return t.apply(this,arguments)})(Dg(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class lv{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ws||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Zl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Qg(n,e,t,r={}){var o;const u=(n=Jt(n,Ec))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Zl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,m;if("string"==typeof r.mockUserToken)h=r.mockUserToken,m=Vr.MOCK_USER;else{h=(0,Nt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new Se(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Vr(E)}n._authCredentials=new cT(new $p(h,m))}}(this._delegate,e,t,r)}enableNetwork(){return function fD(n){return function aD(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield zg(n),t=yield gE(n);return e.setNetworkEnabled(!0),function(r){const o=Ge(r);return o.fu.delete(0),Sf(o)}(t)}))}(dr(n=Jt(n,xn)))}(this._delegate)}disableNetwork(){return function pD(n){return function mE(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield zg(n),t=yield gE(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(o){const u=Ge(o);u.fu.add(0),yield zd(u),u.wu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(dr(n=Jt(n,xn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,U_("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function G_(n){return function(e){const t=new xr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function nE(n,e){return Qd.apply(this,arguments)}(yield Ff(e),t)})),t.promise}(dr(n=Jt(n,xn)))}(this._delegate)}onSnapshotsInSync(e){return function GE(n,e){return function Kg(n,e){const t=new Gg(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield th(n),o=t,Ge(r).Eu.add(o),void o.next();var r,o})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield th(n),o=t,void Ge(r).Eu.delete(o);var r,o}))}}(dr(n=Jt(n,xn)),H_(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Se("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new qf(this,$_(this._delegate,e))}catch(t){throw ns(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ro(this,Jg(this._delegate,e))}catch(t){throw ns(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new rs(this,function cD(n,e){if(n=Jt(n,Ec),vE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Se(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new fi(n,null,(t=e,new na(Yt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ns(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function qE(n,e){return function lD(n,e){const t=new xr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const r=yield(o=n,eh(o).then(u=>u.datastore));var o;new hE(n.asyncQueue,r,e,t).run()})),t.promise}(dr(n=Jt(n,xn)),t=>e(new am(n,t)))}(this._delegate,t=>e(new QE(this,t)))}batch(){return dr(this._delegate),new FD(new CD(this._delegate,e=>ah(this._delegate,e)))}loadBundle(e){return function gD(n,e){const t=dr(n=Jt(n,xn)),r=new dD;return function nh(n,e,t,r){const o=function(u,h){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,E=function(E,C){if(E instanceof Uint8Array)return cE(E,C);if(E instanceof ArrayBuffer)return cE(new Uint8Array(E),C);if(E instanceof ReadableStream)return E.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new sD(E,h);var E}(t,Zd(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function rD(n,e,t){const r=Ge(n);var o;(o=(0,me.Z)(function*(u,h,m){try{const E=yield h.getMetadata();if(yield function(G,Q){const ce=Ge(G),Fe=Ur(Q.createTime);return ce.persistence.runTransaction("hasNewerBundle","readonly",it=>ce._s.getBundleMetadata(it,Q.id)).then(it=>!!it&&it.createTime.compareTo(Fe)>=0)}(u.localStore,E))return yield h.close(),m._completeWith({taskState:"Success",documentsLoaded:(G=E).totalDocuments,bytesLoaded:G.totalBytes,totalDocuments:G.totalDocuments,totalBytes:G.totalBytes}),Promise.resolve(new Set);m._updateProgress(zw(E));const C=new Nf(E,u.localStore,h.M);let M=yield h.da();for(;M;){const G=yield C.ku(M);G&&m._updateProgress(G),M=yield h.da()}const N=yield C.complete();return yield Ga(u,N.Fu,void 0),yield function(G,Q){const ce=Ge(G);return ce.persistence.runTransaction("Save bundle","readwrite",Fe=>ce._s.saveBundleMetadata(Fe,Q))}(u.localStore,E),m._completeWith(N.progress),Promise.resolve(N.Ou)}catch(E){return Zl("SyncEngine",`Loading bundle failed with ${E}`),m._failWith(E),Promise.resolve(new Set)}var G}),function(u,h,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield Ff(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function mD(n,e){return function Lf(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const o=Ge(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield L_(n),e)}))}(dr(n=Jt(n,xn)),e).then(t=>t?new fi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new rs(this,t):null)}}class Gf extends qu{constructor(e){super(),this.firestore=e}convertBytes(e){return new uh(new fa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ro.forKey(t,this.firestore,null)}}class QE{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Gf(e)}get(e){const t=zu(e);return this._delegate.get(t).then(r=>new lm(this._firestore,new za(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=zu(e);return r?(um("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=zu(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=zu(e);return this._delegate.delete(t),this}}class FD{constructor(e){this._delegate=e}set(e,t,r){const o=zu(e);return r?(um("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=zu(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=zu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Zu{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Hf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new cm(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Zu.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Zu(e,new Gf(e),t),o.set(t,u)),u}}Zu.INSTANCES=new WeakMap;class Ro{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Gf(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Se("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ro(t,new pn(t._delegate,r,new Ue(e)))}static forKey(e,t,r){return new Ro(t,new pn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new qf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new qf(this.firestore,$_(this._delegate,e))}catch(t){throw ns(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Nt.m9)(e))instanceof pn&&Xg(this._delegate,e)}set(e,t){t=um("DocumentReference.set",t);try{return t?nv(this._delegate,e,t):nv(this._delegate,e)}catch(r){throw ns(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?rv(this._delegate,e):rv(this._delegate,e,t,...r)}catch(o){throw ns(o,"updateDoc()","DocumentReference.update()")}}delete(){return function sm(n){return ah(Jt(n.firestore,xn),[new Ad(n._key,wr.none())])}(this._delegate)}onSnapshot(...e){const t=LD(e),r=VD(e,o=>new lm(this.firestore,new za(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return MD(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function AD(n){n=Jt(n,pn);const e=Jt(n.firestore,xn),t=dr(e),r=new Wa(e);return function uD(n,e){const t=new xr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,h){try{const m=yield function(E,C){const M=Ge(E);return M.persistence.runTransaction("read document","readonly",N=>M.ci.Ls(N,C))}(o,u);m.isFoundDocument()?h.resolve(m):m.isNoDocument()?h.resolve(null):h.reject(new Se(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const E=$a(m,`Failed to get document '${u} from cache`);h.reject(E)}}),function(o,u,h){return r.apply(this,arguments)})(yield L_(n),e,t);var r})),t.promise}(t,n._key).then(o=>new za(e,r,n._key,o,new Gu(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function HE(n){n=Jt(n,pn);const e=Jt(n.firestore,xn);return V_(dr(e),n._key,{source:"server"}).then(t=>om(e,n,t))}(this._delegate):function TD(n){n=Jt(n,pn);const e=Jt(n.firestore,xn);return V_(dr(e),n._key).then(t=>om(e,n,t))}(this._delegate),t.then(r=>new lm(this.firestore,new za(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ro(this.firestore,this._delegate.withConverter(e?Zu.getInstance(this.firestore,e):null))}}function ns(n,e,t){return n.message=n.message.replace(e,t),n}function LD(n){for(const e of n)if("object"==typeof e&&!uv(e))return e;return{}}function VD(n,e){var t,r;let o;return o=uv(n[0])?n[0]:uv(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class lm{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ro(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return rm(this._delegate,e._delegate)}}class cm extends lm{data(e){const t=this._delegate.data(e);return function eI(n,e){n||tt()}(void 0!==t),t}}class rs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Gf(e)}where(e,t,r){try{return new rs(this.firestore,pa(this._delegate,function ED(n,e,t){const r=e,o=oh("where",n);return new wD(o,r,t)}(e,t,r)))}catch(o){throw ns(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new rs(this.firestore,pa(this._delegate,function ID(n,e="asc"){const t=e,r=oh("orderBy",n);return new bD(r,t)}(e,t)))}catch(r){throw ns(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new rs(this.firestore,pa(this._delegate,function X_(n){return B_("limit",n),new J_("limit",n,"F")}(e)))}catch(t){throw ns(t,"limit()","Query.limit()")}}limitToLast(e){try{return new rs(this.firestore,pa(this._delegate,function kE(n){return B_("limitToLast",n),new J_("limitToLast",n,"L")}(e)))}catch(t){throw ns(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new rs(this.firestore,pa(this._delegate,function FE(...n){return new PE("startAt",n,!0)}(...e)))}catch(t){throw ns(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new rs(this.firestore,pa(this._delegate,function LE(...n){return new PE("startAfter",n,!1)}(...e)))}catch(t){throw ns(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new rs(this.firestore,pa(this._delegate,function UE(...n){return new VE("endBefore",n,!1)}(...e)))}catch(t){throw ns(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new rs(this.firestore,pa(this._delegate,function BE(...n){return new VE("endAt",n,!0)}(...e)))}catch(t){throw ns(t,"endAt()","Query.endAt()")}}isEqual(e){return bE(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function xD(n){n=Jt(n,fi);const e=Jt(n.firestore,xn),t=dr(e),r=new Wa(e);return function wT(n,e){const t=new xr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,h){try{const m=yield Cf(o,u,!0),E=new Of(u,m.li),C=E.Gu(m.documents),M=E.applyChanges(C,!1);h.resolve(M.snapshot)}catch(m){const E=$a(m,`Failed to execute query '${u} against cache`);h.reject(E)}}),function(o,u,h){return r.apply(this,arguments)})(yield L_(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Cc(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function tv(n){n=Jt(n,fi);const e=Jt(n.firestore,xn),t=dr(e),r=new Wa(e);return yE(t,n._query,{source:"server"}).then(o=>new Cc(e,r,n,o))}(this._delegate):function SD(n){n=Jt(n,fi);const e=Jt(n.firestore,xn),t=dr(e),r=new Wa(e);return Q_(n._query),yE(t,n._query).then(o=>new Cc(e,r,n,o))}(this._delegate),t.then(r=>new lh(this.firestore,new Cc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=LD(e),r=VD(e,o=>new lh(this.firestore,new Cc(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return MD(this._delegate,t,r)}withConverter(e){return new rs(this.firestore,this._delegate.withConverter(e?Zu.getInstance(this.firestore,e):null))}}class AT{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new cm(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class lh{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new rs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new cm(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new AT(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new cm(this._firestore,r))})}isEqual(e){return rm(this._delegate,e._delegate)}}class qf extends rs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ro(this.firestore,e):null}doc(e){try{return new Ro(this.firestore,void 0===e?Jg(this._delegate):Jg(this._delegate,e))}catch(t){throw ns(t,"doc()","CollectionReference.doc()")}}add(e){return function iv(n,e){const t=Jt(n.firestore,xn),r=Jg(n),o=im(n.converter,e);return ah(t,[em(Ic(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,wr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ro(this.firestore,t))}isEqual(e){return Xg(this._delegate,e._delegate)}withConverter(e){return new qf(this.firestore,this._delegate.withConverter(e?Zu.getInstance(this.firestore,e):null))}}function zu(n){return Jt(n,pn)}class Zf{constructor(...e){this._delegate=new qa(...e)}static documentId(){return new Zf(ur.keyField().canonicalString())}isEqual(e){return(e=(0,Nt.m9)(e))instanceof qa&&this._delegate._internalPath.isEqual(e._internalPath)}}class Wu{constructor(e){this._delegate=e}static serverTimestamp(){const e=function sv(){return new z_("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Wu(e)}static delete(){const e=function RD(){return new Bf("deleteField")}();return e._methodName="FieldValue.delete",new Wu(e)}static arrayUnion(...e){const t=function ov(...n){return new _D("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Wu(t)}static arrayRemove(...e){const t=function CT(...n){return new jf("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Wu(t)}static increment(e){const t=function ND(n){return new vD("increment",n)}(e);return t._methodName="FieldValue.increment",new Wu(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const JE={Firestore:lv,GeoPoint:Hu,Timestamp:Wn,Blob:uh,Transaction:QE,WriteBatch:FD,DocumentReference:Ro,DocumentSnapshot:lm,Query:rs,QueryDocumentSnapshot:cm,QuerySnapshot:lh,CollectionReference:qf,FieldPath:Zf,FieldValue:Wu,setLogLevel:function PD(n){!function Bp(n){Jo.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function cv(n){(function ST(n,e){n.INTERNAL.registerComponent(new ji.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},JE)))})(n,(e,t)=>new lv(e,t,new YE)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(go.Z);var Ka=k(7579),UD=k(6451),zf=k(5363),dv=k(8421);function Ri(n,e){return(0,_r.e)((t,r)=>{let o=null,u=0,h=!1;const m=()=>h&&!o&&r.complete();t.subscribe((0,Wr.x)(r,E=>{null==o||o.unsubscribe();let C=0;const M=u++;(0,dv.Xf)(n(E,M)).subscribe(o=(0,Wr.x)(r,N=>r.next(e?e(E,N,M,C++):N),()=>{o=null,m()}))},()=>{h=!0,m()}))})}var BD=k(6063);class hv extends Ka.x{constructor(e=1/0,t=1/0,r=BD.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:h}=this;t||(r.push(e),!o&&r.push(u.now()+h)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let h=0;h<u.length&&!e.closed;h+=r?1:2)e.next(u[h]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const h=t.now();let m=0;for(let E=1;E<r.length&&r[E]<=h;E+=2)m=E;m&&r.splice(0,m+1)}}}var jD=k(3099);function $D(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,jD.B)({connector:()=>new hv(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const fv=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var pv=k(5698);function XE(n){return(0,_r.e)((e,t)=>{let r=!1;e.subscribe((0,Wr.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function eb(n=MT){return(0,_r.e)((e,t)=>{let r=!1;e.subscribe((0,Wr.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function MT(){return new fv}function Ac(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Nn((o,u)=>n(o,u,r)):Bi.y,(0,pv.q)(1),t?XE(e):eb(()=>new fv))}var Wf=k(576);function tb(n,e){return(0,Wf.m)(e)?Ri(()=>n,e):Ri(()=>n)}var Is=k(9468);k(5867);const sb=new Map,WD={activated:!1,tokenObservers:[]},KD={initialized:!1,enabled:!1};function Nr(n){return sb.get(n)||WD}function No(n,e){sb.set(n,e)}function hm(){return KD}class yv{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new Nt.BH,yield function _v(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Nt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ni=new Nt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function vv(n){if(!Nr(n).activated)throw Ni.create("use-before-activation",{appName:n.name})}function db(n,e){return fm.apply(this,arguments)}function fm(){return fm=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let h,m;try{h=yield fetch(n,u)}catch(N){throw Ni.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==h.status)throw Ni.create("fetch-status-error",{httpStatus:h.status});try{m=yield h.json()}catch(N){throw Ni.create("fetch-parse-error",{originalErrorMessage:N.message})}const E=m.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw Ni.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(E[1]),M=Date.now();return{token:m.attestationToken,expireTimeMillis:M+C,issuedAtTimeMillis:M}}),fm.apply(this,arguments)}function eC(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const pm="firebase-app-check-store";let bv=null;function hb(){return bv||(bv=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(Ni.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(pm,{keyPath:"compositeKey"})}}catch(t){e(Ni.create("storage-open",{originalErrorMessage:t.message}))}}),bv)}function mm(){return mm=(0,me.Z)(function*(n,e){const r=(yield hb()).transaction(pm,"readwrite"),u=r.objectStore(pm).put({compositeKey:n,value:e});return new Promise((h,m)=>{u.onsuccess=E=>{h()},r.onerror=E=>{var C;m(Ni.create("storage-set",{originalErrorMessage:null===(C=E.target.error)||void 0===C?void 0:C.message}))}})}),mm.apply(this,arguments)}const Sc=new $i.Yd("@firebase/app-check");function iC(n,e){return(0,Nt.hl)()?function nC(n,e){return function Ku(n,e){return mm.apply(this,arguments)}(function pb(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Sc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function sC(){return hm().enabled}function Dv(){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,me.Z)(function*(){const n=hm();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Cv.apply(this,arguments)}const aC={error:"UNKNOWN_ERROR"};function uC(n){return Nt.US.encodeString(JSON.stringify(n),!1)}function Qf(n){return _m.apply(this,arguments)}function _m(){return _m=(0,me.Z)(function*(n,e=!1){const t=n.app;vv(t);const r=Nr(t);let u,o=r.token;if(!o){const E=yield r.cachedTokenPromise;E&&Av(E)&&(o=E)}if(!e&&o&&Av(o))return{token:o.token};let m,h=!1;if(sC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=db(eC(t,yield Dv()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),h=!0);const E=yield r.exchangeTokenPromise;return yield iC(t,E),No(t,Object.assign(Object.assign({},r),{token:E})),{token:E.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(E=>(r.exchangeTokenPromise=void 0,E)),h=!0),o=yield r.exchangeTokenPromise}catch(E){"appCheck/throttled"===E.code?Sc.warn(E.message):Sc.error(E),u=E}return o?(m={token:o.token},No(t,Object.assign(Object.assign({},r),{token:o})),yield iC(t,o)):m=_b(u),h&&wm(t,m),m}),_m.apply(this,arguments)}function Tv(n,e){const t=Nr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),No(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function mb(n){const{app:e}=n,t=Nr(e);let r=t.tokenRefresher;r||(r=function yb(n){const{app:e}=n;return new yv((0,me.Z)(function*(){let r;if(r=Nr(e).token?yield Qf(n,!0):yield Qf(n),r.error)throw r.error}),()=>!0,()=>{const t=Nr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),No(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function wm(n,e){const t=Nr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function Av(n){return n.expireTimeMillis-Date.now()>0}function _b(n){return{token:uC(aC),error:n}}class Sv{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Nr(this.app);for(const t of e)Tv(this.app,t.next);return Promise.resolve()}}const P="app-check-internal";!function V(){(0,wi._registerComponent)(new ji.wA("app-check",n=>function lC(n,e){return new Sv(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(P).initialize()})),(0,wi._registerComponent)(new ji.wA(P,n=>function cC(n){return{getToken:e=>Qf(n,e),addTokenListener:e=>function vm(n,e,t,r){const{app:o}=n,u=Nr(o),h={next:t,error:r,type:e};if(No(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,h]})),u.token&&Av(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),mb(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>mb(n))}(n,"INTERNAL",e),removeTokenListener:e=>Tv(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,wi.registerVersion)("@firebase/app-check","0.5.6")}();class Oe{constructor(){return(0,rr.vb)("app-check")}}"undefined"!=typeof window&&window,k(127);const ZT=new d.OlP("angularfire2.auth.use-emulator"),zT=new d.OlP("angularfire2.auth.settings"),WT=new d.OlP("angularfire2.auth.tenant-id"),KT=new d.OlP("angularfire2.auth.langugage-code"),YT=new d.OlP("angularfire2.auth.use-device-language"),QT=new d.OlP("angularfire.auth.persistence"),JT=(n,e,t,r,o,u,h,m)=>(0,ir.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const E=e.runOutsideAngular(()=>n.auth());if(t&&E.useEmulator(...t),r&&(E.tenantId=r),E.languageCode=o,u&&E.useDeviceLanguage(),h)for(const[C,M]of Object.entries(h))E.settings[C]=M;return m&&E.setPersistence(m),E},[t,r,o,u,h,m]);let mC=(()=>{class n{constructor(t,r,o,u,h,m,E,C,M,N,G,Q){const ce=new Ka.x,Fe=dt(void 0).pipe((0,zf.Q)(h.outsideAngular),Ri(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,820)))),(0,Tt.U)(()=>(0,ir.on)(t,u,r)),(0,Tt.U)(it=>JT(it,u,m,C,M,N,E,G)),$D({bufferSize:1,refCount:!1}));if(mr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=dt(null);else{Fe.pipe(Ac()).subscribe();const Zt=Fe.pipe(Ri(Ot=>Ot.getRedirectResult().then(Wt=>Wt,()=>null)),rr.iC,$D({bufferSize:1,refCount:!1})),zt=Fe.pipe(Ri(Ot=>new nr.y(Wt=>({unsubscribe:u.runOutsideAngular(()=>Ot.onAuthStateChanged(gn=>Wt.next(gn),gn=>Wt.error(gn),()=>Wt.complete()))})))),Xt=Fe.pipe(Ri(Ot=>new nr.y(Wt=>({unsubscribe:u.runOutsideAngular(()=>Ot.onIdTokenChanged(gn=>Wt.next(gn),gn=>Wt.error(gn),()=>Wt.complete()))}))));this.authState=Zt.pipe(tb(zt),(0,Is.R)(h.outsideAngular),(0,zf.Q)(h.insideAngular)),this.user=Zt.pipe(tb(Xt),(0,Is.R)(h.outsideAngular),(0,zf.Q)(h.insideAngular)),this.idToken=this.user.pipe(Ri(Ot=>Ot?(0,_n.D)(Ot.getIdToken()):dt(null))),this.idTokenResult=this.user.pipe(Ri(Ot=>Ot?(0,_n.D)(Ot.getIdTokenResult()):dt(null))),this.credential=(0,UD.T)(Zt,ce,this.authState.pipe(Nn(Ot=>!Ot))).pipe((0,Tt.U)(Ot=>(null==Ot?void 0:Ot.user)?Ot:null),(0,Is.R)(h.outsideAngular),(0,zf.Q)(h.insideAngular))}return(0,ir.pX)(this,Fe,u,{spy:{apply:(it,Zt,zt)=>{(it.startsWith("signIn")||it.startsWith("createUser"))&&zt.then(Xt=>ce.next(Xt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ir.Dh),d.LFG(ir.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(rr.HU),d.LFG(ZT,8),d.LFG(zT,8),d.LFG(WT,8),d.LFG(KT,8),d.LFG(YT,8),d.LFG(QT,8),d.LFG(Oe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function XT(n,e){return function Ex(n,e=yl.z){return new nr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function yC(n,e){return XT(n,e).pipe((0,Tt.U)(t=>({payload:t,type:"query"})))}function Tb(n,e){return yC(n,e).pipe(vi(void 0),yu(),(0,Tt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,m)=>{const E=o.find(M=>M.doc.ref.isEqual(h.ref)),C=null==t?void 0:t.payload.docs.find(M=>M.ref.isEqual(h.ref));E&&JSON.stringify(E.doc.metadata)===JSON.stringify(h.metadata)||!E&&C&&JSON.stringify(C.metadata)===JSON.stringify(h.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:h}})}),u}))}function eA(n,e,t){return Tb(n,t).pipe(Ui((r,o)=>function Ix(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Dx(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return _C(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return _C(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return _C(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function ys(n,e=Bi.y){return n=null!=n?n:Ho,(0,_r.e)((t,r)=>{let o,u=!0;t.subscribe((0,Wr.x)(r,h=>{const m=e(h);(u||!n(o,m))&&(u=!1,o=m,r.next(h))}))})}(),(0,Tt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function _C(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function tA(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class nA{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Tb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Tt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(vi(void 0),yu(),Nn(([r,o])=>o.length>0||!r),(0,Tt.U)(([r,o])=>o),rr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ui((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=tA(e);return eA(this.query,t,this.afs.schedulers.outsideAngular).pipe(rr.iC)}valueChanges(e={}){return yC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),rr.iC)}get(e){return(0,_n.D)(this.query.get(e)).pipe(rr.iC)}add(e){return this.ref.add(e)}doc(e){return new rA(this.ref.doc(e),this.afs)}}class rA{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=iA(r,t);return new nA(o,u,this.afs)}snapshotChanges(){return function bx(n,e){return XT(n,e).pipe(vi(void 0),yu(),(0,Tt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(rr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Tt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,_n.D)(this.ref.get(e)).pipe(rr.iC)}}class Cx{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Tb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Nn(t=>t.length>0),rr.iC):Tb(this.query,this.afs.schedulers.outsideAngular).pipe(rr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ui((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=tA(e);return eA(this.query,t,this.afs.schedulers.outsideAngular).pipe(rr.iC)}valueChanges(e={}){return yC(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),rr.iC)}get(e){return(0,_n.D)(this.query.get(e)).pipe(rr.iC)}}const Tx=new d.OlP("angularfire2.enableFirestorePersistence"),Ax=new d.OlP("angularfire2.firestore.persistenceSettings"),Sx=new d.OlP("angularfire2.firestore.settings"),xx=new d.OlP("angularfire2.firestore.use-emulator");function iA(n,e=(t=>t)){return{query:e(n),ref:n}}let sA=(()=>{class n{constructor(t,r,o,u,h,m,E,C,M,N,G,Q,ce,Fe,it,Zt,zt){this.schedulers=E;const Xt=(0,ir.on)(t,m,r),Ot=M;N&&JT(Xt,m,G,ce,Fe,it,Q,Zt),[this.firestore,this.persistenceEnabled$]=(0,ir.cc)(`${Xt.name}.firestore`,"AngularFirestore",Xt.name,()=>{const Wt=m.runOutsideAngular(()=>Xt.firestore());if(u&&Wt.settings(u),Ot&&Wt.useEmulator(...Ot),o&&!mr(h)){const gn=()=>{try{return(0,_n.D)(Wt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(os){return"undefined"!=typeof console&&console.warn(os),dt(!1)}};return[Wt,m.runOutsideAngular(gn)]}return[Wt,dt(!1)]},[u,Ot,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:h}=iA(o,r),m=this.schedulers.ngZone.run(()=>u);return new nA(m,h,this)}collectionGroup(t,r){const o=r||(h=>h),u=this.firestore.collectionGroup(t);return new Cx(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new rA(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ir.Dh),d.LFG(ir.xv,8),d.LFG(Tx,8),d.LFG(Sx,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(rr.HU),d.LFG(Ax,8),d.LFG(xx,8),d.LFG(mC,8),d.LFG(ZT,8),d.LFG(zT,8),d.LFG(WT,8),d.LFG(KT,8),d.LFG(YT,8),d.LFG(QT,8),d.LFG(Oe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();class Oo extends Ka.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:Mx}=Array,{getPrototypeOf:Rx,prototype:Nx,keys:Ox}=Object;function oA(n){if(1===n.length){const e=n[0];if(Mx(e))return{args:e,keys:null};if(function kx(n){return n&&"object"==typeof n&&Rx(n)===Nx}(e)){const t=Ox(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:Px}=Array;function aA(n){return(0,Tt.U)(e=>function Fx(n,e){return Px(e)?n(...e):n(e)}(n,e))}function uA(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var Lx=k(9672);function lA(n,e,t){n?(0,Lx.f)(t,n,e):e()}function Ab(n,e){const t=(0,Wf.m)(n)?n:()=>n,r=o=>o.error(t());return new nr.y(e?o=>e.schedule(r,0,o):r)}function cA(n){return new nr.y(e=>{(0,dv.Xf)(n()).subscribe(e)})}var Em=k(515);function dA(){return(0,_r.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Wr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Bx extends nr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,_r.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new yn.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Wr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=yn.w0.EMPTY)}return e}refCount(){return dA()(this)}}function ph(n){return(0,_r.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,Wr.x)(t,void 0,void 0,h=>{u=(0,dv.Xf)(n(h,ph(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}var is=k(5577);function Ov(n,e){return(0,Wf.m)(e)?(0,is.z)(n,e,1):(0,is.z)(n,1)}function vC(n){return n<=0?()=>Em.E:(0,_r.e)((e,t)=>{let r=[];e.subscribe((0,Wr.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}var ko=k(8505);class xc{constructor(e,t){this.id=e,this.url=t}}class wC extends xc{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class kv extends xc{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class hA extends xc{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Hx extends xc{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Gx extends xc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qx extends xc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zx extends xc{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class zx extends xc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wx extends xc{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fA{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class pA{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Kx{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yx{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qx{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Jx{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gA{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const qt="primary";class Xx{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function bm(n){return new Xx(n)}const mA="ngNavigationCancelingError";function EC(n){const e=Error("NavigationCancelingError: "+n);return e[mA]=!0,e}function tM(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const h=r[u],m=n[u];if(h.startsWith(":"))o[h.substring(1)]=m;else if(h!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Yu(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!yA(n[o],e[o]))return!1;return!0}function yA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function _A(n){return Array.prototype.concat.apply([],n)}function vA(n){return n.length>0?n[n.length-1]:null}function Oi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Qu(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,_n.D)(Promise.resolve(n)):dt(n)}const iM={exact:function bA(n,e,t){if(!Xf(n.segments,e.segments)||!Sb(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!bA(n.children[r],e.children[r],t))return!1;return!0},subset:IA},wA={exact:function sM(n,e){return Yu(n,e)},subset:function oM(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>yA(n[t],e[t]))},ignored:()=>!0};function EA(n,e,t){return iM[t.paths](n.root,e.root,t.matrixParams)&&wA[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function IA(n,e,t){return DA(n,e,e.segments,t)}function DA(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Xf(o,t)||e.hasChildren()||!Sb(o,t,r))}if(n.segments.length===t.length){if(!Xf(n.segments,t)||!Sb(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!IA(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Xf(n.segments,o)&&Sb(n.segments,o,r)&&n.children[qt])&&DA(n.children[qt],e,u,r)}}function Sb(n,e,t){return e.every((r,o)=>wA[t](n[o].parameters,r.parameters))}class Jf{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bm(this.queryParams)),this._queryParamMap}toString(){return lM.serialize(this)}}class en{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Oi(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return xb(this)}}class Pv{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=bm(this.parameters)),this._parameterMap}toString(){return xA(this)}}function Xf(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class CA{}class TA{parse(e){const t=new _M(e);return new Jf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Fv(e.root,!0)}`,r=function hM(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Mb(t)}=${Mb(o)}`).join("&"):`${Mb(t)}=${Mb(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function cM(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const lM=new TA;function xb(n){return n.segments.map(e=>xA(e)).join("/")}function Fv(n,e){if(!n.hasChildren())return xb(n);if(e){const t=n.children[qt]?Fv(n.children[qt],!1):"",r=[];return Oi(n.children,(o,u)=>{u!==qt&&r.push(`${u}:${Fv(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function uM(n,e){let t=[];return Oi(n.children,(r,o)=>{o===qt&&(t=t.concat(e(r,o)))}),Oi(n.children,(r,o)=>{o!==qt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===qt?[Fv(n.children[qt],!1)]:[`${o}:${Fv(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[qt]?`${xb(n)}/${t[0]}`:`${xb(n)}/(${t.join("//")})`}}function AA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Mb(n){return AA(n).replace(/%3B/gi,";")}function bC(n){return AA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rb(n){return decodeURIComponent(n)}function SA(n){return Rb(n.replace(/\+/g,"%20"))}function xA(n){return`${bC(n.path)}${function dM(n){return Object.keys(n).map(e=>`;${bC(e)}=${bC(n[e])}`).join("")}(n.parameters)}`}const fM=/^[^\/()?;=#]+/;function Nb(n){const e=n.match(fM);return e?e[0]:""}const pM=/^[^=?&#]+/,mM=/^[^&#]+/;class _M{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[qt]=new en(e,t)),r}parseSegment(){const e=Nb(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Pv(Rb(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Nb(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Nb(this.remaining);o&&(r=o,this.capture(r))}e[Rb(t)]=Rb(r)}parseQueryParam(e){const t=function gM(n){const e=n.match(pM);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function yM(n){const e=n.match(mM);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const o=SA(t),u=SA(r);if(e.hasOwnProperty(o)){let h=e[o];Array.isArray(h)||(h=[h],e[o]=h),h.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Nb(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=qt);const h=this.parseChildren();t[u]=1===Object.keys(h).length?h[qt]:new en([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class MA{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=IC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=IC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=DC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return DC(e,this._root).map(t=>t.value)}}function IC(n,e){if(n===e.value)return e;for(const t of e.children){const r=IC(n,t);if(r)return r}return null}function DC(n,e){if(n===e.value)return[e];for(const t of e.children){const r=DC(n,t);if(r.length)return r.unshift(e),r}return[]}class Mc{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Im(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class RA extends MA{constructor(e,t){super(e),this.snapshot=t,CC(this,e)}toString(){return this.snapshot.toString()}}function NA(n,e){const t=function vM(n,e){const h=new Ob([],{},{},"",{},qt,e,null,n.root,-1,{});return new kA("",new Mc(h,[]))}(n,e),r=new Oo([new Pv("",{})]),o=new Oo({}),u=new Oo({}),h=new Oo({}),m=new Oo(""),E=new Dm(r,o,h,m,u,qt,e,t.root);return E.snapshot=t.root,new RA(new Mc(E,[]),t)}class Dm{constructor(e,t,r,o,u,h,m,E){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=m,this._futureSnapshot=E}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Tt.U)(e=>bm(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Tt.U)(e=>bm(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function OA(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function wM(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ob{constructor(e,t,r,o,u,h,m,E,C,M,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=h,this.component=m,this.routeConfig=E,this._urlSegment=C,this._lastPathIndex=M,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bm(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bm(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class kA extends MA{constructor(e,t){super(t),this.url=e,CC(this,t)}toString(){return PA(this._root)}}function CC(n,e){e.value._routerState=n,e.children.forEach(t=>CC(n,t))}function PA(n){const e=n.children.length>0?` { ${n.children.map(PA).join(", ")} } `:"";return`${n.value}${e}`}function TC(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Yu(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Yu(e.params,t.params)||n.params.next(t.params),function nM(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Yu(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Yu(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function AC(n,e){const t=Yu(n.params,e.params)&&function aM(n,e){return Xf(n,e)&&n.every((t,r)=>Yu(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||AC(n.parent,e.parent))}function Lv(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function bM(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Lv(n,r,o);return Lv(n,r)})}(n,e,t);return new Mc(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const h=u.route;return h.value._futureSnapshot=e.value,h.children=e.children.map(m=>Lv(n,m)),h}}const r=function IM(n){return new Dm(new Oo(n.url),new Oo(n.params),new Oo(n.queryParams),new Oo(n.fragment),new Oo(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Lv(n,u));return new Mc(r,o)}}function kb(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Vv(n){return"object"==typeof n&&null!=n&&n.outlets}function SC(n,e,t,r,o){let u={};if(r&&Oi(r,(m,E)=>{u[E]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new Jf(t,u,o);const h=FA(n,e,t);return new Jf(h,u,o)}function FA(n,e,t){const r={};return Oi(n.children,(o,u)=>{r[u]=o===e?t:FA(o,e,t)}),new en(n.segments,r)}class LA{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&kb(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Vv);if(o&&o!==vA(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xC{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function VA(n,e,t){if(n||(n=new en([],{})),0===n.segments.length&&n.hasChildren())return Pb(n,e,t);const r=function xM(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const h=n.segments[o],m=t[r];if(Vv(m))break;const E=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===E)break;if(E&&C&&"object"==typeof C&&void 0===C.outlets){if(!BA(E,C,h))return u;r+=2}else{if(!BA(E,{},h))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new en(n.segments.slice(0,r.pathIndex),{});return u.children[qt]=new en(n.segments.slice(r.pathIndex),n.children),Pb(u,0,o)}return r.match&&0===o.length?new en(n.segments,{}):r.match&&!n.hasChildren()?MC(n,e,t):r.match?Pb(n,0,o):MC(n,e,t)}function Pb(n,e,t){if(0===t.length)return new en(n.segments,{});{const r=function SM(n){return Vv(n[0])?n[0].outlets:{[qt]:n}}(t),o={};return Oi(r,(u,h)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[h]=VA(n.children[h],e,u))}),Oi(n.children,(u,h)=>{void 0===r[h]&&(o[h]=u)}),new en(n.segments,o)}}function MC(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Vv(u)){const E=MM(u.outlets);return new en(r,E)}if(0===o&&kb(t[0])){r.push(new Pv(n.segments[e].path,UA(t[0]))),o++;continue}const h=Vv(u)?u.outlets[qt]:`${u}`,m=o<t.length-1?t[o+1]:null;h&&m&&kb(m)?(r.push(new Pv(h,UA(m))),o+=2):(r.push(new Pv(h,{})),o++)}return new en(r,{})}function MM(n){const e={};return Oi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=MC(new en([],{}),0,t))}),e}function UA(n){const e={};return Oi(n,(t,r)=>e[r]=`${t}`),e}function BA(n,e,t){return n==t.path&&Yu(e,t.parameters)}class NM{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),TC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Im(t);e.children.forEach(u=>{const h=u.value.outlet;this.deactivateRoutes(u,o[h],r),delete o[h]}),Oi(o,(u,h)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const h=r.getContext(o.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Im(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);if(r&&r.outlet){const h=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:h,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Im(e);for(const h of Object.keys(u))this.deactivateRouteAndItsChildren(u[h],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Im(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Jx(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Yx(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(TC(o),o===u)if(o.component){const h=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const h=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(m.contexts),h.attachRef=m.componentRef,h.route=m.route.value,h.outlet&&h.outlet.attach(m.componentRef,m.route.value),TC(m.route.value),this.activateChildRoutes(e,null,h.children)}else{const m=function OM(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),E=m?m.module.componentFactoryResolver:null;h.attachRef=null,h.route=o,h.resolver=E,h.outlet&&h.outlet.activateWith(o,E),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}class RC{constructor(e,t){this.routes=e,this.module=t}}function gh(n){return"function"==typeof n}function ep(n){return n instanceof Jf}const Uv=Symbol("INITIAL_VALUE");function Bv(){return Ri(n=>function Vx(...n){const e=(0,Vi.yG)(n),t=(0,Vi.jO)(n),{args:r,keys:o}=oA(n);if(0===r.length)return(0,_n.D)([],e);const u=new nr.y(function Ux(n,e,t=Bi.y){return r=>{lA(e,()=>{const{length:o}=n,u=new Array(o);let h=o,m=o;for(let E=0;E<o;E++)lA(e,()=>{const C=(0,_n.D)(n[E],e);let M=!1;C.subscribe((0,Wr.x)(r,N=>{u[E]=N,M||(M=!0,m--),m||r.next(t(u.slice()))},()=>{--h||r.complete()}))},r)},r)}}(r,e,o?h=>uA(o,h):Bi.y));return t?u.pipe(aA(t)):u}(n.map(e=>e.pipe((0,pv.q)(1),vi(Uv)))).pipe(Ui((e,t)=>{let r=!1;return t.reduce((o,u,h)=>o!==Uv?o:(u===Uv&&(r=!0),r||!1!==u&&h!==t.length-1&&!ep(u)?o:u),e)},Uv),Nn(e=>e!==Uv),(0,Tt.U)(e=>ep(e)?e:!0===e),(0,pv.q)(1)))}class UM{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new jv,this.attachRef=null}}class jv{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new UM,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let NC=(()=>{class n{constructor(t,r,o,u,h){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=u||qt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,E=new BM(t,m,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,E),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(jv),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class BM{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Dm?this.route:e===jv?this.childContexts:this.parent.get(e,t)}}let jA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[NC],encapsulation:2}),n})();function $A(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];jM(r,$M(e,r))}}function jM(n,e){n.children&&$A(n.children,e)}function $M(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function OC(n){const e=n.children&&n.children.map(OC),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==qt&&(t.component=jA),t}function ga(n){return n.outlet||qt}function HA(n,e){const t=n.filter(r=>ga(r)===e);return t.push(...n.filter(r=>ga(r)!==e)),t}const GA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Fb(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},GA):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||tM)(t,n,e);if(!u)return Object.assign({},GA);const h={};Oi(u.posParams,(E,C)=>{h[C]=E.path});const m=u.consumed.length>0?Object.assign(Object.assign({},h),u.consumed[u.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Lb(n,e,t,r,o="corrected"){if(t.length>0&&function qM(n,e,t){return t.some(r=>Vb(n,e,r)&&ga(r)!==qt)}(n,t,r)){const h=new en(e,function GM(n,e,t,r){const o={};o[qt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ga(u)!==qt){const h=new en([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[ga(u)]=h}return o}(n,e,r,new en(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function ZM(n,e,t){return t.some(r=>Vb(n,e,r))}(n,t,r)){const h=new en(n.segments,function HM(n,e,t,r,o,u){const h={};for(const m of r)if(Vb(n,t,m)&&!o[ga(m)]){const E=new en([],{});E._sourceSegment=n,E._segmentIndexShift="legacy"===u?n.segments.length:e.length,h[ga(m)]=E}return Object.assign(Object.assign({},o),h)}(n,e,t,r,n.children,o));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const u=new en(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Vb(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function qA(n,e,t,r){return!!(ga(n)===r||r!==qt&&Vb(e,t,n))&&("**"===n.path||Fb(e,n,t).matched)}function ZA(n,e,t){return 0===e.length&&!n.children[t]}class Ub{constructor(e){this.segmentGroup=e||null}}class zA{constructor(e){this.urlTree=e}}function $v(n){return Ab(new Ub(n))}function WA(n){return Ab(new zA(n))}function zM(n){return Ab(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class YM{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=Lb(this.urlTree.root,[],[],this.config).segmentGroup,t=new en(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,qt).pipe((0,Tt.U)(u=>this.createUrlTree(kC(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ph(u=>{if(u instanceof zA)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Ub?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,qt).pipe((0,Tt.U)(o=>this.createUrlTree(kC(o),e.queryParams,e.fragment))).pipe(ph(o=>{throw o instanceof Ub?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new en([],{[qt]:e}):e;return new Jf(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Tt.U)(u=>new en([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,_n.D)(o).pipe(Ov(u=>{const h=r.children[u],m=HA(t,u);return this.expandSegmentGroup(e,m,h,u).pipe((0,Tt.U)(E=>({segment:E,outlet:u})))}),Ui((u,h)=>(u[h.outlet]=h.segment,u),{}),function jx(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Nn((o,u)=>n(o,u,r)):Bi.y,vC(1),t?XE(e):eb(()=>new fv))}())}expandSegment(e,t,r,o,u,h){return(0,_n.D)(r).pipe(Ov(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,h).pipe(ph(C=>{if(C instanceof Ub)return dt(null);throw C}))),Ac(m=>!!m),ph((m,E)=>{if(m instanceof fv||"EmptyError"===m.name)return ZA(t,o,u)?dt(new en([],{})):$v(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,h,m){return qA(o,t,u,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,h):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h):$v(t):$v(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?WA(u):this.lineralizeSegments(r,u).pipe((0,is.z)(h=>{const m=new en(h,{});return this.expandSegment(e,m,t,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,h){const{matched:m,consumedSegments:E,remainingSegments:C,positionalParamSegments:M}=Fb(t,o,u);if(!m)return $v(t);const N=this.applyRedirectCommands(E,o.redirectTo,M);return o.redirectTo.startsWith("/")?WA(N):this.lineralizeSegments(o,N).pipe((0,is.z)(G=>this.expandSegment(e,t,r,G.concat(C),h,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?dt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Tt.U)(N=>(r._loadedConfig=N,new en(o,{})))):dt(new en(o,{}));const{matched:h,consumedSegments:m,remainingSegments:E}=Fb(t,r,o);return h?this.getChildConfig(e,r,o).pipe((0,is.z)(M=>{const N=M.module,G=M.routes,{segmentGroup:Q,slicedSegments:ce}=Lb(t,m,E,G),Fe=new en(Q.segments,Q.children);if(0===ce.length&&Fe.hasChildren())return this.expandChildren(N,G,Fe).pipe((0,Tt.U)(Xt=>new en(m,Xt)));if(0===G.length&&0===ce.length)return dt(new en(m,{}));const it=ga(r)===u;return this.expandSegment(N,Fe,G,ce,it?qt:u,!0).pipe((0,Tt.U)(zt=>new en(m.concat(zt.segments),zt.children)))})):$v(t)}getChildConfig(e,t,r){return t.children?dt(new RC(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?dt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,is.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,Tt.U)(u=>(t._loadedConfig=u,u))):function WM(n){return Ab(EC(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):dt(new RC([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return dt(!0);const u=o.map(h=>{const m=e.get(h);let E;if(function PM(n){return n&&gh(n.canLoad)}(m))E=m.canLoad(t,r);else{if(!gh(m))throw new Error("Invalid CanLoad guard");E=m(t,r)}return Qu(E)});return dt(u).pipe(Bv(),(0,ko.b)(h=>{if(!ep(h))return;const m=EC(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw m.url=h,m}),(0,Tt.U)(h=>!0===h))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return dt(r);if(o.numberOfChildren>1||!o.children[qt])return zM(e.redirectTo);o=o.children[qt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Jf(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Oi(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let h={};return Oi(t.children,(m,E)=>{h[E]=this.createSegmentGroup(e,m,r,o)}),new en(u,h)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function kC(n){const e={};for(const r of Object.keys(n.children)){const u=kC(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function QM(n){if(1===n.numberOfChildren&&n.children[qt]){const e=n.children[qt];return new en(n.segments.concat(e.segments),e.children)}return n}(new en(n.segments,e))}class KA{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Bb{constructor(e,t){this.component=e,this.route=t}}function XM(n,e,t){const r=n._root;return Hv(r,e?e._root:null,t,[r.value])}function jb(n,e,t){const r=function t1(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Hv(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Im(e);return n.children.forEach(h=>{(function n1(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,h=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(h&&u.routeConfig===h.routeConfig){const E=function r1(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Xf(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Xf(n.url,e.url)||!Yu(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!AC(n,e)||!Yu(n.queryParams,e.queryParams);default:return!AC(n,e)}}(h,u,u.routeConfig.runGuardsAndResolvers);E?o.canActivateChecks.push(new KA(r)):(u.data=h.data,u._resolvedData=h._resolvedData),Hv(n,e,u.component?m?m.children:null:t,r,o),E&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Bb(m.outlet.component,h))}else h&&Gv(e,m,o),o.canActivateChecks.push(new KA(r)),Hv(n,null,u.component?m?m.children:null:t,r,o)})(h,u[h.value.outlet],t,r.concat([h.value]),o),delete u[h.value.outlet]}),Oi(u,(h,m)=>Gv(h,t.getContext(m),o)),o}function Gv(n,e,t){const r=Im(n),o=n.value;Oi(r,(u,h)=>{Gv(u,o.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new Bb(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class h1{}function YA(n){return new nr.y(e=>e.error(n))}class p1{constructor(e,t,r,o,u,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=h}recognize(){const e=Lb(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,qt);if(null===t)return null;const r=new Ob([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Mc(r,t),u=new kA(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=OA(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const h=t.children[u],m=HA(e,u),E=this.processSegmentGroup(m,h,u);if(null===E)return null;r.push(...E)}const o=QA(r);return function g1(n){n.sort((e,t)=>e.value.outlet===qt?-1:t.value.outlet===qt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const h=this.processSegmentAgainstRoute(u,t,r,o);if(null!==h)return h}return ZA(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!qA(e,t,r,o))return null;let u,h=[],m=[];if("**"===e.path){const Q=r.length>0?vA(r).parameters:{};u=new Ob(r,Q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,eS(e),ga(e),e.component,e,JA(t),XA(t)+r.length,tS(e))}else{const Q=Fb(t,e,r);if(!Q.matched)return null;h=Q.consumedSegments,m=Q.remainingSegments,u=new Ob(h,Q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,eS(e),ga(e),e.component,e,JA(t),XA(t)+h.length,tS(e))}const E=function m1(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:M}=Lb(t,h,m,E.filter(Q=>void 0===Q.redirectTo),this.relativeLinkResolution);if(0===M.length&&C.hasChildren()){const Q=this.processChildren(E,C);return null===Q?null:[new Mc(u,Q)]}if(0===E.length&&0===M.length)return[new Mc(u,[])];const N=ga(e)===o,G=this.processSegment(E,C,M,N?qt:o);return null===G?null:[new Mc(u,G)]}}function y1(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function QA(n){const e=[],t=new Set;for(const r of n){if(!y1(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=QA(r.children);e.push(new Mc(r.value,o))}return e.filter(r=>!t.has(r))}function JA(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function XA(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function eS(n){return n.data||{}}function tS(n){return n.resolve||{}}function nS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function PC(n){return Ri(e=>{const t=n(e);return t?(0,_n.D)(t).pipe((0,Tt.U)(()=>e)):dt(e)})}class C1 extends class D1{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const FC=new d.OlP("ROUTES");class rS{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,Tt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=u.create(e);return new RC(_A(h.injector.get(FC,void 0,d.XFs.Self|d.XFs.Optional)).map(OC),h)}),ph(u=>{throw t._loader$=void 0,u}));return t._loader$=new Bx(o,()=>new Ka.x).pipe(dA()),t._loader$}loadModuleFactory(e){return Qu(e()).pipe((0,is.z)(t=>t instanceof d.YKP?dt(t):(0,_n.D)(this.compiler.compileModuleAsync(t))))}}class A1{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function S1(n){throw n}function x1(n,e,t){return e.parse("/")}function iS(n,e){return dt(null)}const M1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},R1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ki=(()=>{class n{constructor(t,r,o,u,h,m,E){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=E,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ka.x,this.errorHandler=S1,this.malformedUriErrorHandler=x1,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:iS,afterPreactivation:iS},this.urlHandlingStrategy=new A1,this.routeReuseStrategy=new C1,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(d.h0i),this.console=h.get(d.c2e);const N=h.get(d.R0b);this.isNgZoneEnabled=N instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(E),this.currentUrlTree=function rM(){return new Jf(new en([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new rS(h,m,G=>this.triggerEvent(new fA(G)),G=>this.triggerEvent(new pA(G))),this.routerState=NA(this.currentUrlTree,this.rootComponentType),this.transitions=new Oo({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Nn(o=>0!==o.id),(0,Tt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ri(o=>{let u=!1,h=!1;return dt(o).pipe((0,ko.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ri(m=>{const E=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==E||E!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return sS(m.source)&&(this.browserUrlTree=m.extractedUrl),dt(m).pipe(Ri(N=>{const G=this.transitions.getValue();return r.next(new wC(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),G!==this.transitions.getValue()?Em.E:Promise.resolve(N)}),function JM(n,e,t,r){return Ri(o=>function KM(n,e,t,r,o){return new YM(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,Tt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ko.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function _1(n,e,t,r,o){return(0,is.z)(u=>function f1(n,e,t,r,o="emptyOnly",u="legacy"){try{const h=new p1(n,e,t,r,o,u).recognize();return null===h?YA(new h1):dt(h)}catch(h){return YA(h)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,Tt.U)(h=>Object.assign(Object.assign({},u),{targetSnapshot:h}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ko.b)(N=>{if("eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const Q=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(Q,N)}this.browserUrlTree=N.urlAfterRedirects}const G=new Gx(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(G)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:G,extractedUrl:Q,source:ce,restoredState:Fe,extras:it}=m,Zt=new wC(G,this.serializeUrl(Q),ce,Fe);r.next(Zt);const zt=NA(Q,this.rootComponentType).snapshot;return dt(Object.assign(Object.assign({},m),{targetSnapshot:zt,urlAfterRedirects:Q,extras:Object.assign(Object.assign({},it),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),Em.E}),PC(m=>{const{targetSnapshot:E,id:C,extractedUrl:M,rawUrl:N,extras:{skipLocationChange:G,replaceUrl:Q}}=m;return this.hooks.beforePreactivation(E,{navigationId:C,appliedUrlTree:M,rawUrlTree:N,skipLocationChange:!!G,replaceUrl:!!Q})}),(0,ko.b)(m=>{const E=new qx(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(E)}),(0,Tt.U)(m=>Object.assign(Object.assign({},m),{guards:XM(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function i1(n,e){return(0,is.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:h}}=t;return 0===h.length&&0===u.length?dt(Object.assign(Object.assign({},t),{guardsResult:!0})):function s1(n,e,t,r){return(0,_n.D)(n).pipe((0,is.z)(o=>function d1(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?dt(u.map(m=>{const E=jb(m,e,o);let C;if(function VM(n){return n&&gh(n.canDeactivate)}(E))C=Qu(E.canDeactivate(n,e,t,r));else{if(!gh(E))throw new Error("Invalid CanDeactivate guard");C=Qu(E(n,e,t,r))}return C.pipe(Ac())})).pipe(Bv()):dt(!0)}(o.component,o.route,t,e,r)),Ac(o=>!0!==o,!0))}(h,r,o,n).pipe((0,is.z)(m=>m&&function kM(n){return"boolean"==typeof n}(m)?function o1(n,e,t,r){return(0,_n.D)(e).pipe(Ov(o=>si(function u1(n,e){return null!==n&&e&&e(new Kx(n)),dt(!0)}(o.route.parent,r),function a1(n,e){return null!==n&&e&&e(new Qx(n)),dt(!0)}(o.route,r),function c1(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(h=>function e1(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>cA(()=>dt(h.guards.map(E=>{const C=jb(E,h.node,t);let M;if(function LM(n){return n&&gh(n.canActivateChild)}(C))M=Qu(C.canActivateChild(r,n));else{if(!gh(C))throw new Error("Invalid CanActivateChild guard");M=Qu(C(r,n))}return M.pipe(Ac())})).pipe(Bv())));return dt(u).pipe(Bv())}(n,o.path,t),function l1(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return dt(!0);const o=r.map(u=>cA(()=>{const h=jb(u,e,t);let m;if(function FM(n){return n&&gh(n.canActivate)}(h))m=Qu(h.canActivate(e,n));else{if(!gh(h))throw new Error("Invalid CanActivate guard");m=Qu(h(e,n))}return m.pipe(Ac())}));return dt(o).pipe(Bv())}(n,o.route,t))),Ac(o=>!0!==o,!0))}(r,u,n,e):dt(m)),(0,Tt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,ko.b)(m=>{if(ep(m.guardsResult)){const C=EC(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const E=new Zx(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(E)}),Nn(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),PC(m=>{if(m.guards.canActivateChecks.length)return dt(m).pipe((0,ko.b)(E=>{const C=new zx(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}),Ri(E=>{let C=!1;return dt(E).pipe(function v1(n,e){return(0,is.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return dt(t);let u=0;return(0,_n.D)(o).pipe(Ov(h=>function w1(n,e,t,r){return function E1(n,e,t,r){const o=nS(n);if(0===o.length)return dt({});const u={};return(0,_n.D)(o).pipe((0,is.z)(h=>function b1(n,e,t,r){const o=jb(n,e,r);return Qu(o.resolve?o.resolve(e,t):o(e,t))}(n[h],e,t,r).pipe((0,ko.b)(m=>{u[h]=m}))),vC(1),(0,is.z)(()=>nS(u).length===o.length?dt(u):Em.E))}(n._resolve,n,e,r).pipe((0,Tt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),OA(n,t).resolve),null)))}(h.route,r,n,e)),(0,ko.b)(()=>u++),vC(1),(0,is.z)(h=>u===o.length?dt(t):Em.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ko.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(E),this.cancelNavigationTransition(E,"At least one route resolver didn't emit any value."))}}))}),(0,ko.b)(E=>{const C=new Wx(E.id,this.serializeUrl(E.extractedUrl),this.serializeUrl(E.urlAfterRedirects),E.targetSnapshot);this.triggerEvent(C)}))}),PC(m=>{const{targetSnapshot:E,id:C,extractedUrl:M,rawUrl:N,extras:{skipLocationChange:G,replaceUrl:Q}}=m;return this.hooks.afterPreactivation(E,{navigationId:C,appliedUrlTree:M,rawUrlTree:N,skipLocationChange:!!G,replaceUrl:!!Q})}),(0,Tt.U)(m=>{const E=function EM(n,e,t){const r=Lv(n,e._root,t?t._root:void 0);return new RA(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:E})}),(0,ko.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,Tt.U)(r=>(new NM(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,ko.b)({next(){u=!0},complete(){u=!0}}),function $x(n){return(0,_r.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||h||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),ph(m=>{if(h=!0,function eM(n){return n&&n[mA]}(m)){const E=ep(m.url);E||(this.navigated=!0,this.restoreHistory(o,!0));const C=new hA(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),E?setTimeout(()=>{const M=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||sS(o.source)};this.scheduleNavigation(M,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const E=new Hx(o.id,this.serializeUrl(o.extractedUrl),m);r.next(E);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return Em.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},h=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(h){const E=Object.assign({},h);delete E.navigationId,delete E.\u0275routerPageId,0!==Object.keys(E).length&&(u.state=E)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,h,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){$A(t),this.config=t.map(OC),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:h,queryParamsHandling:m,preserveFragment:E}=r,C=o||this.routerState.root,M=E?this.currentUrlTree.fragment:h;let N=null;switch(m){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),function DM(n,e,t,r,o){if(0===t.length)return SC(e.root,e.root,e.root,r,o);const u=function CM(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new LA(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,h)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Oi(u.outlets,(E,C)=>{m[C]="string"==typeof E?E.split("/"):E}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===h?(u.split("/").forEach((m,E)=>{0==E&&"."===m||(0==E&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new LA(t,e,r)}(t);if(u.toRoot())return SC(e.root,e.root,new en([],{}),r,o);const h=function TM(n,e,t){if(n.isAbsolute)return new xC(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new xC(u,u===e.root,0)}const r=kb(n.commands[0])?0:1;return function AM(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new xC(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=h.processChildren?Pb(h.segmentGroup,h.index,u.commands):VA(h.segmentGroup,h.index,u.commands);return SC(e.root,h.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,N,null!=M?M:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=ep(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function N1(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},M1):!1===r?Object.assign({},R1):r,ep(t))return EA(this.currentUrlTree,t,o);const u=this.parseUrl(t);return EA(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new kv(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,h){var m,E;if(this.disposed)return Promise.resolve(!1);let C,M,N;h?(C=h.resolve,M=h.reject,N=h.promise):N=new Promise((ce,Fe)=>{C=ce,M=Fe});const G=++this.navigationId;let Q;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),Q=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(E=this.browserPageId)&&void 0!==E?E:0)+1):Q=0,this.setTransition({id:G,targetPageId:Q,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:C,reject:M,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(ce=>Promise.reject(ce))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===h?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new hA(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function sS(n){return"imperative"!==n}let qv=(()=>{class n{constructor(t,r,o,u,h){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=h,this.commands=null,this.onChanges=new Ka.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Cm(this.skipLocationChange),replaceUrl:Cm(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Cm(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ki),d.Y36(Dm),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[d.TTD]}),n})();function Cm(n){return""===n||!!n}class oS{}class aS{preload(e,t){return dt(null)}}let uS=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new rS(o,r,E=>t.triggerEvent(new fA(E)),E=>t.triggerEvent(new pA(E)))}setUpPreloading(){this.subscription=this.router.events.pipe(Nn(t=>t instanceof kv),Ov(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const h=u._loadedConfig;o.push(this.processRoutes(h.module,h.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,_n.D)(o).pipe((0,tn.J)(),(0,Tt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?dt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,is.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ki),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(oS))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),VC=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof wC?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof kv&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof gA&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new gA(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const tp=new d.OlP("ROUTER_CONFIGURATION"),lS=new d.OlP("ROUTER_FORROOT_GUARD"),F1=[_e,{provide:CA,useClass:TA},{provide:ki,useFactory:function j1(n,e,t,r,o,u,h={},m,E){const C=new ki(null,n,e,t,r,o,_A(u));return m&&(C.urlHandlingStrategy=m),E&&(C.routeReuseStrategy=E),function $1(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,C),h.enableTracing&&C.events.subscribe(M=>{var N,G;null===(N=console.group)||void 0===N||N.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null===(G=console.groupEnd)||void 0===G||G.call(console)}),C},deps:[CA,jv,_e,d.zs3,d.Sil,FC,tp,[class T1{},new d.FiY],[class I1{},new d.FiY]]},jv,{provide:Dm,useFactory:function H1(n){return n.routerState.root},deps:[ki]},uS,aS,class P1{preload(e,t){return t().pipe(ph(()=>dt(null)))}},{provide:tp,useValue:{enableTracing:!1}}];function L1(){return new d.PXZ("Router",ki)}let cS=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[F1,dS(t),{provide:lS,useFactory:B1,deps:[[ki,new d.FiY,new d.tp0]]},{provide:tp,useValue:r||{}},{provide:fe,useFactory:U1,deps:[de,[new d.tBr(et),new d.FiY],tp]},{provide:VC,useFactory:V1,deps:[ki,su,tp]},{provide:oS,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:aS},{provide:d.PXZ,multi:!0,useFactory:L1},[UC,{provide:d.ip1,multi:!0,useFactory:G1,deps:[UC]},{provide:hS,useFactory:q1,deps:[UC]},{provide:d.tb,multi:!0,useExisting:hS}]]}}static forChild(t){return{ngModule:n,providers:[dS(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(lS,8),d.LFG(ki,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function V1(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new VC(n,e,t)}function U1(n,e,t={}){return t.useHash?new Ie(n,e):new ze(n,e)}function B1(n){return"guarded"}function dS(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:FC,multi:!0,useValue:n}]}let UC=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ka.x}appInitializer(){return this.injector.get(B,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(ki),h=this.injector.get(tp);return"disabled"===h.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?dt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(tp),o=this.injector.get(uS),u=this.injector.get(VC),h=this.injector.get(ki),m=this.injector.get(d.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),o.setUpPreloading(),u.init(),h.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function G1(n){return n.appInitializer.bind(n)}function q1(n){return n.bootstrapListener.bind(n)}const hS=new d.OlP("Router Initializer");let Zv=(()=>{class n{constructor(t,r){this.fireAuth=t,this.router=r,this.isLogin=new Oo(!1),this.isRegister=new Oo(!1),this.message="",this.regMessage=""}login(t,r){this.isLogin.next(!0),this.fireAuth.signInWithEmailAndPassword(t,r).then(()=>{this.isLogin.next(!1),this.router.navigate(["/system"]),localStorage.setItem("isLogin","true")},o=>{this.isLogin.next(!1),this.message=o.message})}register(t,r){this.isRegister.next(!0),this.fireAuth.createUserWithEmailAndPassword(t,r).then(()=>{this.isRegister.next(!1),this.router.navigate(["/login"])},o=>{this.isRegister.next(!1),this.regMessage=o.message})}clearValidation(t){return t.replace("Firebase:","")}logOut(){this.fireAuth.signOut().then(()=>{localStorage.removeItem("isLogin"),this.router.navigate(["/login"])},t=>{alert(t.message)})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(mC),d.LFG(ki))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),fS=(()=>{class n{constructor(t){this.afs=t,this.isLoaded=!1}getDoors(){return this.isLoaded=!0,this.afs.collection("/Doors").snapshotChanges()}getWindows(){return this.afs.collection("/Windows").snapshotChanges()}getBattery(){return this.afs.collection("/Battery").snapshotChanges()}getMotion(){return this.afs.collection("/Motion").snapshotChanges()}updateDoors(t,r){this.afs.collection("/Doors").doc(`${t}`).update({status:`${r}`})}updateWindow(t,r){this.afs.collection("/Windows").doc(`${t}`).update({status:`${r}`})}updateBattery(t){this.afs.collection("/Battery").doc("B1").update({status:`${t}`})}updateBatterybroken(t){this.afs.collection("/Battery").doc("B1").update({broken:`${t}`})}updateMotion(t){this.afs.collection("/Motion").doc("M1").update({status:`${t}`})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(sA))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pS=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),np=(()=>{class n extends pS{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const Ju=new d.OlP("NgValueAccessor"),K1={provide:Ju,useExisting:(0,d.Gpc)(()=>rp),multi:!0},Q1=new d.OlP("CompositionEventMode");let rp=(()=>{class n extends pS{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Y1(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(Q1,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[d._Bn([K1]),d.qOj]}),n})();const ss=new d.OlP("NgValidators"),yh=new d.OlP("NgAsyncValidators");function CS(n){return null!=n}function TS(n){const e=(0,d.QGY)(n)?(0,_n.D)(n):n;return(0,d.CqO)(e),e}function AS(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function SS(n,e){return e.map(t=>t(n))}function xS(n){return n.map(e=>function X1(n){return!n.validate}(e)?e:t=>e.validate(t))}function BC(n){return null!=n?function MS(n){if(!n)return null;const e=n.filter(CS);return 0==e.length?null:function(t){return AS(SS(t,e))}}(xS(n)):null}function jC(n){return null!=n?function RS(n){if(!n)return null;const e=n.filter(CS);return 0==e.length?null:function(t){return function z1(...n){const e=(0,Vi.jO)(n),{args:t,keys:r}=oA(n),o=new nr.y(u=>{const{length:h}=t;if(!h)return void u.complete();const m=new Array(h);let E=h,C=h;for(let M=0;M<h;M++){let N=!1;(0,dv.Xf)(t[M]).subscribe((0,Wr.x)(u,G=>{N||(N=!0,C--),m[M]=G},()=>E--,void 0,()=>{(!E||!N)&&(C||u.next(r?uA(r,m):m),u.complete())}))}});return e?o.pipe(aA(e)):o}(SS(t,e).map(TS)).pipe((0,Tt.U)(AS))}}(xS(n)):null}function NS(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function $C(n){return n?Array.isArray(n)?n:[n]:[]}function Hb(n,e){return Array.isArray(n)?n.includes(e):n===e}function PS(n,e){const t=$C(e);return $C(n).forEach(o=>{Hb(t,o)||t.push(o)}),t}function FS(n,e){return $C(e).filter(t=>!Hb(n,t))}class LS{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=BC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class _h extends LS{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Cs extends LS{get formDirective(){return null}get path(){return null}}class VS{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let zv=(()=>{class n extends VS{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(_h,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[d.qOj]}),n})(),HC=(()=>{class n extends VS{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Cs,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[d.qOj]}),n})();function Wv(n,e){ZC(n,e),e.valueAccessor.writeValue(n.value),function aR(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&BS(n,e)})}(n,e),function lR(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function uR(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&BS(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function oR(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function zb(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ZC(n,e){const t=function OS(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(NS(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function kS(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(NS(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();zb(e._rawValidators,o),zb(e._rawAsyncValidators,o)}function BS(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function KC(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Kv="VALID",Kb="INVALID",Tm="PENDING",Yv="DISABLED";function QC(n){return(Yb(n)?n.validators:n)||null}function GS(n){return Array.isArray(n)?BC(n):n||null}function JC(n,e){return(Yb(e)?e.asyncValidators:n)||null}function qS(n){return Array.isArray(n)?jC(n):n||null}function Yb(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const XC=n=>n instanceof tT;function zS(n){return(n=>n instanceof YS)(n)?n.value:n.getRawValue()}function WS(n,e){const t=XC(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[e])throw new d.vHH(1001,"")}function KS(n,e){XC(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new d.vHH(1002,"")})}class eT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=GS(this._rawValidators),this._composedAsyncValidatorFn=qS(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Kv}get invalid(){return this.status===Kb}get pending(){return this.status==Tm}get disabled(){return this.status===Yv}get enabled(){return this.status!==Yv}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=GS(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=qS(e)}addValidators(e){this.setValidators(PS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(PS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(FS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(FS(e,this._rawAsyncValidators))}hasValidator(e){return Hb(this._rawValidators,e)}hasAsyncValidator(e){return Hb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Tm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Yv,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Kv,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Kv||this.status===Tm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Yv:Kv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Tm,this._hasOwnPendingAsyncValidator=!0;const t=TS(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function fR(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=XC(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof gR)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?Yv:this.errors?Kb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Tm)?Tm:this._anyControlsHaveStatus(Kb)?Kb:Kv}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Yb(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class YS extends eT{constructor(e=null,t,r){super(QC(t),JC(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Yb(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){KC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){KC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class tT extends eT{constructor(e,t,r){super(QC(t),JC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){KS(this,e),Object.keys(e).forEach(r=>{WS(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=zS(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class gR extends eT{constructor(e,t,r){super(QC(t),JC(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){KS(this,e),e.forEach((r,o)=>{WS(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>zS(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const mR={provide:Cs,useExisting:(0,d.Gpc)(()=>Jv)},Qv=(()=>Promise.resolve(null))();let Jv=(()=>{class n extends Cs{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new tT({},BC(t),jC(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Qv.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Wv(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Qv.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Qv.then(()=>{const r=this._findContainer(t.path),o=new tT({});(function jS(n,e){ZC(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Qv.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Qv.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function HS(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(ss,10),d.Y36(yh,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([mR]),d.qOj]}),n})();const _R={provide:_h,useExisting:(0,d.Gpc)(()=>Am)},XS=(()=>Promise.resolve(null))();let Am=(()=>{class n extends _h{constructor(t,r,o,u,h){super(),this._changeDetectorRef=h,this.control=new YS,this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function WC(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===rp?t=u:function hR(n){return Object.getPrototypeOf(n.constructor)===np}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function zC(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Wv(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){XS.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;XS.then(()=>{var u;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function qb(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Cs,9),d.Y36(ss,10),d.Y36(yh,10),d.Y36(Ju,10),d.Y36(d.sBO,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([_R]),d.qOj,d.TTD]}),n})(),nT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const vR={provide:Ju,useExisting:(0,d.Gpc)(()=>rT),multi:!0};let rT=(()=>{class n extends np{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[d._Bn([vR]),d.qOj]}),n})(),ex=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),HR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[ex]]}),n})(),GR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[HR]}),n})();function qR(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li")(1,"span",11),d.NdJ("click",function(){const u=d.CHM(t).$implicit,h=d.oxw();return h.doorId=u.id,h.doorStatus=u.status}),d._uU(2),d.qZA()()}if(2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.id)}}function ZR(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"li")(1,"span",11),d.NdJ("click",function(){const u=d.CHM(t).$implicit,h=d.oxw();return h.windowId=u.id,h.windowStatus=u.status}),d._uU(2),d.qZA()()}if(2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.id)}}let _x=(()=>{class n{constructor(t,r,o){var u,h,m;this.afs=t,this.auth=r,this.data=o,this.x=new yn.w0,this.x2=new yn.w0,this.x3=new yn.w0,this.x4=new yn.w0,this.doorId="",this.windowId="",this.doorsList=[],this.windowsList=[],this.Battery=100,this.motion="not detected",this.doorStatus="",this.windowStatus="",this.batteryStatus=null===(u=this.Battery[0])||void 0===u?void 0:u.status,this.batterybroken=null===(h=this.Battery[0])||void 0===h?void 0:h.broken,this.motionStatus=null===(m=this.motion[0])||void 0===m?void 0:m.status}updateDoor(){this.data.updateDoors(this.doorId,this.doorStatus)}updateWindow(){this.data.updateWindow(this.windowId,this.windowStatus)}updateBattery(){this.data.updateBattery(this.batteryStatus)}updateBatterybroken(){this.data.updateBatterybroken(this.batterybroken)}updateMotion(){this.data.updateMotion(this.motionStatus)}getDoors(){this.x=this.data.getDoors().subscribe(t=>{this.doorsList=t.map(r=>{const o=r.payload.doc.data();return o.id=r.payload.doc.id,o})},t=>{alert("Error while fetching doors and windows data")})}getWindows(){this.x2=this.data.getWindows().subscribe(t=>{this.windowsList=t.map(r=>{const o=r.payload.doc.data();return o.id=r.payload.doc.id,o})},t=>{alert("Error while fetching doors and windows data")})}getBattery(){this.x2=this.data.getBattery().subscribe(t=>{this.Battery=t.map(r=>{const o=r.payload.doc.data();return o.id=r.payload.doc.id,o})},t=>{alert(t.message)})}getMotion(){this.x3=this.data.getMotion().subscribe(t=>{this.motion=t.map(r=>{const o=r.payload.doc.data();return o.id=r.payload.doc.id,console.log(o),o})},t=>{alert(t.message)})}logOut(){this.auth.logOut()}ngOnInit(){this.getDoors(),this.getWindows(),this.getBattery(),this.getMotion()}ngOnDestroy(){this.x.unsubscribe(),this.x2.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(sA),d.Y36(Zv),d.Y36(fS))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-sensor-inputs"]],decls:102,vars:18,consts:[[1,"alert","alert-dark","border","border-0","mb-0"],[1,"container"],[1,"row"],[1,"col-12","col-sm-6"],[1,"alert","alert-primary","mb-5"],[1,"mt-5"],[1,"input-group","mb-3"],["type","text","aria-label","Text input with dropdown button",1,"form-control",3,"ngModel","disabled","ngModelChange"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-outline-secondary","dropdown-toggle"],[1,"dropdown-menu","dropdown-menu-end"],[4,"ngFor","ngForOf"],[1,"dropdown-item",3,"click"],[1,"btn","btn-primary","mt-3",3,"click"],["type","number",1,"form-control",3,"value","ngModel","ngModelChange","keyup"],["type","text","aria-label","Text input with dropdown button",1,"form-control",3,"value","ngModel","disabled","ngModelChange"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3"),d._uU(6,"Doors"),d.qZA(),d.TgZ(7,"div")(8,"h5",5),d._uU(9,"ID:"),d.qZA(),d.TgZ(10,"div",6)(11,"input",7),d.NdJ("ngModelChange",function(u){return r.doorId=u}),d.qZA(),d.TgZ(12,"button",8),d._uU(13,"choose"),d.qZA(),d.TgZ(14,"ul",9),d.YNc(15,qR,3,1,"li",10),d.qZA()(),d.TgZ(16,"h5",5),d._uU(17,"Status:"),d.qZA(),d.TgZ(18,"div",6)(19,"input",7),d.NdJ("ngModelChange",function(u){return r.doorStatus=u}),d.qZA(),d.TgZ(20,"button",8),d._uU(21,"choose"),d.qZA(),d.TgZ(22,"ul",9)(23,"li")(24,"span",11),d.NdJ("click",function(){return r.doorStatus="open"}),d._uU(25,"open"),d.qZA()(),d.TgZ(26,"li")(27,"span",11),d.NdJ("click",function(){return r.doorStatus="close"}),d._uU(28,"close"),d.qZA()()()()(),d.TgZ(29,"button",12),d.NdJ("click",function(){return r.updateDoor()}),d._uU(30,"Sense"),d.qZA()()(),d.TgZ(31,"div",3)(32,"div",4)(33,"h3"),d._uU(34,"Windows"),d.qZA(),d.TgZ(35,"div")(36,"h5",5),d._uU(37,"ID:"),d.qZA(),d.TgZ(38,"div",6)(39,"input",7),d.NdJ("ngModelChange",function(u){return r.windowId=u}),d.qZA(),d.TgZ(40,"button",8),d._uU(41,"choose"),d.qZA(),d.TgZ(42,"ul",9),d.YNc(43,ZR,3,1,"li",10),d.qZA()(),d.TgZ(44,"h5",5),d._uU(45,"Status:"),d.qZA(),d.TgZ(46,"div",6)(47,"input",7),d.NdJ("ngModelChange",function(u){return r.windowStatus=u}),d.qZA(),d.TgZ(48,"button",8),d._uU(49,"choose"),d.qZA(),d.TgZ(50,"ul",9)(51,"li")(52,"span",11),d.NdJ("click",function(){return r.windowStatus="open"}),d._uU(53,"open"),d.qZA()(),d.TgZ(54,"li")(55,"span",11),d.NdJ("click",function(){return r.windowStatus="close"}),d._uU(56,"close"),d.qZA()()()()(),d.TgZ(57,"button",12),d.NdJ("click",function(){return r.updateWindow()}),d._uU(58,"Sense"),d.qZA()()(),d.TgZ(59,"div",3)(60,"div",4)(61,"h3"),d._uU(62,"Battery"),d.qZA(),d.TgZ(63,"div")(64,"h5",5),d._uU(65,"Charge:"),d.qZA(),d.TgZ(66,"input",13),d.NdJ("ngModelChange",function(u){return r.batteryStatus=u})("keyup",function(){return r.updateBattery()}),d.qZA(),d.TgZ(67,"h5",5),d._uU(68,"broken:"),d.qZA(),d.TgZ(69,"div",6)(70,"input",14),d.NdJ("ngModelChange",function(u){return r.batterybroken=u}),d.qZA(),d.TgZ(71,"button",8),d._uU(72,"choose"),d.qZA(),d.TgZ(73,"ul",9)(74,"li")(75,"span",11),d.NdJ("click",function(){return r.batterybroken="on"}),d._uU(76,"on"),d.qZA()(),d.TgZ(77,"li")(78,"span",11),d.NdJ("click",function(){return r.batterybroken="off"}),d._uU(79,"off"),d.qZA()()()(),d.TgZ(80,"button",12),d.NdJ("click",function(){return r.updateBatterybroken()}),d._uU(81,"Sense"),d.qZA()()()(),d.TgZ(82,"div",3)(83,"div",4)(84,"h3"),d._uU(85,"Motion"),d.qZA(),d.TgZ(86,"div")(87,"h5",5),d._uU(88,"Status:"),d.qZA(),d.TgZ(89,"div",6)(90,"input",14),d.NdJ("ngModelChange",function(u){return r.motionStatus=u}),d.qZA(),d.TgZ(91,"button",8),d._uU(92,"choose"),d.qZA(),d.TgZ(93,"ul",9)(94,"li")(95,"span",11),d.NdJ("click",function(){return r.motionStatus="detected"}),d._uU(96,"detected"),d.qZA()(),d.TgZ(97,"li")(98,"span",11),d.NdJ("click",function(){return r.motionStatus="not detected"}),d._uU(99,"not detected"),d.qZA()()()()(),d.TgZ(100,"button",12),d.NdJ("click",function(){return r.updateMotion()}),d._uU(101,"Sense"),d.qZA()()()()()()),2&t&&(d.xp6(11),d.Q6J("ngModel",r.doorId)("disabled",!0),d.xp6(4),d.Q6J("ngForOf",r.doorsList),d.xp6(4),d.Q6J("ngModel",r.doorStatus)("disabled",!0),d.xp6(20),d.Q6J("ngModel",r.windowId)("disabled",!0),d.xp6(4),d.Q6J("ngForOf",r.windowsList),d.xp6(4),d.Q6J("ngModel",r.windowStatus)("disabled",!0),d.xp6(19),d.s9C("value",null==r.Battery[0]?null:r.Battery[0].status),d.Q6J("ngModel",r.batteryStatus),d.xp6(4),d.s9C("value",null==r.Battery[0]?null:r.Battery[0].broken),d.Q6J("ngModel",r.batterybroken)("disabled",!0),d.xp6(20),d.s9C("value",null==r.motion[0]?null:r.motion[0].status),d.Q6J("ngModel",r.motionStatus)("disabled",!0))},directives:[rp,zv,Am,tr,rT],styles:[""]}),n})();function zR(n,e){1&n&&(d.TgZ(0,"div",9),d._UZ(1,"i",10),d.qZA())}function WR(n,e){if(1&n&&(d.TgZ(0,"div",61)(1,"div",62),d._UZ(2,"span",63),d._uU(3),d._UZ(4,"br"),d._uU(5),d.qZA()()),2&n){const t=e.$implicit;d.xp6(1),d.ekj("alert-danger","open"==t.status)("alert-success","close"==t.status),d.Q6J("id",t.id),d.xp6(1),d.Udp("background-color","open"==t.status?"#f5c2c7":"#badbcc"),d.xp6(1),d.hij(" ",t.id," "),d.xp6(2),d.hij(" ",t.status," ")}}function KR(n,e){if(1&n&&(d.TgZ(0,"div",61)(1,"div",64),d._UZ(2,"span",65),d._uU(3),d._UZ(4,"br"),d._uU(5),d.qZA()()),2&n){const t=e.$implicit;d.xp6(1),d.ekj("alert-danger","open"==t.status)("alert-warning","close"==t.status),d.Q6J("id",t.id),d.xp6(1),d.Udp("background-color","open"==t.status?"#f5c2c7":"#ffecb5"),d.xp6(1),d.hij(" ",t.id," "),d.xp6(2),d.hij(" ",t.status," ")}}function YR(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div")(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14),d._UZ(5,"i",15),d.TgZ(6,"h3",16),d._uU(7,"Burgular "),d._UZ(8,"br"),d._uU(9," Alarm "),d._UZ(10,"br"),d._uU(11," System"),d.qZA()()()(),d.TgZ(12,"div",17)(13,"div",13)(14,"div",18)(15,"div",19)(16,"div")(17,"label",20),d._uU(18," Clear-alarm command "),d.qZA(),d.TgZ(19,"input",21),d.NdJ("ngModelChange",function(o){return d.CHM(t),d.oxw().command=o})("keyup",function(){return d.CHM(t),d.oxw().checkCommand()}),d.qZA()()(),d.TgZ(20,"div",22)(21,"div")(22,"button",23),d.NdJ("click",function(){d.CHM(t);const o=d.oxw();return o.toggle=!o.toggle}),d._uU(23),d.qZA()()(),d.TgZ(24,"div",22)(25,"div")(26,"button",23),d.NdJ("click",function(){return d.CHM(t),d.oxw().logOut()}),d._uU(27,"logout "),d._UZ(28,"i",24),d.qZA()()()()()()(),d.TgZ(29,"div",11)(30,"div",25)(31,"div",26)(32,"div",27)(33,"div"),d._UZ(34,"i",28),d.TgZ(35,"div",29),d._uU(36," Doors"),d.qZA()(),d.TgZ(37,"div",30)(38,"div")(39,"div",31),d._UZ(40,"i",28),d.TgZ(41,"div",29),d._uU(42," Doors"),d.qZA()()()(),d.TgZ(43,"div",32)(44,"div",33),d.YNc(45,WR,6,9,"div",34),d.qZA()(),d.TgZ(46,"div"),d._UZ(47,"i",35),d.qZA()()()(),d.TgZ(48,"div",36)(49,"div",26)(50,"div",37)(51,"div"),d._UZ(52,"i",38),d.TgZ(53,"div",29),d._uU(54," Windows"),d.qZA()(),d.TgZ(55,"div",30)(56,"div")(57,"div",39),d._UZ(58,"i",38),d.TgZ(59,"div",29),d._uU(60," windows"),d.qZA()()()(),d.TgZ(61,"div",32)(62,"div",33),d.YNc(63,KR,6,9,"div",34),d.qZA()(),d.TgZ(64,"div"),d._UZ(65,"i",40),d.qZA()()()()(),d.TgZ(66,"div",41)(67,"div",42)(68,"div",43)(69,"div",44)(70,"span",45),d._uU(71," Battery "),d.qZA()(),d.TgZ(72,"div",46)(73,"div",18)(74,"div",47)(75,"div",48),d._uU(76),d.qZA()(),d.TgZ(77,"div",49)(78,"button",50),d.NdJ("click",function(){return d.CHM(t),d.oxw().batterySim(500)}),d._uU(79," start simulate"),d.qZA()(),d.TgZ(80,"div",49)(81,"button",51),d.NdJ("click",function(){return d.CHM(t),d.oxw().speedInterval()}),d._uU(82,"speed up"),d.qZA()(),d.TgZ(83,"div",49)(84,"button",52),d.NdJ("click",function(){return d.CHM(t),d.oxw().stopInterval()}),d._uU(85,"stop simulate"),d.qZA()()()(),d.TgZ(86,"div",53)(87,"div",18)(88,"div",54)(89,"span",55),d._UZ(90,"i"),d.qZA()(),d.TgZ(91,"div",54)(92,"span",56),d._UZ(93,"i"),d.qZA()(),d.TgZ(94,"div",54)(95,"span",57),d._UZ(96,"i"),d.qZA()(),d.TgZ(97,"div",54)(98,"span",57),d._UZ(99,"i"),d.qZA()()()()()(),d.TgZ(100,"div",42)(101,"div",43)(102,"div")(103,"span",45),d._uU(104," Motion "),d.qZA()(),d.TgZ(105,"div",46)(106,"div",58)(107,"div",59),d._UZ(108,"i",60),d.qZA()()()()()()()}if(2&n){const t=d.oxw();d.xp6(19),d.Q6J("ngModel",t.command),d.xp6(4),d.hij("Turn ",t.toggleOnOff()," toggle"),d.xp6(10),d.Gre("d-block d-sm-none col-12 rounded-top py-3 text-center door-label-mq door-card ",t.doorAlarm("card"),""),d.xp6(5),d.Gre("row rounded-top px-3 door-card ",t.doorAlarm("card"),""),d.xp6(7),d.Q6J("ngForOf",t.doorsList),d.xp6(1),d.Gre("col-12 text-center alert  mb-0 rounded-0 rounded-bottom ",t.callPolice("door","success",t.doorsList),""),d.xp6(5),d.Gre("d-block d-sm-none col-12 py-3 text-center window-card rounded-top ",t.windowAlarm("card"),""),d.xp6(5),d.Gre("row rounded-top window-card ",t.windowAlarm("card"),""),d.xp6(7),d.Q6J("ngForOf",t.windowsList),d.xp6(1),d.Gre("col-12 text-center alert mb-0 rounded-0 rounded-bottom  ",t.callPolice("window","warning",t.windowsList),""),d.xp6(12),d.hij(" ",t.batteryProgress()," "),d.xp6(2),d.Q6J("disabled",!t.disable),d.xp6(3),d.Q6J("disabled",t.disable),d.xp6(3),d.Q6J("disabled",t.disable),d.xp6(6),d.Gre("fa-solid fa-plug-circle-bolt fa-plug-circle-bolt-card-icon  ",t.batterybroken("card")," fs-4"),d.xp6(3),d.Gre("fa-solid fa-gears fa-gears-card-icon fs-4 ",t.powerSupplyTest("card"),""),d.xp6(3),d.Gre("fa-solid fa-screwdriver-wrench fa-screwdriver-wrench-card-icon  ",t.callTeknkn("card")," fs-4"),d.xp6(3),d.Gre("fa-solid fa-person-military-rifle police-battery fs-4 ",t.callPoliceBattery(),""),d.xp6(3),d.Gre("card-header motion-card ",t.motionAlarm("card"),"")}}let QR=(()=>{class n{constructor(t,r,o,u,h){this.data=t,this.auth=r,this.router=o,this.vcr=u,this.cfr=h,this.doorsList=[],this.windowsList=[],this.Battery=[],this.motion=[],this.doorsAlarm=[],this.windowsAlarm=[],this.toggle=!0,this.x=new yn.w0,this.x2=new yn.w0,this.x3=new yn.w0,this.x4=new yn.w0,this.isLoaded=!1,this.disable=!0,this.command="",this.stopToSynch=!1,this.getDoors(),this.getWindows(),this.getBattery(),this.getMotion()}getDoors(){this.isLoaded=!0,this.x=this.data.getDoors().subscribe(t=>{this.isLoaded=!1,this.doorsList=t.map(r=>{const o=r.payload.doc.data();return o.id=r.payload.doc.id,this.doorsAlarm.push(o),o})},t=>{this.isLoaded=!1,alert(t.message)})}getBattery(){this.x2=this.data.getBattery().subscribe(t=>{this.Battery=t.map(r=>{const o=r.payload.doc.data();return o.id=r.payload.doc.id,o})},t=>{alert(t.message)})}getMotion(){this.x3=this.data.getMotion().subscribe(t=>{this.motion=t.map(r=>{const o=r.payload.doc.data();return o.id=r.payload.doc.id,console.log(o),o})},t=>{alert(t.message)})}getWindows(){this.x4=this.data.getWindows().subscribe(t=>{this.windowsList=t.map(r=>{const o=r.payload.doc.data();return o.id=r.payload.doc.id,this.windowsAlarm.push(o),o})},t=>{alert(t.message)})}batterySim(t){var r;this.disable=!1;let o=null===(r=this.Battery[0])||void 0===r?void 0:r.status,u=this.Battery[0];this.decIntrv=setInterval(()=>{o>=85&&"off"==u.broken?(o--,this.data.updateBattery(o)):o<85&&"off"==u.broken?(clearInterval(this.decIntrv),this.incInterval=setInterval(()=>{100==o?(this.disable=!0,clearInterval(this.decIntrv),clearInterval(this.incInterval)):(o++,this.data.updateBattery(o))},t)):(o--,this.data.updateBattery(o),0==o&&(this.disable=!0,clearInterval(this.decIntrv)))},t)}stopInterval(){this.disable=!0,clearInterval(this.decIntrv),clearInterval(this.incInterval)}speedInterval(){clearInterval(this.decIntrv),clearInterval(this.incInterval),this.batterySim(250)}batteryProgress(){var t,r,o,u;$(".battery-prog").html(`<div class="progress-bar text-dark rounded-3 ${this.batteryDanger("card",null===(t=this.Battery[0])||void 0===t?void 0:t.status)} role="progressbar "\n      style="width: ${null===(r=this.Battery[0])||void 0===r?void 0:r.status}%" aria-valuenow="${null===(o=this.Battery[0])||void 0===o?void 0:o.status}"\n      aria-valuemin="0" aria-valuemax="100">${null===(u=this.Battery[0])||void 0===u?void 0:u.status}%</div>`)}toggleOnOff(){return 1==this.toggle?"off":"on"}batteryDanger(t,r){return r<=80?"card"==t?(1==this.toggle?$(".battery-prog").fadeToggle(500):$(".battery-prog").css({display:"block",opacity:"1"}),$(".battery-card").removeClass("bg-primary"),$(".battery-card").addClass("bg-danger"),"bg-danger"):"text-danger":"card"==t?($(".battery-prog").stop(),$(".battery-prog").css({opacity:1,display:"block"}),$(".battery-card").removeClass("bg-danger"),$(".battery-card").addClass("bg-primary"),"bg-primary"):"text-light"}batteryDangerNav(){let t=this.Battery[0];return(null==t?void 0:t.status)<=80?"text-danger":(null==t?void 0:t.status)>80&&(null==t?void 0:t.status)<=90?"text-primary":""}batterybroken(t){let r=this.Battery[0];return(null==r?void 0:r.status)<=90?("card"==t&&(1==this.toggle?$(".fa-plug-circle-bolt-card-icon").fadeToggle(500):$(".fa-plug-circle-bolt-card-icon").css({display:"block",opacity:"1"})),"text-primary"):("card"==t&&($(".fa-plug-circle-bolt-card-icon").stop(),$(".fa-plug-circle-bolt-card-icon").css("opacity",1)),"")}powerSupplyTest(t){let r=this.Battery[0];return(null==r?void 0:r.status)<=90?("card"==t&&(1==this.toggle?$(".fa-gears-card-icon").fadeToggle(500):$(".fa-gears-card-icon").css({display:"block",opacity:"1"})),"text-primary"):("card"==t&&($(".fa-gears-card-icon").stop(),$(".fa-gears-card-icon").css("opacity",1)),"")}callTeknkn(t){let r=this.Battery[0];return(null==r?void 0:r.status)<=80?("card"==t&&(1==this.toggle?$(".fa-screwdriver-wrench-card-icon").fadeToggle(500):$(".fa-screwdriver-wrench-card-icon").css({display:"block",opacity:"1"})),"text-primary"):("card"==t&&($(".fa-screwdriver-wrench-card-icon").stop(),$(".fa-screwdriver-wrench-card-icon").css("opacity",1)),"")}callPolice(t,r,o){return o.some(u=>"open"===u.status)?(1==this.toggle?$(`.${t}-police`).fadeToggle(500):$(`.${t}-police`).css({display:"block",opacity:"1"}),"alert-danger"):($(`.${t}-police`).stop(),$(`.${t}-police`).css("opacity",1),`alert-${r}`)}callPoliceBattery(){var t;return(null===(t=this.Battery[0])||void 0===t?void 0:t.status)<=80?(1==this.toggle?$(".police-battery").fadeToggle(500):$(".police-battery").css({display:"block",opacity:"1"}),"text-primary"):($(".police-battery").stop(),"")}callPoliceNav(){var t;return this.windowsList.some(r=>"open"===r.status)||this.doorsList.some(r=>"open"===r.status)||(null===(t=this.Battery[0])||void 0===t?void 0:t.status)<=80?"text-primary":""}doorAlarm(t){var r;let o="";for(let u=0;u<this.doorsList.length;u++){if("open"==(null===(r=this.doorsList[u])||void 0===r?void 0:r.status)){o="card"==t?"bg-danger":"text-danger";break}o="card"==t?"bg-success":"text-light"}return o}windowAlarm(t){var r;let o="";for(let u=0;u<this.windowsList.length;u++){if("open"==(null===(r=this.windowsList[u])||void 0===r?void 0:r.status)){o="card"==t?"bg-danger":"text-danger";break}o="card"==t?"bg-warning":"text-light"}return o}motionAlarm(t){var r;return"detected"==(null===(r=this.motion[0])||void 0===r?void 0:r.status)?"card"==t?($(".fa-person-walking-card-icon").addClass("text-danger"),1==this.toggle?$(".fa-person-walking-card-icon").fadeToggle(500):$(".fa-person-walking-card-icon").css({display:"block",opacity:"1"}),"bg-danger"):"text-danger":"card"==t?($(".fa-person-walking-card-icon").removeClass("text-danger"),$(".fa-person-walking").stop(),"bg-dark"):"text-light"}showSensorInputs(){$(".fa-chevron-up").toggleClass(["fa-rotate-180"]),$(".sensor-inputs").slideToggle()}checkCommand(){"stop"==this.command&&(this.doorsList.map(t=>{this.data.updateDoors(t.id,"close")}),this.windowsList.map(t=>{this.data.updateWindow(t.id,"close")}),this.Battery.map(t=>{this.data.updateBattery(100)}),this.motion.map(t=>{this.data.updateMotion("not detected")}))}logOut(){this.auth.logOut()}synchToggle(){this.stopToSynch=!0,this.stopToSynch=!1}ngOnInit(){setInterval(()=>{var t;for(let r=0;r<this.doorsAlarm.length;r++)"open"==(null===(t=this.doorsAlarm[r])||void 0===t?void 0:t.status)?1==this.toggle?$("#"+this.doorsAlarm[r].id).fadeToggle(500):$("#"+this.doorsAlarm[r].id).css({display:"block",opacity:"1"}):$("#"+this.doorsAlarm[r].id).stop()},500),setInterval(()=>{var t;for(let r=0;r<this.windowsAlarm.length;r++)"open"==(null===(t=this.windowsAlarm[r])||void 0===t?void 0:t.status)?1==this.toggle?$("#"+this.windowsAlarm[r].id).fadeToggle(500):$("#"+this.windowsAlarm[r].id).css({display:"block",opacity:"1"}):$("#"+this.windowsAlarm[r].id).stop()},500)}ngOnDestroy(){this.router.navigate(["/system"]),console.log(1),this.x.unsubscribe(),this.x2.unsubscribe(),this.x3.unsubscribe(),this.x4.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(fS),d.Y36(Zv),d.Y36(ki),d.Y36(d.s_b),d.Y36(d._Vd))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-system"]],decls:18,vars:26,consts:[["class","loading d-flex justify-content-center align-items-center vh-100 w-100 position-absolute top-0 right-0 alert alert-dark border border-0","style","z-index: 9999999999999999999999999999999999999999999999999999999999;",4,"ngIf"],[1,"alert","alert-dark","border-0","mb-5","pb-5","rounded-0"],[4,"ngIf"],[1,"shadow-lg","w-100","fixed-bottom","text-light",2,"background-color","#043158"],[1,"text-center","p-0",3,"click"],[1,"fa-solid","fa-chevron-up"],[1,"w-100","my-0"],[1,"d-flex","justify-content-around","my-2","px-2"],[1,"sensor-inputs","mb-0",2,"height","200px","overflow-x","hidden","overflow-y","scroll","display","none"],[1,"loading","d-flex","justify-content-center","align-items-center","vh-100","w-100","position-absolute","top-0","right-0","alert","alert-dark","border","border-0",2,"z-index","9999999999999999999999999999999999999999999999999999999999"],[1,"fa-solid","fa-shield-halved","text-info","fa-beat","fa-7x",2,"--fa-animation-duration","1s","--fa-beat-scale","1.3"],[1,"row"],[1,"col-12","col-sm-4"],[1,"m-auto","mq","comp-shadow","position-relative","rounded-3","mb-4","p-4","alert","alert-info","bg","bg-opacity-10"],[1,"row","py-md-3","pe-3"],[1,"fa-solid","fa-shield-halved","text-info","fa-6x","col-12","col-md-6"],[1,"d-inline-block","mb-0","col-12","col-md-6"],[1,"col-12","col-sm-8"],[1,"row","gy-3"],[1,"col-12","text-start"],[1,"fs-5","mt-3","mt-sm-1"],["type","text","placeholder"," type 'stop' to clear all ALARMS",1,"form-control","bg-info","bg-opacity-10","border","border-info",3,"ngModel","ngModelChange","keyup"],[1,"col-md-6"],[1,"btn","btn-outline-info","w-100",3,"click"],[1,"fa-solid","fa-right-from-bracket","ms-2"],[1,"col-6","col-sm-12","col-md-12","mb-3","element-comp"],[1,"m-auto","mq","comp-shadow","position-relative","rounded-3","bg-light"],[1,"row","m-auto"],[1,"fa-solid","fa-door-closed","fa-4x","text-light"],[1,"fs-3","text-light"],[1,"col-2","align-items-stretch","d-none","d-sm-flex"],[1,"col-12","col-12","text-center","py-3","m-auto"],[1,"col-10","py-3"],[1,"row","mb-2","ms-3","ms-sm-5"],["class","col-12 col-sm-6 col-md-4 text-center",4,"ngFor","ngForOf"],[1,"fa-solid","fa-person-military-rifle","fa-6x","door-police"],[1,"col-6","col-sm-12","col-md-12","element-comp"],[1,"row","m-auto","mt-0","mt-sm-5","rounded-3"],[1,"fa-solid","fa-table-columns","fa-4x","text-light"],[1,"col-12","text-center","py-3","m-auto"],[1,"fa-solid","fa-person-military-rifle","fa-6x","window-police"],[1,"row","mt-4"],[1,"col-6","mt-3","element-2-comp"],[1,"card","comp-shadow","border","border-0"],[1,"card-header","battery-card","bg-primary"],[1,"text-light"],[1,"card-body"],[1,"col-12"],[1,"blockquote","mb-0","battery-prog","border","border-3","border-dark","rounded-3","p-1","m-auto",2,"width","150px"],[1,"col-6","col-md-4"],[1,"btn","btn-outline-info","px-1",3,"disabled","click"],[1,"btn","btn-outline-info","px-3",3,"disabled","click"],[1,"btn","btn-outline-info","px-2",3,"disabled","click"],[1,"card-footer","text-muted"],[1,"col-3","text-center"],["tabindex","0","data-bs-toggle","popover","data-bs-trigger","hover focus","data-bs-content","broken",1,"d-inline-block"],["tabindex","0","data-bs-toggle","popover","data-bs-trigger","hover focus","data-bs-content","testing",1,"d-inline-block"],["tabindex","0","data-bs-toggle","popover","data-bs-trigger","hover focus","data-bs-content","call technichan",1,"d-inline-block"],[1,"blockquote"],[1,"text-center"],[1,"fa-solid","fa-person-walking","fa-person-walking-card-icon","fa-4x"],[1,"col-12","col-sm-6","col-md-4","text-center"],["role","alert",1,"alert","alert-success","position-relative","border-3","door-alarm",2,"width","130px","height","155px",3,"id"],[1,"rounded-circle","position-absolute","top-50","end-0","me-2",2,"width","10px","height","10px","background-color","#badbcc"],["role","alert",1,"alert","alert-warning","position-relative","border-3","door-alarm",2,"width","140px","height","110px",3,"id"],[1,"rounded-circle","position-absolute","top-50","end-0","me-2",2,"width","10px","height","10px","background-color","#ffecb5"]],template:function(t,r){1&t&&(d.YNc(0,zR,2,0,"div",0),d.TgZ(1,"div",1),d.YNc(2,YR,109,41,"div",2),d.qZA(),d.TgZ(3,"div",3)(4,"div",4),d.NdJ("click",function(){return r.showSensorInputs()}),d._UZ(5,"i",5),d.qZA(),d._UZ(6,"hr",6),d.TgZ(7,"div",7),d._UZ(8,"i")(9,"i")(10,"i")(11,"i")(12,"i")(13,"i")(14,"i")(15,"i"),d.qZA(),d.TgZ(16,"div",8),d._UZ(17,"app-sensor-inputs"),d.qZA()()),2&t&&(d.Q6J("ngIf",r.isLoaded),d.xp6(2),d.Q6J("ngIf",!r.isLoaded),d.xp6(6),d.Gre("fa-solid  fa-gears fa-gears-nav-icon  ",r.powerSupplyTest("nav"),""),d.xp6(1),d.Gre("fa-solid fa-plug-circle-bolt   ",r.batterybroken("nav"),""),d.xp6(1),d.Gre("fa-solid fa-screwdriver-wrench  ",r.callTeknkn("nav"),""),d.xp6(1),d.Gre("fa-solid fa-person-military-rifle ",r.callPoliceNav()," "),d.xp6(1),d.Gre("fa-solid fa-door-open  ",r.doorAlarm("nav")," "),d.xp6(1),d.Gre("fa-solid fa-table-columns fa-table-columns-nav-icon ",r.windowAlarm("nav")," "),d.xp6(1),d.Gre("fa-solid fa-person-walking   ",r.motionAlarm("nav")," "),d.xp6(1),d.Gre("fa-solid fa-battery-three-quarters battery-nav-icon  ",r.batteryDangerNav()," "))},directives:[Pr,rp,zv,Am,tr,_x],styles:[".comp-shadow[_ngcontent-%COMP%]{box-shadow:0 1rem 3rem #00000026;bottom:-5px;transition:.2s}.comp-shadow[_ngcontent-%COMP%]:hover{box-shadow:0 1rem 3rem #0000004d;bottom:5px}.h-battery[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%], .door-card[_ngcontent-%COMP%], .window-card[_ngcontent-%COMP%], .motion-card[_ngcontent-%COMP%]{transition:1s}.offcanvas-start[_ngcontent-%COMP%]{width:100px}.rotate[_ngcontent-%COMP%]{transform:rotate(180deg)}.mt-mine[_ngcontent-%COMP%]{margin-top:19.5px}@media screen and (max-width: 440px) and (min-width: 0px){.element-comp[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 460px) and (min-width: 0px){.element-2-comp[_ngcontent-%COMP%]{width:100%}}"]}),n})();function JR(n,e){if(1&n&&(d.TgZ(0,"div",14),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Oqu(t.auth.clearValidation(t.auth.regMessage))}}function XR(n,e){1&n&&(d.TgZ(0,"span"),d._uU(1,"submit"),d.qZA())}function eN(n,e){1&n&&(d.TgZ(0,"span"),d._UZ(1,"i",15),d.qZA())}let tN=(()=>{class n{constructor(t){this.auth=t,this.email="",this.password=""}register(){""!=this.email&&""!=this.password?this.auth.register(this.email,this.password):this.auth.regMessage="please fill all inputs"}ngOnInit(){$("#background").particleground({dotColor:"#6291ae",lineColor:"#6291ae",proximity:200,minSpeedX:0,minSpeedY:0,maxSpeedY:0,maxSpeedX:0,density:16e3}),this.auth.regMessage=""}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Zv))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-register"]],decls:23,vars:6,consts:[["id","background",1,"w-100","vh-100","position-relative","register"],[1,"top-50","start-50","position-absolute","translate-middle","rounded-3","reg-cont"],[1,"p-3","text-white","text-opacity-75"],[1,"mb-3"],[1,""],["for","exampleInputEmail1",1,"form-label","fs-5"],["type","email","placeholder","email","name","email",1,"form-control","bg-dark","bg-opacity-25","border-0","text-dark",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label","fs-5"],["type","password","placeholder","password","name","password",1,"form-control","bg-dark","bg-opacity-25","border-0",3,"ngModel","ngModelChange"],["class","text-danger mb-2",4,"ngIf"],["type","submit",1,"btn","btn-primary","w-25","ps-2","ps-sm-3",3,"disabled","click"],[4,"ngIf"],[1,"mt-2","fs-6"],["routerLink","/login",1,"text-primary",2,"cursor","pointer"],[1,"text-danger","mb-2"],[1,"fa-solid","fa-circle-notch","fa-spin",2,"--fa-animation-duration",".7s"]],template:function(t,r){1&t&&(d._UZ(0,"div",0),d.TgZ(1,"div",1)(2,"div",2)(3,"form")(4,"div",3)(5,"h1",4),d._uU(6,"register"),d.qZA()(),d.TgZ(7,"div",3)(8,"label",5),d._uU(9,"Email "),d.qZA(),d.TgZ(10,"input",6),d.NdJ("ngModelChange",function(u){return r.email=u}),d.qZA()(),d.TgZ(11,"div",3)(12,"label",7),d._uU(13,"Password"),d.qZA(),d.TgZ(14,"input",8),d.NdJ("ngModelChange",function(u){return r.password=u}),d.qZA()(),d.YNc(15,JR,2,1,"div",9),d.TgZ(16,"button",10),d.NdJ("click",function(){return r.register()}),d.YNc(17,XR,2,0,"span",11),d.YNc(18,eN,2,0,"span",11),d.qZA()(),d.TgZ(19,"div",12),d._uU(20,"Have an account ?"),d.TgZ(21,"span",13),d._uU(22," login"),d.qZA()()()()),2&t&&(d.xp6(10),d.Q6J("ngModel",r.email),d.xp6(4),d.Q6J("ngModel",r.password),d.xp6(1),d.Q6J("ngIf",r.auth.regMessage),d.xp6(1),d.Q6J("disabled",r.auth.isRegister.value),d.xp6(1),d.Q6J("ngIf",!r.auth.isRegister.value),d.xp6(1),d.Q6J("ngIf",r.auth.isRegister.value))},directives:[nT,HC,Jv,rp,zv,Am,Pr,qv],styles:[".register[_ngcontent-%COMP%]{min-height:100vh;background-color:#212529}.reg-cont[_ngcontent-%COMP%]{width:400px;height:430px;background-color:#cfe2ff2d;box-shadow:0 1rem 3rem #0000004d}@media screen and (max-width: 575px) and (min-width: 0px){.reg-cont[_ngcontent-%COMP%]{width:300px;height:450px}}"]}),n})();function nN(n,e){if(1&n&&(d.TgZ(0,"div",18),d._uU(1),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Oqu(t.auth.clearValidation(t.auth.message))}}function rN(n,e){1&n&&(d.TgZ(0,"span"),d._uU(1,"submit"),d.qZA())}function iN(n,e){1&n&&(d.TgZ(0,"span"),d._UZ(1,"i",19),d.qZA())}function sN(n,e){1&n&&(d.TgZ(0,"span"),d._uU(1,"try free access"),d.qZA())}function oN(n,e){1&n&&(d.TgZ(0,"span"),d._UZ(1,"i",19),d.qZA())}const aN=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:(()=>{class n{constructor(t,r){this.auth=t,this.router=r,this.email="",this.password="",this.access=!1,this.freeEmail="ooo@ooo.com",this.freePass="ooo123"}freeAccess(){this.access=!0,this.email=this.freeEmail,this.password=this.freePass,this.auth.login(this.email,this.password)}login(){""!=this.email&&""!=this.password?this.auth.login(this.email,this.password):this.auth.message="please fill all inputs"}ngOnInit(){$("#background").particleground({dotColor:"#6291ae",lineColor:"#6291ae",proximity:200,minSpeedX:0,minSpeedY:0,maxSpeedY:0,maxSpeedX:0,density:16e3}),this.auth.message=""}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Zv),d.Y36(ki))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],decls:30,vars:9,consts:[["id","login"],["id","background",1,"position-relative","overflow-hidden","vh-100","login"],[1,"login-cont","top-50","start-50","position-absolute","translate-middle","rounded-3","login-cont"],[1,"p-3","text-white","text-opacity-75"],[1,"mb-3"],[1,""],["for","exampleInputEmail1",1,"form-label","fs-5"],["type","email","placeholder","email","name","email",1,"form-control","bg-dark","bg-opacity-25","border-0","text-dark",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label","fs-5"],["type","password","placeholder","password","name","password",1,"form-control","bg-dark","bg-opacity-25","border-0",3,"ngModel","ngModelChange"],["class","text-danger mb-2",4,"ngIf"],[1,"mt-1","mb-3"],["type","submit",1,"btn","btn-primary","w-25","ps-2","ps-sm-3","py-3","py-sm-1",3,"disabled","click"],[4,"ngIf"],[1,"mx-2"],["type","submit",1,"btn","btn-success","w-50",3,"disabled","click"],[1,"mt-2","fs-6"],["routerLink","/register",1,"text-primary",2,"cursor","pointer"],[1,"text-danger","mb-2"],[1,"fa-solid","fa-circle-notch","fa-spin",2,"--fa-animation-duration",".7s"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"div",1),d.TgZ(2,"div",2)(3,"div",3)(4,"form")(5,"div",4)(6,"h1",5),d._uU(7,"login"),d.qZA()(),d.TgZ(8,"div",4)(9,"label",6),d._uU(10,"Email "),d.qZA(),d.TgZ(11,"input",7),d.NdJ("ngModelChange",function(u){return r.email=u}),d.qZA()(),d.TgZ(12,"div",4)(13,"label",8),d._uU(14,"Password"),d.qZA(),d.TgZ(15,"input",9),d.NdJ("ngModelChange",function(u){return r.password=u}),d.qZA()(),d.YNc(16,nN,2,1,"div",10),d.TgZ(17,"div",11)(18,"button",12),d.NdJ("click",function(){return r.login()}),d.YNc(19,rN,2,0,"span",13),d.YNc(20,iN,2,0,"span",13),d.qZA(),d.TgZ(21,"span",14),d._uU(22,"or"),d.qZA(),d.TgZ(23,"button",15),d.NdJ("click",function(){return r.freeAccess()}),d.YNc(24,sN,2,0,"span",13),d.YNc(25,oN,2,0,"span",13),d.qZA()()(),d.TgZ(26,"div",16),d._uU(27,"Need Account ?"),d.TgZ(28,"span",17),d._uU(29," register"),d.qZA()()()()()),2&t&&(d.xp6(11),d.Q6J("ngModel",r.email),d.xp6(4),d.Q6J("ngModel",r.password),d.xp6(1),d.Q6J("ngIf",r.auth.message),d.xp6(2),d.Q6J("disabled",r.auth.isLogin.value&&!r.access),d.xp6(1),d.Q6J("ngIf",!r.auth.isLogin.value||r.access),d.xp6(1),d.Q6J("ngIf",r.auth.isLogin.value&&!r.access),d.xp6(3),d.Q6J("disabled",r.access),d.xp6(1),d.Q6J("ngIf",!r.access),d.xp6(1),d.Q6J("ngIf",r.access))},directives:[nT,HC,Jv,rp,zv,Am,Pr,qv],styles:["#login[_ngcontent-%COMP%]{min-height:100vh;background-color:#212529}.login-cont[_ngcontent-%COMP%]{width:400px;height:430px;background-color:#cfe2ff2d;box-shadow:0 1rem 3rem #0000004d}@media screen and (max-width: 575px) and (min-width: 0px){.login-cont[_ngcontent-%COMP%]{width:300px;height:450px}}"]}),n})()},{path:"register",component:tN},{path:"system",component:QR,canActivate:[(()=>{class n{constructor(t,r){this.router=t,this.auth=r}canActivate(){return"true"==localStorage.getItem("isLogin")||(this.router.navigate(["/login"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ki),d.LFG(Zv))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"sensor-inputs",component:_x}];let uN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[cS.forRoot(aN,{useHash:!0})],cS]}),n})(),lN=(()=>{class n{constructor(){this.title="demo"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:[NC],styles:[""]}),n})(),cN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[lN]}),n.\u0275inj=d.cJS({providers:[],imports:[[Ca,uN,ir.hO.initializeApp(Mm_firebase),GR]]}),n})();(0,d.G48)(),ll().bootstrapModule(cN).catch(n=>console.error(n))},5867:(st,Te,k)=>{k.d(Te,{C6:()=>d.getApps,Mq:()=>d.getApp});var d=k(9681);(0,d.registerVersion)("firebase","9.6.11","app")},127:(st,Te,k)=>{k.d(Te,{Z:()=>d.Z});var d=k(3942);d.Z.registerVersion("firebase","9.6.11","app-compat")},820:(st,Te,k)=>{k.r(Te);var d=k(5861),W=k(3942),O=k(2090),oe=k(9681),X=k(655),pe=k(1877),ie=k(4859);const Re=function qe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Pe=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),et=new pe.Yd("@firebase/auth");function ze(y,...f){et.logLevel<=pe.in.ERROR&&et.error(`Auth (${oe.SDK_VERSION}): ${y}`,...f)}function Ie(y,...f){throw Be(y,...f)}function _e(y,...f){return Be(y,...f)}function ve(y,f,g){const v=Object.assign(Object.assign({},Pe()),{[f]:g});return new O.LL("auth","Firebase",v).create(f,{appName:y.name})}function je(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Ie(y,"argument-error"),ve(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(y,...f){if("string"!=typeof y){const g=f[0],v=[...f.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(g,...v)}return fe.create(y,...f)}function ne(y,f,...g){if(!y)throw Be(f,...g)}function Ze(y){const f="INTERNAL ASSERTION FAILED: "+y;throw ze(f),new Error(f)}function J(y,f){y||Ze(f)}const se=new Map;function te(y){J(y instanceof Function,"Expected a class definition");let f=se.get(y);return f?(J(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,se.set(y,f),f)}function ke(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function bt(){return"http:"===jt()||"https:"===jt()}function jt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Lt{constructor(f,g){this.shortDelay=f,this.longDelay=g,J(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function nn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(bt()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Qn(y,f){J(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class Cn{static initialize(f,g,v){this.fetchImpl=f,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ze("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ze("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ze("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},gi=new Lt(3e4,6e4);function $t(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Vt(y,f,g,v){return hr.apply(this,arguments)}function hr(){return(hr=(0,d.Z)(function*(y,f,g,v,T={}){return Xr(y,T,(0,d.Z)(function*(){let R={},q={};v&&("GET"===f?q=v:R={body:JSON.stringify(v)});const re=(0,O.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),Le=yield y._getAdditionalHeaders();return Le["Content-Type"]="application/json",y.languageCode&&(Le["X-Firebase-Locale"]=y.languageCode),Cn.fetch()(kr(y,y.config.apiHost,g,re),Object.assign({method:f,headers:Le,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Xr(y,f,g){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,d.Z)(function*(y,f,g){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Kt),f);try{const T=new as(y),R=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const q=yield R.json();if("needConfirmation"in q)throw us(y,"account-exists-with-different-credential",q);if(R.ok&&!("errorMessage"in q))return q;{const re=R.ok?q.errorMessage:q.error.message,[Le,Qe]=re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw us(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===Le)throw us(y,"email-already-in-use",q);const ht=v[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Qe)throw ve(y,ht,Qe);Ie(y,ht)}}catch(T){if(T instanceof O.ZR)throw T;Ie(y,"network-request-failed")}})).apply(this,arguments)}function Or(y,f,g,v){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,d.Z)(function*(y,f,g,v,T={}){const R=yield Vt(y,f,g,v,T);return"mfaPendingCredential"in R&&Ie(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function kr(y,f,g,v){const T=`${f}${g}?${v}`;return y.config.emulator?Qn(y.config,T):`${y.config.apiScheme}://${T}`}class as{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(_e(this.auth,"network-request-failed")),gi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function us(y,f,g){const v={appName:y.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const T=_e(y,f,v);return T.customData._tokenResponse=g,T}function $r(){return($r=(0,d.Z)(function*(y,f){return Vt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Jn(y,f){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,d.Z)(function*(y,f){return Vt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ei(y,f){return no.apply(this,arguments)}function no(){return(no=(0,d.Z)(function*(y,f){return Vt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function mn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function ma(){return(ma=(0,d.Z)(function*(y,f=!1){const g=(0,O.m9)(y),v=yield g.getIdToken(f),T=rt(v);ne(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,q=null==R?void 0:R.sign_in_provider;return{claims:T,token:v,authTime:mn(Ut(T.auth_time)),issuedAtTime:mn(Ut(T.iat)),expirationTime:mn(Ut(T.exp)),signInProvider:q||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Ut(y){return 1e3*Number(y)}function rt(y){const[f,g,v]=y.split(".");if(void 0===f||void 0===g||void 0===v)return ze("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(g);return T?JSON.parse(T):(ze("Failed to decode base64 JWT payload"),null)}catch(T){return ze("Caught error parsing JWT payload as JSON",T),null}}function fr(y,f){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,d.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(v){throw v instanceof O.ZR&&Pt(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Pt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class ro{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(f);this.timerId=setTimeout((0,d.Z)(function*(){yield g.iteration()}),v)}iteration(){var f=this;return(0,d.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class br{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=mn(this.lastLoginAt),this.creationTime=mn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function pr(y){return ut.apply(this,arguments)}function ut(){return(ut=(0,d.Z)(function*(y){var f;const g=y.auth,v=yield y.getIdToken(),T=yield fr(y,ei(g,{idToken:v}));ne(null==T?void 0:T.users.length,g,"internal-error");const R=T.users[0];y._notifyReloadListener(R);const q=(null===(f=R.providerUserInfo)||void 0===f?void 0:f.length)?De(R.providerUserInfo):[],re=We(y.providerData,q),ht=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==re?void 0:re.length)),ot={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:re,metadata:new br(R.createdAt,R.lastLoginAt),isAnonymous:ht};Object.assign(y,ot)})).apply(this,arguments)}function Rt(){return(Rt=(0,d.Z)(function*(y){const f=(0,O.m9)(y);yield pr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function We(y,f){return[...y.filter(v=>!f.some(T=>T.providerId===v.providerId)),...f]}function De(y){return y.map(f=>{var{providerId:g}=f,v=(0,X._T)(f,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function lt(){return(lt=(0,d.Z)(function*(y,f){const g=yield Xr(y,{},(0,d.Z)(function*(){const v=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:R}=y.config,q=kr(y,T,"/v1/token",`key=${R}`),re=yield y._getAdditionalHeaders();return re["Content-Type"]="application/x-www-form-urlencoded",Cn.fetch()(q,{method:"POST",headers:re,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class kt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ne(f.idToken,"internal-error"),ne(void 0!==f.idToken,"internal-error"),ne(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function mt(y){const f=rt(y);return ne(f,"internal-error"),ne(void 0!==f.exp,"internal-error"),ne(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var v=this;return(0,d.Z)(function*(){return ne(!v.accessToken||v.refreshToken,f,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(f,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var v=this;return(0,d.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:q}=yield function Je(y,f){return lt.apply(this,arguments)}(f,g);v.updateTokensAndExpiration(T,R,Number(q))})()}updateTokensAndExpiration(f,g,v){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(f,g){const{refreshToken:v,accessToken:T,expirationTime:R}=g,q=new kt;return v&&(ne("string"==typeof v,"internal-error",{appName:f}),q.refreshToken=v),T&&(ne("string"==typeof T,"internal-error",{appName:f}),q.accessToken=T),R&&(ne("number"==typeof R,"internal-error",{appName:f}),q.expirationTime=R),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new kt,this.toJSON())}_performRefresh(){return Ze("not implemented")}}function St(y,f){ne("string"==typeof y||void 0===y,"internal-error",{appName:f})}class U{constructor(f){var{uid:g,auth:v,stsTokenManager:T}=f,R=(0,X._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ro(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new br(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,d.Z)(function*(){const v=yield fr(g,g.stsTokenManager.getToken(g.auth,f));return ne(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(f){return function As(y){return ma.apply(this,arguments)}(this,f)}reload(){return function Ir(y){return Rt.apply(this,arguments)}(this)}_assign(f){this!==f&&(ne(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new U(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var v=this;return(0,d.Z)(function*(){let T=!1;f.idToken&&f.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(f),T=!0),g&&(yield pr(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var f=this;return(0,d.Z)(function*(){const g=yield f.getIdToken();return yield fr(f,function at(y,f){return $r.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var v,T,R,q,re,Le,Qe,ht;const ot=null!==(v=g.displayName)&&void 0!==v?v:void 0,In=null!==(T=g.email)&&void 0!==T?T:void 0,Jr=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,Bl=null!==(q=g.photoURL)&&void 0!==q?q:void 0,jl=null!==(re=g.tenantId)&&void 0!==re?re:void 0,Io=null!==(Le=g._redirectEventId)&&void 0!==Le?Le:void 0,pd=null!==(Qe=g.createdAt)&&void 0!==Qe?Qe:void 0,kp=null!==(ht=g.lastLoginAt)&&void 0!==ht?ht:void 0,{uid:zs,emailVerified:xu,isAnonymous:gd,providerData:Mu,stsTokenManager:$l}=g;ne(zs&&$l,f,"internal-error");const Pp=kt.fromJSON(this.name,$l);ne("string"==typeof zs,f,"internal-error"),St(ot,f.name),St(In,f.name),ne("boolean"==typeof xu,f,"internal-error"),ne("boolean"==typeof gd,f,"internal-error"),St(Jr,f.name),St(Bl,f.name),St(jl,f.name),St(Io,f.name),St(pd,f.name),St(kp,f.name);const Do=new U({uid:zs,auth:f,email:In,emailVerified:xu,displayName:ot,isAnonymous:gd,photoURL:Bl,phoneNumber:Jr,tenantId:jl,stsTokenManager:Pp,createdAt:pd,lastLoginAt:kp});return Mu&&Array.isArray(Mu)&&(Do.providerData=Mu.map(Fp=>Object.assign({},Fp))),Io&&(Do._redirectEventId=Io),Do}static _fromIdTokenResponse(f,g,v=!1){return(0,d.Z)(function*(){const T=new kt;T.updateFromServerResponse(g);const R=new U({uid:g.localId,auth:f,stsTokenManager:T,isAnonymous:v});return yield pr(R),R})()}}const H=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(g,v){var T=this;return(0,d.Z)(function*(){T.storage[g]=v})()}_get(g){var v=this;return(0,d.Z)(function*(){const T=v.storage[g];return void 0===T?null:T})()}_remove(g){var v=this;return(0,d.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return y.type="NONE",y})();function le(y,f,g){return`firebase:${y}:${f}:${g}`}class K{constructor(f,g,v){this.persistence=f,this.auth=g,this.userKey=v;const{config:T,name:R}=this.auth;this.fullUserKey=le(this.userKey,T.apiKey,R),this.fullPersistenceKey=le("persistence",T.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,d.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?U._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,d.Z)(function*(){if(g.persistence===f)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,v="authUser"){return(0,d.Z)(function*(){if(!g.length)return new K(te(H),f,v);const T=(yield Promise.all(g.map(function(){var Qe=(0,d.Z)(function*(ht){if(yield ht._isAvailable())return ht});return function(ht){return Qe.apply(this,arguments)}}()))).filter(Qe=>Qe);let R=T[0]||te(H);const q=le(v,f.config.apiKey,f.name);let re=null;for(const Qe of g)try{const ht=yield Qe._get(q);if(ht){const ot=U._fromJSON(f,ht);Qe!==R&&(re=ot),R=Qe;break}}catch(ht){}const Le=T.filter(Qe=>Qe._shouldAllowMigration);return R._shouldAllowMigration&&Le.length?(R=Le[0],re&&(yield R._set(q,re.toJSON())),yield Promise.all(g.map(function(){var Qe=(0,d.Z)(function*(ht){if(ht!==R)try{yield ht._remove(q)}catch(ot){}});return function(ht){return Qe.apply(this,arguments)}}())),new K(R,f,v)):new K(R,f,v)})()}}function Ve(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Bt(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(gt(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ct(f))return"Blackberry";if(ln(f))return"Webos";if(Ht(f))return"Safari";if((f.includes("chrome/")||Dr(f))&&!f.includes("edge/"))return"Chrome";if(Tn(f))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function gt(y=(0,O.z$)()){return/firefox\//i.test(y)}function Ht(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Dr(y=(0,O.z$)()){return/crios\//i.test(y)}function Bt(y=(0,O.z$)()){return/iemobile/i.test(y)}function Tn(y=(0,O.z$)()){return/android/i.test(y)}function Ct(y=(0,O.z$)()){return/blackberry/i.test(y)}function ln(y=(0,O.z$)()){return/webos/i.test(y)}function er(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)}function ls(y=(0,O.z$)()){return er(y)||Tn(y)||ln(y)||Ct(y)||/windows phone/i.test(y)||Bt(y)}function _a(y,f=[]){let g;switch(y){case"Browser":g=Ve((0,O.z$)());break;case"Worker":g=`${Ve((0,O.z$)())}-${y}`;break;default:g=y}const v=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${oe.SDK_VERSION}/${v}`}class ti{constructor(f,g,v){this.app=f,this.heartbeatServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new At(this),this.idTokenSubscription=new At(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(f,g){var v=this;return g&&(this._popupRedirectResolver=te(g)),this._initializationPromise=this.queue((0,d.Z)(function*(){var T,R;if(!v._deleted&&(v.persistenceManager=yield K.create(v,f),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(q){}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(R=v.currentUser)||void 0===R?void 0:R.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,d.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,d.Z)(function*(){var v;let T=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const R=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,q=null==T?void 0:T._redirectEventId,re=yield g.tryRedirectSignIn(f);(!R||R===q)&&(null==re?void 0:re.user)&&(T=re.user)}return T?T._redirectEventId?(ne(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===T._redirectEventId?g.directlySetCurrentUser(T):g.reloadAndSetCurrentUserOrClear(T)):g.reloadAndSetCurrentUserOrClear(T):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,d.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(T){yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,d.Z)(function*(){try{yield pr(f)}catch(v){if("auth/network-request-failed"!==v.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function He(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,d.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,d.Z)(function*(){const v=f?(0,O.m9)(f):null;return v&&ne(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,d.Z)(function*(){if(!g._deleted)return f&&ne(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,d.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,d.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,d.Z)(function*(){yield g.assertedPersistence.setPersistence(te(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,g,v){return this.registerStateListener(this.authStateSubscription,f,g,v)}onIdTokenChanged(f,g,v){return this.registerStateListener(this.idTokenSubscription,f,g,v)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var v=this;return(0,d.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(g);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,d.Z)(function*(){if(!g.redirectPersistenceManager){const v=f&&te(f)||g._popupRedirectResolver;ne(v,g,"argument-error"),g.redirectPersistenceManager=yield K.create(g,[te(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,d.Z)(function*(){var v,T;return g._isInitialized&&(yield g.queue((0,d.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===f?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,d.Z)(function*(){if(f===g.currentUser)return g.queue((0,d.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,v,T){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),q=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(q,this,"internal-error"),q.then(()=>R(this.currentUser)),"function"==typeof g?f.addObserver(g,v,T):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,d.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=_a(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,d.Z)(function*(){var g;const v={"X-Client-Version":f.clientVersion};f.app.options.appId&&(v["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function Ne(y){return(0,O.m9)(y)}class At{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(g=>this.observer=g)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function gr(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Ln(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class rn{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return Ze("not implemented")}_getIdTokenResponse(f){return Ze("not implemented")}_linkToIdToken(f,g){return Ze("not implemented")}_getReauthenticationResolver(f){return Ze("not implemented")}}function Mn(y,f){return xs.apply(this,arguments)}function xs(){return(xs=(0,d.Z)(function*(y,f){return Vt(y,"POST","/v1/accounts:resetPassword",$t(y,f))})).apply(this,arguments)}function It(y,f){return Po.apply(this,arguments)}function Po(){return(Po=(0,d.Z)(function*(y,f){return Vt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function so(y,f){return va.apply(this,arguments)}function va(){return(va=(0,d.Z)(function*(y,f){return Vt(y,"POST","/v1/accounts:update",$t(y,f))})).apply(this,arguments)}function tr(){return(tr=(0,d.Z)(function*(y,f){return Or(y,"POST","/v1/accounts:signInWithPassword",$t(y,f))})).apply(this,arguments)}function cs(y,f){return ds.apply(this,arguments)}function ds(){return(ds=(0,d.Z)(function*(y,f){return Vt(y,"POST","/v1/accounts:sendOobCode",$t(y,f))})).apply(this,arguments)}function Pr(y,f){return sn.apply(this,arguments)}function sn(){return(sn=(0,d.Z)(function*(y,f){return cs(y,f)})).apply(this,arguments)}function Qa(y,f){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,d.Z)(function*(y,f){return cs(y,f)})).apply(this,arguments)}function mi(y,f){return ni.apply(this,arguments)}function ni(){return(ni=(0,d.Z)(function*(y,f){return cs(y,f)})).apply(this,arguments)}function Rc(y,f){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,d.Z)(function*(y,f){return cs(y,f)})).apply(this,arguments)}function Hr(){return(Hr=(0,d.Z)(function*(y,f){return Or(y,"POST","/v1/accounts:signInWithEmailLink",$t(y,f))})).apply(this,arguments)}function Nc(){return(Nc=(0,d.Z)(function*(y,f){return Or(y,"POST","/v1/accounts:signInWithEmailLink",$t(y,f))})).apply(this,arguments)}class eu extends rn{constructor(f,g,v,T=null){super("password",v),this._email=f,this._password=g,this._tenantId=T}static _fromEmailAndPassword(f,g){return new eu(f,g,"password")}static _fromEmailAndCode(f,g,v=null){return new eu(f,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,d.Z)(function*(){switch(g.signInMethod){case"password":return function Ms(y,f){return tr.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Xa(y,f){return Hr.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Ie(f,"internal-error")}})()}_linkToIdToken(f,g){var v=this;return(0,d.Z)(function*(){switch(v.signInMethod){case"password":return It(f,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function vh(y,f){return Nc.apply(this,arguments)}(f,{idToken:g,email:v._email,oobCode:v._password});default:Ie(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Vn(y,f){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,d.Z)(function*(y,f){return Or(y,"POST","/v1/accounts:signInWithIdp",$t(y,f))})).apply(this,arguments)}class hs extends rn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new hs(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Ie("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:T}=g,R=(0,X._T)(g,["providerId","signInMethod"]);if(!v||!T)return null;const q=new hs(v,T);return q.idToken=R.idToken||void 0,q.accessToken=R.accessToken||void 0,q.secret=R.secret,q.nonce=R.nonce,q.pendingToken=R.pendingToken||null,q}_getIdTokenResponse(f){return Vn(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Vn(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Vn(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,O.xO)(g)}return f}}function ap(y,f){return kc.apply(this,arguments)}function kc(){return(kc=(0,d.Z)(function*(y,f){return Vt(y,"POST","/v1/accounts:sendVerificationCode",$t(y,f))})).apply(this,arguments)}function Ns(){return(Ns=(0,d.Z)(function*(y,f){return Or(y,"POST","/v1/accounts:signInWithPhoneNumber",$t(y,f))})).apply(this,arguments)}function Pc(){return(Pc=(0,d.Z)(function*(y,f){const g=yield Or(y,"POST","/v1/accounts:signInWithPhoneNumber",$t(y,f));if(g.temporaryProof)throw us(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const lp={USER_NOT_FOUND:"user-not-found"};function Fc(){return(Fc=(0,d.Z)(function*(y,f){return Or(y,"POST","/v1/accounts:signInWithPhoneNumber",$t(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),lp)})).apply(this,arguments)}class Fo extends rn{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Fo({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Fo({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Xu(y,f){return Ns.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function up(y,f){return Pc.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function cp(y,f){return Fc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:v,verificationCode:T}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:v,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:R}=f;return v||g||T||R?new Fo({verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:R}):null}}class oo{constructor(f){var g,v,T,R,q,re;const Le=(0,O.zd)((0,O.pd)(f)),Qe=null!==(g=Le.apiKey)&&void 0!==g?g:null,ht=null!==(v=Le.oobCode)&&void 0!==v?v:null,ot=function Sm(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Le.mode)&&void 0!==T?T:null);ne(Qe&&ht&&ot,"argument-error"),this.apiKey=Qe,this.operation=ot,this.code=ht,this.continueUrl=null!==(R=Le.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(q=Le.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(re=Le.tenantId)&&void 0!==re?re:null}static parseLink(f){const g=function tu(y){const f=(0,O.zd)((0,O.pd)(y)).link,g=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,v=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(v?(0,O.zd)((0,O.pd)(v)).link:null)||v||g||f||y}(f);try{return new oo(g)}catch(v){return null}}}let el=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,v){return eu._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const T=oo.parseLink(v);return ne(T,"argument-error"),eu._fromEmailAndCode(g,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Os{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Gr extends Os{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Lo extends Gr{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return ne("providerId"in g&&"signInMethod"in g,"argument-error"),hs._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ne(f.idToken||f.accessToken,"argument-error"),hs._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Lo.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Lo.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:R,nonce:q,providerId:re}=f;if(!v&&!T&&!g&&!R||!re)return null;try{return new Lo(re)._credential({idToken:g,accessToken:v,nonce:q,pendingToken:R})}catch(Le){return null}}}let ao=(()=>{class y extends Gr{constructor(){super("facebook.com")}static credential(g){return hs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),wa=(()=>{class y extends Gr{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return hs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:T}=g;if(!v&&!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Lc=(()=>{class y extends Gr{constructor(){super("github.com")}static credential(g){return hs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Vo extends rn{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Vn(f,this.buildRequest())}_linkToIdToken(f,g){const v=this.buildRequest();return v.idToken=g,Vn(f,v)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Vn(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:v,signInMethod:T,pendingToken:R}=g;return v&&T&&R&&v===T?new Vo(v,R):null}static _create(f,g){return new Vo(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ri extends Os{constructor(f){ne(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ri.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ri.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Vo.fromJSON(f);return ne(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:v}=f;if(!g||!v)return null;try{return Vo._create(v,g)}catch(T){return null}}}let nu=(()=>{class y extends Gr{constructor(){super("twitter.com")}static credential(g,v){return hs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=g;if(!v||!T)return null;try{return y.credential(v,T)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function ru(y,f){return qr.apply(this,arguments)}function qr(){return(qr=(0,d.Z)(function*(y,f){return Or(y,"POST","/v1/accounts:signUp",$t(y,f))})).apply(this,arguments)}class mr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,v,T=!1){return(0,d.Z)(function*(){const R=yield U._fromIdTokenResponse(f,v,T),q=Eh(v);return new mr({user:R,providerId:q,_tokenResponse:v,operationType:g})})()}static _forOperation(f,g,v){return(0,d.Z)(function*(){yield f._updateTokensIfNecessary(v,!0);const T=Eh(v);return new mr({user:f,providerId:T,_tokenResponse:v,operationType:g})})()}}function Eh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Vc(){return(Vc=(0,d.Z)(function*(y){var f;const g=Ne(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new mr({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield ru(g,{returnSecureToken:!0}),T=yield mr._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class su extends O.ZR{constructor(f,g,v,T){var R;super(g.code,g.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,su.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(f,g,v,T){return new su(f,g,v,T)}}function ou(y,f,g,v){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?su._fromErrorAndOperation(y,R,f,v):R})}function fs(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function tl(){return(tl=(0,d.Z)(function*(y,f){const g=(0,O.m9)(y);yield Ps(!0,g,f);const{providerUserInfo:v}=yield Jn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),T=fs(v||[]);return g.providerData=g.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function fn(y,f){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,d.Z)(function*(y,f,g=!1){const v=yield fr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return mr._forOperation(y,"link",v)})).apply(this,arguments)}function Ps(y,f,g){return on.apply(this,arguments)}function on(){return(on=(0,d.Z)(function*(y,f,g){yield pr(f);const T=!1===y?"provider-already-linked":"no-such-provider";ne(fs(f.providerData).has(g)===y,f.auth,T)})).apply(this,arguments)}function Uc(y,f){return uo.apply(this,arguments)}function uo(){return(uo=(0,d.Z)(function*(y,f,g=!1){const{auth:v}=y,T="reauthenticate";try{const R=yield fr(y,ou(v,T,f,y),g);ne(R.idToken,v,"internal-error");const q=rt(R.idToken);ne(q,v,"internal-error");const{sub:re}=q;return ne(y.uid===re,v,"user-mismatch"),mr._forOperation(y,T,R)}catch(R){throw"auth/user-not-found"===(null==R?void 0:R.code)&&Ie(v,"user-mismatch"),R}})).apply(this,arguments)}function lo(y,f){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,d.Z)(function*(y,f,g=!1){const v="signIn",T=yield ou(y,v,f),R=yield mr._fromIdTokenResponse(y,v,T);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Rn(y,f){return ba.apply(this,arguments)}function ba(){return(ba=(0,d.Z)(function*(y,f){return lo(Ne(y),f)})).apply(this,arguments)}function yi(y,f){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,d.Z)(function*(y,f){const g=(0,O.m9)(y);return yield Ps(!1,g,f.providerId),fn(g,f)})).apply(this,arguments)}function Fs(y,f){return ps.apply(this,arguments)}function ps(){return(ps=(0,d.Z)(function*(y,f){return Uc((0,O.m9)(y),f)})).apply(this,arguments)}function au(y,f){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,d.Z)(function*(y,f){return Or(y,"POST","/v1/accounts:signInWithCustomToken",$t(y,f))})).apply(this,arguments)}function Vs(){return(Vs=(0,d.Z)(function*(y,f){const g=Ne(y),v=yield au(g,{token:f,returnSecureToken:!0}),T=yield mr._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class ct{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?uu._fromServerResponse(f,g):Ie(f,"internal-error")}}class uu extends ct{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new uu(g)}}function Ia(y,f,g){var v;ne((null===(v=g.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),ne(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(ne(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(ne(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function cu(){return(cu=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y),T={requestType:"PASSWORD_RESET",email:f};g&&Ia(v,T,g),yield Qa(v,T)})).apply(this,arguments)}function nl(){return(nl=(0,d.Z)(function*(y,f,g){yield Mn((0,O.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function be(){return(be=(0,d.Z)(function*(y,f){yield so((0,O.m9)(y),{oobCode:f})})).apply(this,arguments)}function xt(y,f){return il.apply(this,arguments)}function il(){return(il=(0,d.Z)(function*(y,f){const g=(0,O.m9)(y),v=yield Mn(g,{oobCode:f}),T=v.requestType;switch(ne(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(v.mfaInfo,g,"internal-error");default:ne(v.email,g,"internal-error")}let R=null;return v.mfaInfo&&(R=ct._fromServerResponse(Ne(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:R},operation:T}})).apply(this,arguments)}function Bo(){return(Bo=(0,d.Z)(function*(y,f){const{data:g}=yield xt((0,O.m9)(y),f);return g.email})).apply(this,arguments)}function zr(){return(zr=(0,d.Z)(function*(y,f,g){const v=Ne(y),T=yield ru(v,{returnSecureToken:!0,email:f,password:g}),R=yield mr._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(R.user),R})).apply(this,arguments)}function Bc(){return(Bc=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y),T={requestType:"EMAIL_SIGNIN",email:f};ne(g.handleCodeInApp,v,"argument-error"),g&&Ia(v,T,g),yield mi(v,T)})).apply(this,arguments)}function Us(){return(Us=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y),T=el.credentialWithLink(f,g||ke());return ne(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Rn(v,T)})).apply(this,arguments)}function yr(y,f){return ii.apply(this,arguments)}function ii(){return(ii=(0,d.Z)(function*(y,f){return Vt(y,"POST","/v1/accounts:createAuthUri",$t(y,f))})).apply(this,arguments)}function Bs(){return(Bs=(0,d.Z)(function*(y,f){const v={identifier:f,continueUri:bt()?ke():"http://localhost"},{signinMethods:T}=yield yr((0,O.m9)(y),v);return T||[]})).apply(this,arguments)}function ul(){return(ul=(0,d.Z)(function*(y,f){const g=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Ia(g.auth,T,f);const{email:R}=yield Pr(g.auth,T);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function gu(){return(gu=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&Ia(v.auth,R,g);const{email:q}=yield Rc(v.auth,R);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function ll(y,f){return Da.apply(this,arguments)}function Da(){return(Da=(0,d.Z)(function*(y,f){return Vt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function cl(){return(cl=(0,d.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const v=(0,O.m9)(y),R={idToken:yield v.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},q=yield fr(v,ll(v.auth,R));v.displayName=q.displayName||null,v.photoURL=q.photoUrl||null;const re=v.providerData.find(({providerId:Le})=>"password"===Le);re&&(re.displayName=v.displayName,re.photoURL=v.photoURL),yield v._updateTokensIfNecessary(q)})).apply(this,arguments)}function hl(y,f,g){return co.apply(this,arguments)}function co(){return(co=(0,d.Z)(function*(y,f,g){const{auth:v}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(R.email=f),g&&(R.password=g);const q=yield fr(y,It(v,R));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class ho{constructor(f,g,v={}){this.isNewUser=f,this.providerId=g,this.profile=v}}class Hc extends ho{constructor(f,g,v,T){super(f,g,v),this.username=T}}class Gc extends ho{constructor(f,g){super(f,"facebook.com",g)}}class fo extends Hc{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class js extends ho{constructor(f,g){super(f,"google.com",g)}}class fl extends Hc{constructor(f,g,v){super(f,"twitter.com",g,v)}}function Ar(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function $c(y){var f,g;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const q=null===(g=null===(f=rt(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(q)return new ho(R,"anonymous"!==q&&"custom"!==q?q:null)}if(!v)return null;switch(v){case"facebook.com":return new Gc(R,T);case"github.com":return new fo(R,T);case"google.com":return new js(R,T);case"twitter.com":return new fl(R,T,y.screenName||null);case"custom":case"anonymous":return new ho(R,null);default:return new ho(R,v,T)}}(g)}class gs{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new gs("enroll",f)}static _fromMfaPendingCredential(f){return new gs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,v;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return gs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(v=f.multiFactorSession)||void 0===v?void 0:v.idToken)return gs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Ta{constructor(f,g,v){this.session=f,this.hints=g,this.signInResolver=v}static _fromError(f,g){const v=Ne(f),T=g.customData._serverResponse,R=(T.mfaInfo||[]).map(re=>ct._fromServerResponse(v,re));ne(T.mfaPendingCredential,v,"internal-error");const q=gs._fromMfaPendingCredential(T.mfaPendingCredential);return new Ta(q,R,function(){var re=(0,d.Z)(function*(Le){const Qe=yield Le._process(v,q);delete T.mfaInfo,delete T.mfaPendingCredential;const ht=Object.assign(Object.assign({},T),{idToken:Qe.idToken,refreshToken:Qe.refreshToken});switch(g.operationType){case"signIn":const ot=yield mr._fromIdTokenResponse(v,g.operationType,ht);return yield v._updateCurrentUser(ot.user),ot;case"reauthenticate":return ne(g.user,v,"internal-error"),mr._forOperation(g.user,g.operationType,ht);default:Ie(v,"internal-error")}});return function(Le){return re.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,d.Z)(function*(){return g.signInResolver(f)})()}}function Un(y,f){return Vt(y,"POST","/v2/accounts/mfaEnrollment:start",$t(y,f))}class ms{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>ct._fromServerResponse(f.auth,v)))})}static _fromUser(f){return new ms(f)}getSession(){var f=this;return(0,d.Z)(function*(){return gs._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var v=this;return(0,d.Z)(function*(){const T=f,R=yield v.getSession(),q=yield fr(v.user,T._process(v.user.auth,R,g));return yield v.user._updateTokensIfNecessary(q),v.user.reload()})()}unenroll(f){var g=this;return(0,d.Z)(function*(){const v="string"==typeof f?f:f.uid,T=yield g.user.getIdToken(),R=yield fr(g.user,function hp(y,f){return Vt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",$t(y,f))}(g.user.auth,{idToken:T,mfaEnrollmentId:v}));g.enrolledFactors=g.enrolledFactors.filter(({uid:q})=>q!==v),yield g.user._updateTokensIfNecessary(R);try{yield g.user.reload()}catch(q){if("auth/user-token-expired"!==q.code)throw q}})()}}const $o=new WeakMap,ml="__sak";class po{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(ml,"1"),this.storage.removeItem(ml),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const yn=(()=>{class y extends po{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function zc(){const y=(0,O.z$)();return Ht(y)||er(y)}()&&function Gn(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ls(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),R=this.localCache[v];T!==R&&g(v,R,T)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((re,Le,Qe)=>{this.notifyListeners(re,Qe)});const T=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const re=this.storage.getItem(T);if(g.newValue!==re)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!v)return}const R=()=>{const re=this.storage.getItem(T);!v&&this.localCache[T]===re||this.notifyListeners(T,re)},q=this.storage.getItem(T);!function ya(){return(0,O.w1)()&&10===document.documentMode}()||q===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const R of Array.from(T))R(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var T=()=>super._set,R=this;return(0,d.Z)(function*(){yield T().call(R,g,v),R.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,T=this;return(0,d.Z)(function*(){const R=yield v().call(T,g);return T.localCache[g]=JSON.stringify(R),R})()}_remove(g){var v=()=>super._remove,T=this;return(0,d.Z)(function*(){yield v().call(T,g),delete T.localCache[g]})()}}return y.type="LOCAL",y})(),nr=(()=>{class y extends po{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return y.type="SESSION",y})();let Vi=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(R=>R.isListeningto(g));if(v)return v;const T=new y(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,d.Z)(function*(){const T=g,{eventId:R,eventType:q,data:re}=T.data,Le=v.handlersMap[q];if(!(null==Le?void 0:Le.size))return;T.ports[0].postMessage({status:"ack",eventId:R,eventType:q});const Qe=Array.from(Le).map(function(){var ot=(0,d.Z)(function*(In){return In(T.origin,re)});return function(In){return ot.apply(this,arguments)}}()),ht=yield function _n(y){return Promise.all(y.map(function(){var f=(0,d.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return f.apply(this,arguments)}}()))}(Qe);T.ports[0].postMessage({status:"done",eventId:R,eventType:q,response:ht})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function dt(y="",f=10){let g="";for(let v=0;v<f;v++)g+=Math.floor(10*Math.random());return y+g}class rr{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,v=50){var T=this;return(0,d.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let q,re;return new Promise((Le,Qe)=>{const ht=dt("",20);R.port1.start();const ot=setTimeout(()=>{Qe(new Error("unsupported_event"))},v);re={messageChannel:R,onMessage(In){const Jr=In;if(Jr.data.eventId===ht)switch(Jr.data.status){case"ack":clearTimeout(ot),q=setTimeout(()=>{Qe(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Le(Jr.data.response);break;default:clearTimeout(ot),clearTimeout(q),Qe(new Error("invalid_response"))}}},T.handlers.add(re),R.port1.addEventListener("message",re.onMessage),T.target.postMessage({eventType:f,eventId:ht,data:g},[R.port2])}).finally(()=>{re&&T.removeMessageHandler(re)})})()}}function tn(){return window}function si(){return void 0!==tn().WorkerGlobalScope&&"function"==typeof tn().importScripts}function vi(){return(vi=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Tt="firebaseLocalStorageDb",Ui="firebaseLocalStorage",Bi="fbase_key";class ys{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Ho(y,f){return y.transaction([Ui],f?"readwrite":"readonly").objectStore(Ui)}function ir(){const y=indexedDB.open(Tt,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(Ui,{keyPath:Bi})}catch(T){g(T)}}),y.addEventListener("success",(0,d.Z)(function*(){const v=y.result;v.objectStoreNames.contains(Ui)?f(v):(v.close(),yield function Nn(){const y=indexedDB.deleteDatabase(Tt);return new ys(y).toPromise()}(),f(yield ir()))}))})}function Wc(y,f,g){return go.apply(this,arguments)}function go(){return(go=(0,d.Z)(function*(y,f,g){const v=Ho(y,!0).put({[Bi]:f,value:g});return new ys(v).toPromise()})).apply(this,arguments)}function wi(){return(wi=(0,d.Z)(function*(y,f){const g=Ho(y,!1).get(f),v=yield new ys(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function ji(y,f){const g=Ho(y,!0).delete(f);return new ys(g).toPromise()}const qn=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,d.Z)(function*(){return g.db||(g.db=yield ir()),g.db})()}_withRetries(g){var v=this;return(0,d.Z)(function*(){let T=0;for(;;)try{const R=yield v._openDb();return yield g(R)}catch(R){if(T++>3)throw R;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,d.Z)(function*(){return si()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,d.Z)(function*(){g.receiver=Vi._getInstance(function yu(){return si()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,d.Z)(function*(T,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(T,R){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,d.Z)(function*(T,R){return["keyChanged"]});return function(T,R){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,d.Z)(function*(){var v,T;if(g.activeServiceWorker=yield function _r(){return vi.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new rr(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(v=R[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=R[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,d.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Wr(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const g=yield ir();return yield Wc(g,ml,"1"),yield ji(g,ml),!0}catch(g){}return!1})()}_withPendingWrite(g){var v=this;return(0,d.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var T=this;return(0,d.Z)(function*(){return T._withPendingWrite((0,d.Z)(function*(){return yield T._withRetries(R=>Wc(R,g,v)),T.localCache[g]=v,T.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,d.Z)(function*(){const T=yield v._withRetries(R=>function me(y,f){return wi.apply(this,arguments)}(R,g));return v.localCache[g]=T,T})()}_remove(g){var v=this;return(0,d.Z)(function*(){return v._withPendingWrite((0,d.Z)(function*(){return yield v._withRetries(T=>ji(T,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,d.Z)(function*(){const v=yield g._withRetries(q=>{const re=Ho(q,!1).getAll();return new ys(re).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const T=[],R=new Set;for(const{fbase_key:q,value:re}of v)R.add(q),JSON.stringify(g.localCache[q])!==JSON.stringify(re)&&(g.notifyListeners(q,re),T.push(q));for(const q of Object.keys(g.localCache))g.localCache[q]&&!R.has(q)&&(g.notifyListeners(q,null),T.push(q));return T})()}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const R of Array.from(T))R(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Ye(y,f){return Vt(y,"POST","/v2/accounts/mfaSignIn:start",$t(y,f))}function Kr(){return(Kr=(0,d.Z)(function*(y){return(yield Vt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Hi(y){return new Promise((f,g)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=f,v.onerror=T=>{const R=_e("internal-error");R.customData=T,g(R)},v.type="text/javascript",v.charset="UTF-8",function _u(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(v)})}function vu(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ei=1e12;class Th{constructor(f){this.auth=f,this.counter=Ei,this._widgets=new Map}render(f,g){const v=this.counter;return this._widgets.set(v,new Bn(f,this.auth.name,g||{})),this.counter++,v}reset(f){var g;const v=f||Ei;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Ei))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,d.Z)(function*(){var v;return null===(v=g._widgets.get(f||Ei))||void 0===v||v.execute(),""})()}}class Bn{constructor(f,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;ne(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function _s(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const On=vu("rcb"),mo=new Lt(3e4,6e4);class pp{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!tn().grecaptcha}load(f,g=""){return ne(function gp(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(tn().grecaptcha):new Promise((v,T)=>{const R=tn().setTimeout(()=>{T(_e(f,"network-request-failed"))},mo.get());tn()[On]=()=>{tn().clearTimeout(R),delete tn()[On];const re=tn().grecaptcha;if(!re)return void T(_e(f,"internal-error"));const Le=re.render;re.render=(Qe,ht)=>{const ot=Le(Qe,ht);return this.counter++,ot},this.hostLanguage=g,v(re)},Hi(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:On,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),T(_e(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!tn().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ah{load(f){return(0,d.Z)(function*(){return new Th(f)})()}clearedOneInstance(){}}const Kc="recaptcha",Yc={theme:"light",type:"image"};class Qc{constructor(f,g=Object.assign({},Yc),v){this.parameters=g,this.type=Kc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ne(v),this.isInvisible="invisible"===this.parameters.size,ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;ne(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ah:new pp,this.validateStartingState()}verify(){var f=this;return(0,d.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),v=f.getAssertedRecaptcha();return v.getResponse(g)||new Promise(R=>{const q=re=>{!re||(f.tokenChangeListeners.delete(q),R(re))};f.tokenChangeListeners.add(q),f.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof f)f(g);else if("string"==typeof f){const v=tn()[f];"function"==typeof v&&v(g)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,d.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,d.Z)(function*(){ne(bt()&&!si(),f.auth,"internal-error"),yield function vl(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function vt(y){return Kr.apply(this,arguments)}(f.auth);ne(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Hs{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Fo._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function En(){return(En=(0,d.Z)(function*(y,f,g){const v=Ne(y),T=yield vr(v,f,(0,O.m9)(g));return new Hs(T,R=>Rn(v,R))})).apply(this,arguments)}function yo(){return(yo=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y);yield Ps(!1,v,"phone");const T=yield vr(v.auth,f,(0,O.m9)(g));return new Hs(T,R=>yi(v,R))})).apply(this,arguments)}function Aa(){return(Aa=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y),T=yield vr(v.auth,f,(0,O.m9)(g));return new Hs(T,R=>Fs(v,R))})).apply(this,arguments)}function vr(y,f,g){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,d.Z)(function*(y,f,g){var v;const T=yield g.verify();try{let R;if(ne("string"==typeof T,y,"argument-error"),ne(g.type===Kc,y,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const q=R.session;if("phoneNumber"in R)return ne("enroll"===q.type,y,"internal-error"),(yield Un(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{ne("signin"===q.type,y,"internal-error");const re=(null===(v=R.multiFactorHint)||void 0===v?void 0:v.uid)||R.multiFactorUid;return ne(re,y,"missing-multi-factor-info"),(yield Ye(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:re,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield ap(y,{phoneNumber:R.phoneNumber,recaptchaToken:T});return q}}finally{g._reset()}})).apply(this,arguments)}function qi(){return(qi=(0,d.Z)(function*(y,f){yield fn((0,O.m9)(y),f)})).apply(this,arguments)}let bi=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Ne(g)}verifyPhoneNumber(g,v){return vr(this.auth,g,(0,O.m9)(v))}static credential(g,v){return Fo._fromVerification(g,v)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:T}=g;return v&&T?Fo._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Zi(y,f){return f?te(f):(ne(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class zi extends rn{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Vn(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Vn(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Vn(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function wu(y){return lo(y.auth,new zi(y),y.bypassAuthState)}function Eu(y){const{auth:f,user:g}=y;return ne(g,f,"internal-error"),Uc(g,new zi(y),y.bypassAuthState)}function El(y){return bl.apply(this,arguments)}function bl(){return(bl=(0,d.Z)(function*(y){const{auth:f,user:g}=y;return ne(g,f,"internal-error"),fn(g,new zi(y),y.bypassAuthState)})).apply(this,arguments)}class Lr{constructor(f,g,v,T,R=!1){this.auth=f,this.resolver=v,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,d.Z)(function*(v,T){f.pendingPromise={resolve:v,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(v,T){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,d.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:R,tenantId:q,error:re,type:Le}=f;if(re)return void g.reject(re);const Qe={auth:g.auth,requestUri:v,sessionId:T,tenantId:q||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Le)(Qe))}catch(ht){g.reject(ht)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return wu;case"linkViaPopup":case"linkViaRedirect":return El;case"reauthViaPopup":case"reauthViaRedirect":return Eu;default:Ie(this.auth,"internal-error")}}resolve(f){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Sa=new Lt(2e3,1e4);function bu(){return(bu=(0,d.Z)(function*(y,f,g){const v=Ne(y);je(y,f,Os);const T=Zi(v,g);return new Wi(v,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function Iu(){return(Iu=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y);je(v.auth,f,Os);const T=Zi(v.auth,g);return new Wi(v.auth,"reauthViaPopup",f,T,v).executeNotNull()})).apply(this,arguments)}function xa(){return(xa=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y);je(v.auth,f,Os);const T=Zi(v.auth,g);return new Wi(v.auth,"linkViaPopup",f,T,v).executeNotNull()})).apply(this,arguments)}let Wi=(()=>{class y extends Lr{constructor(g,v,T,R,q){super(g,v,R,q),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,d.Z)(function*(){const v=yield g.execute();return ne(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,d.Z)(function*(){J(1===g.filter.length,"Popup operations only handle one event");const v=dt();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(_e(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(_e(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(_e(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Sa.get())};g()}}return y.currentPopupAction=null,y})();const Ii=new Map;class or extends Lr{constructor(f,g,v=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,d.Z)(function*(){let v=Ii.get(g.auth._key());if(!v){try{const R=(yield function _o(y,f){return Il.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;v=()=>Promise.resolve(R)}catch(T){v=()=>Promise.reject(T)}Ii.set(g.auth._key(),v)}return g.bypassAuthState||Ii.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,v=this;return(0,d.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(v,f);if("unknown"!==f.type){if(f.eventId){const T=yield v.auth._redirectUserForId(f.eventId);if(T)return v.user=T,g().call(v,f);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Il(){return(Il=(0,d.Z)(function*(y,f){const g=D(f),v=I(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(g));return yield v._remove(g),T})).apply(this,arguments)}function Di(y,f){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,d.Z)(function*(y,f){return I(y)._set(D(f),"true")})).apply(this,arguments)}function I(y){return te(y._redirectPersistence)}function D(y){return le("pendingRedirect",y.config.apiKey,y.name)}function Z(){return(Z=(0,d.Z)(function*(y,f,g){const v=Ne(y);je(y,f,Os);const T=Zi(v,g);return yield Di(T,v),T._openRedirect(v,f,"signInViaRedirect")})).apply(this,arguments)}function Ke(){return(Ke=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y);je(v.auth,f,Os);const T=Zi(v.auth,g);yield Di(T,v.auth);const R=yield Zo(v);return T._openRedirect(v.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function Ft(){return(Ft=(0,d.Z)(function*(y,f,g){const v=(0,O.m9)(y);je(v.auth,f,Os);const T=Zi(v.auth,g);yield Ps(!1,v,f.providerId),yield Di(T,v.auth);const R=yield Zo(v);return T._openRedirect(v.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function jn(){return(jn=(0,d.Z)(function*(y,f){return yield Ne(y)._initializationPromise,kn(y,f,!1)})).apply(this,arguments)}function kn(y,f){return qs.apply(this,arguments)}function qs(){return(qs=(0,d.Z)(function*(y,f,g=!1){const v=Ne(y),T=Zi(v,f),q=yield new or(v,T,g).execute();return q&&!g&&(delete q.user._redirectEventId,yield v._persistUserIfCurrent(q.user),yield v._setRedirectUser(null,f)),q})).apply(this,arguments)}function Zo(y){return oi.apply(this,arguments)}function oi(){return(oi=(0,d.Z)(function*(y){const f=dt(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class vn{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(f,v)&&(g=!0,this.sendToConsumer(f,v),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function mp(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jc(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var v;if(f.error&&!Jc(f)){const T=(null===(v=f.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(_e(this.auth,T))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const v=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&v}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ki(f))}saveEventToCache(f){this.cachedEventUids.add(Ki(f)),this.lastProcessedEventTime=Date.now()}}function Ki(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Jc({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Xc(y){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,d.Z)(function*(y,f={}){return Vt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const yp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rm=/^https?/;function Zs(){return(Zs=(0,d.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Xc(y);for(const g of f)try{if(Cl(g))return}catch(v){}Ie(y,"unauthorized-domain")})).apply(this,arguments)}function Cl(y){const f=ke(),{protocol:g,hostname:v}=new URL(f);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===v?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&q.hostname===v}if(!Rm.test(g))return!1;if(yp.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const Nh=new Lt(3e4,6e4);function _p(){const y=tn().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Na=null;function wp(y){return Na=Na||function vp(y){return new Promise((f,g)=>{var v,T,R;function q(){_p(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{_p(),g(_e(y,"network-request-failed"))},timeout:Nh.get()})}if(null===(T=null===(v=tn().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)f(gapi.iframes.getContext());else{if(!(null===(R=tn().gapi)||void 0===R?void 0:R.load)){const re=vu("iframefcb");return tn()[re]=()=>{gapi.load?q():g(_e(y,"network-request-failed"))},Hi(`https://apis.google.com/js/api.js?onload=${re}`).catch(Le=>g(Le))}q()}}).catch(f=>{throw Na=null,f})}(y),Na}const Oh=new Lt(5e3,15e3),zo={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ed=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Oa(y){const f=y.config;ne(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?Qn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:f.apiKey,appName:y.name,v:oe.SDK_VERSION},T=ed.get(y.config.apiHost);T&&(v.eid=T);const R=y._getFrameworks();return R.length&&(v.fw=R.join(",")),`${g}?${(0,O.xO)(v).slice(1)}`}function Du(){return Du=(0,d.Z)(function*(y){const f=yield wp(y),g=tn().gapi;return ne(g,y,"internal-error"),f.open({where:document.body,url:Oa(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zo,dontclear:!0},v=>new Promise(function(){var T=(0,d.Z)(function*(R,q){yield v.restyle({setHideOnLeave:!1});const re=_e(y,"network-request-failed"),Le=tn().setTimeout(()=>{q(re)},Oh.get());function Qe(){tn().clearTimeout(Le),R(v)}v.ping(Qe).then(Qe,()=>{q(re)})});return function(R,q){return T.apply(this,arguments)}}()))}),Du.apply(this,arguments)}const t0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class vo{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function rd(y,f,g,v,T,R){ne(y.config.authDomain,y,"auth-domain-config-required"),ne(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:v,v:oe.SDK_VERSION,eventId:T};if(f instanceof Os){f.setDefaultLanguage(y.languageCode),q.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Le,Qe]of Object.entries(R||{}))q[Le]=Qe}if(f instanceof Gr){const Le=f.getScopes().filter(Qe=>""!==Qe);Le.length>0&&(q.scopes=Le.join(","))}y.tenantId&&(q.tid=y.tenantId);const re=q;for(const Le of Object.keys(re))void 0===re[Le]&&delete re[Le];return`${function Qr({config:y}){return y.emulator?Qn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(re).slice(1)}`}const ws="webStorageSupport";class id extends class Om{constructor(f){this.factorId=f}_process(f,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,v);case"signin":return this._finalizeSignIn(f,g.credential);default:return Ze("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new id(f)}_finalizeEnroll(f,g,v){return function qc(y,f){return Vt(y,"POST","/v2/accounts/mfaEnrollment:finalize",$t(y,f))}(f,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Go(y,f){return Vt(y,"POST","/v2/accounts/mfaSignIn:finalize",$t(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let km=(()=>{class y{constructor(){}static assertion(g){return id._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Tp="@firebase/auth",Sl="0.19.12";class sd{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,d.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(v=>{var T;f((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Es(){return window}function Ko(){return(Ko=(0,d.Z)(function*(y,f,g){var v;const{BuildInfo:T}=Es();J(f.sessionId,"AuthEvent did not contain a session ID");const R=yield od(f.sessionId),q={};return er()?q.ibi=T.packageName:Tn()?q.apn=T.packageName:Ie(y,"operation-not-supported-in-this-environment"),T.displayName&&(q.appDisplayName=T.displayName),q.sessionId=R,rd(y,g,f.type,void 0,null!==(v=f.eventId)&&void 0!==v?v:void 0,q)})).apply(this,arguments)}function ai(){return(ai=(0,d.Z)(function*(y){const{BuildInfo:f}=Es(),g={};er()?g.iosBundleId=f.packageName:Tn()?g.androidPackageName=f.packageName:Ie(y,"operation-not-supported-in-this-environment"),yield Xc(y,g)})).apply(this,arguments)}function Ml(){return(Ml=(0,d.Z)(function*(y,f,g){const{cordova:v}=Es();let T=()=>{};try{yield new Promise((R,q)=>{let re=null;function Le(){var ot;R();const In=null===(ot=v.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof In&&In(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Qe(){re||(re=window.setTimeout(()=>{q(_e(y,"redirect-cancelled-by-user"))},2e3))}function ht(){"visible"===(null==document?void 0:document.visibilityState)&&Qe()}f.addPassiveListener(Le),document.addEventListener("resume",Qe,!1),Tn()&&document.addEventListener("visibilitychange",ht,!1),T=()=>{f.removePassiveListener(Le),document.removeEventListener("resume",Qe,!1),document.removeEventListener("visibilitychange",ht,!1),re&&window.clearTimeout(re)}})}finally{T()}})).apply(this,arguments)}function od(y){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,d.Z)(function*(y){const f=Bh(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Bh(y){if(J(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let v=0;v<y.length;v++)g[v]=y.charCodeAt(v);return g}!function Fh(y){(0,oe._registerComponent)(new ie.wA("auth",(f,{options:g})=>{const v=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:R,authDomain:q}=v.options;return((re,Le)=>{ne(R&&!R.includes(":"),"invalid-api-key",{appName:re.name}),ne(!(null==q?void 0:q.includes(":")),"argument-error",{appName:re.name});const Qe={apiKey:R,authDomain:q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_a(y)},ht=new ti(re,Le,Qe);return function ge(y,f){const g=(null==f?void 0:f.persistence)||[],v=(Array.isArray(g)?g:[g]).map(te);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(v,null==f?void 0:f.popupRedirectResolver)}(ht,g),ht})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,v)=>{f.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new ie.wA("auth-internal",f=>{const g=Ne(f.getProvider("auth").getImmediate());return new sd(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(Tp,Sl,function Ph(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(Tp,Sl,"esm2017")}("Browser");class Eo extends vn{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,d.Z)(function*(){yield f.initPromise})()}}function jh(y){return bo.apply(this,arguments)}function bo(){return(bo=(0,d.Z)(function*(y){const f=yield ad()._get(Hh(y));return f&&(yield ad()._remove(Hh(y))),f})).apply(this,arguments)}function Pa(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const v=Math.floor(Math.random()*f.length);y.push(f.charAt(v))}return y.join("")}function ad(){return te(yn)}function Hh(y){return le("authEvent",y.config.apiKey,y.name)}function Fa(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,O.zd)(g.join("?"))}function bn(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:_e("no-auth-event")}}function Qo(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function qh(y=(0,O.z$)()){return!("file:"!==Qo()&&"ionic:"!==Qo()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Zn(){try{const y=self.localStorage,f=dt();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Ol(y=(0,O.z$)()){return function r0(){return(0,O.w1)()&&11===(null==document?void 0:document.documentMode)}()||function s0(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch(y){return Qi()&&(0,O.hl)()}return!1}function Qi(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function kl(){return(function Lm(){return"http:"===Qo()||"https:"===Qo()}()||(0,O.ru)()||qh())&&!function Vm(){return(0,O.b$)()||(0,O.UG)()}()&&Zn()&&!Qi()}function cd(){return qh()&&"undefined"!=typeof document}function Ji(){return(Ji=(0,d.Z)(function*(){return!!cd()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Ci={LOCAL:"local",NONE:"none",SESSION:"session"},Au=ne,zh="persistence";function Pl(y){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,d.Z)(function*(y){yield y._initializationPromise;const f=Wh(),g=le(zh,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function Wh(){var y;try{return(null===(y=function Zh(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const Mp=ne;class Xi{constructor(){this.browserResolver=te(class wo{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nr,this._completeRedirectFn=kn}_openPopup(f,g,v,T){var R=this;return(0,d.Z)(function*(){var q;J(null===(q=R.eventManagers[f._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const re=rd(f,g,v,ke(),T);return function kh(y,f,g,v=500,T=600){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),q=Math.max((window.screen.availWidth-v)/2,0).toString();let re="";const Le=Object.assign(Object.assign({},t0),{width:v.toString(),height:T.toString(),top:R,left:q}),Qe=(0,O.z$)().toLowerCase();g&&(re=Dr(Qe)?"_blank":g),gt(Qe)&&(f=f||"http://localhost",Le.scrollbars="yes");const ht=Object.entries(Le).reduce((In,[Jr,Bl])=>`${In}${Jr}=${Bl},`,"");if(function Ya(y=(0,O.z$)()){var f;return er(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Qe)&&"_self"!==re)return function nd(y,f){const g=document.createElement("a");g.href=y,g.target=f;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(f||"",re),new vo(null);const ot=window.open(f||"",re,ht);ne(ot,y,"popup-blocked");try{ot.focus()}catch(In){}return new vo(ot)}(f,re,dt())})()}_openRedirect(f,g,v,T){var R=this;return(0,d.Z)(function*(){return yield R._originValidation(f),function Dh(y){tn().location.href=y}(rd(f,g,v,ke(),T)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:T,promise:R}=this.eventManagers[g];return T?Promise.resolve(T):(J(R,"If manager is not set, promise should be"),R)}const v=this.initAndGetManager(f);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(f){var g=this;return(0,d.Z)(function*(){const v=yield function bp(y){return Du.apply(this,arguments)}(f),T=new vn(f);return v.register("authEvent",R=>(ne(null==R?void 0:R.authEvent,f,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:T},g.iframes[f._key()]=v,T})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(ws,{type:ws},T=>{var R;const q=null===(R=null==T?void 0:T[0])||void 0===R?void 0:R[ws];void 0!==q&&g(!!q),Ie(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Rh(y){return Zs.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return ls()||Ht()||er()}}),this.cordovaResolver=te(class ud{constructor(){this._redirectPersistence=nr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=kn}_initialize(f){var g=this;return(0,d.Z)(function*(){const v=f._key();let T=g.eventManagers.get(v);return T||(T=new Eo(f),g.eventManagers.set(v,T),g.attachCallbackListeners(f,T)),T})()}_openPopup(f){Ie(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,v,T){var R=this;return(0,d.Z)(function*(){!function Ap(y){var f,g,v,T,R,q,re,Le,Qe,ht;const ot=Es();ne("function"==typeof(null===(f=null==ot?void 0:ot.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(void 0!==(null===(g=null==ot?void 0:ot.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne("function"==typeof(null===(R=null===(T=null===(v=null==ot?void 0:ot.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Le=null===(re=null===(q=null==ot?void 0:ot.cordova)||void 0===q?void 0:q.plugins)||void 0===re?void 0:re.browsertab)||void 0===Le?void 0:Le.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(ht=null===(Qe=null==ot?void 0:ot.cordova)||void 0===Qe?void 0:Qe.InAppBrowser)||void 0===ht?void 0:ht.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const q=yield R._initialize(f);yield q.initialized(),q.resetRedirect(),function Dl(){Ii.clear()}(),yield R._originValidation(f);const re=function Rl(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Pa(),postBody:null,tenantId:y.tenantId,error:_e(y,"no-auth-event")}}(f,v,T);yield function n0(y,f){return ad()._set(Hh(y),f)}(f,re);const Le=yield function Fm(y,f,g){return Ko.apply(this,arguments)}(f,re,g),Qe=yield function Cu(y){const{cordova:f}=Es();return new Promise(g=>{f.plugins.browsertab.isAvailable(v=>{let T=null;v?f.plugins.browsertab.openUrl(y):T=f.InAppBrowser.open(y,function io(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(T)})})}(Le);return function Vh(y,f,g){return Ml.apply(this,arguments)}(f,q,Qe)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function xl(y){return ai.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:v,handleOpenURL:T,BuildInfo:R}=Es(),q=setTimeout((0,d.Z)(function*(){yield jh(f),g.onEvent(bn())}),500),re=function(){var ht=(0,d.Z)(function*(ot){clearTimeout(q);const In=yield jh(f);let Jr=null;In&&(null==ot?void 0:ot.url)&&(Jr=function $h(y,f){var g,v;const T=function Yi(y){const f=Fa(y),g=f.link?decodeURIComponent(f.link):void 0,v=Fa(g).link,T=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Fa(T).link||T||v||g||y}(f);if(T.includes("/__/auth/callback")){const R=Fa(T),q=R.firebaseError?function Yo(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(R.firebaseError)):null,re=null===(v=null===(g=null==q?void 0:q.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],Le=re?_e(re):null;return Le?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(In,ot.url)),g.onEvent(Jr||bn())});return function(In){return ht.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,re);const Le=T,Qe=`${R.packageName.toLowerCase()}://`;Es().handleOpenURL=function(){var ht=(0,d.Z)(function*(ot){if(ot.toLowerCase().startsWith(Qe)&&re({url:ot}),"function"==typeof Le)try{Le(ot)}catch(In){console.error(In)}});return function(ot){return ht.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=nr,this._completeRedirectFn=kn}_initialize(f){var g=this;return(0,d.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,v,T){var R=this;return(0,d.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,g,v,T)})()}_openRedirect(f,g,v,T){var R=this;return(0,d.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,g,v,T)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return cd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Mp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,d.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Sr(){return Ji.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function Rp(y){return y.unwrap()}function Kh(y){return Su(y)}function Su(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return bi.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let v;switch(g){case"google.com":v=wa;break;case"facebook.com":v=ao;break;case"github.com":v=Lc;break;case"twitter.com":v=nu;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:q,pendingToken:re,nonce:Le}=f;return R||q||T||re?re?g.startsWith("saml.")?Vo._create(g,re):hs._fromParams({providerId:g,signInMethod:g,pendingToken:re,idToken:T,accessToken:R}):new Lo(g).credential({idToken:T,accessToken:R,rawNonce:Le}):null}return y instanceof O.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function zn(y,f){return f.catch(g=>{throw g instanceof O.ZR&&function hd(y,f){var g;const v=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Vl(y,function mu(y,f){var g;const v=(0,O.m9)(y),T=f;return ne(f.customData.operationType,v,"argument-error"),ne(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),Ta._fromError(v,T)}(y,f));else if(v){const T=Su(f),R=f;T&&(R.credential=T,R.tenantId=v.tenantId||void 0,R.email=v.email||void 0,R.phoneNumber=v.phoneNumber||void 0)}}(y,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:Kh(g),additionalUserInfo:Ar(g),user:Ti.getOrCreate(T)}})}function Ll(y,f){return fd.apply(this,arguments)}function fd(){return(fd=(0,d.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:v=>zn(y,g.confirm(v))}})).apply(this,arguments)}class Vl{constructor(f,g){this.resolver=g,this.auth=function Um(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return zn(Rp(this.auth),this.resolver.resolveSignIn(f))}}class Ti{constructor(f){this._delegate=f,this.multiFactor=function Zc(y){const f=(0,O.m9)(y);return $o.has(f)||$o.set(f,ms._fromUser(f)),$o.get(f)}(f)}static getOrCreate(f){return Ti.USER_MAP.has(f)||Ti.USER_MAP.set(f,new Ti(f)),Ti.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,d.Z)(function*(){return zn(g.auth,yi(g._delegate,f))})()}linkWithPhoneNumber(f,g){var v=this;return(0,d.Z)(function*(){return Ll(v.auth,function sr(y,f,g){return yo.apply(this,arguments)}(v._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,d.Z)(function*(){return zn(g.auth,function xh(y,f,g){return xa.apply(this,arguments)}(g._delegate,f,Xi))})()}linkWithRedirect(f){var g=this;return(0,d.Z)(function*(){return yield Pl(Ne(g.auth)),function nt(y,f,g){return function yt(y,f,g){return Ft.apply(this,arguments)}(y,f,g)}(g._delegate,f,Xi)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,d.Z)(function*(){return zn(g.auth,Fs(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Ll(this.auth,function Sh(y,f,g){return Aa.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return zn(this.auth,function vs(y,f,g){return Iu.apply(this,arguments)}(this._delegate,f,Xi))}reauthenticateWithRedirect(f){var g=this;return(0,d.Z)(function*(){return yield Pl(Ne(g.auth)),function ee(y,f,g){return function xe(y,f,g){return Ke.apply(this,arguments)}(y,f,g)}(g._delegate,f,Xi)})()}sendEmailVerification(f){return function _i(y,f){return ul.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,d.Z)(function*(){return yield function Ea(y,f){return tl.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function dl(y,f){return hl((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function jc(y,f){return hl((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function wl(y,f){return qi.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Ca(y,f){return cl.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function pu(y,f,g){return gu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ti.USER_MAP=new WeakMap;const Ul=ne;let Pn=(()=>{class y{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;Ul(T,"invalid-api-key",{appName:g.name}),Ul(T,"invalid-api-key",{appName:g.name});const R="undefined"!=typeof window?Xi:void 0;this._delegate=v.initialize({options:{persistence:Bm(T,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Re),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ti.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function cn(y,f,g){const v=Ne(y);ne(v._canInitEmulator,v,"emulator-config-failed"),ne(/^https?:\/\//.test(f),v,"invalid-emulator-scheme");const T=!!(null==g?void 0:g.disableWarnings),R=gr(f),{host:q,port:re}=function Ss(y){const f=gr(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const R=T[1];return{host:R,port:Ln(v.substr(R.length+1))}}{const[R,q]=v.split(":");return{host:R,port:Ln(q)}}}(f);v.config.emulator={url:`${R}//${q}${null===re?"":`:${re}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:q,port:re,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Li(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,v)}applyActionCode(g){return function rl(y,f){return be.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return xt(this._delegate,g)}confirmPasswordReset(g,v){return function du(y,f,g){return nl.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var T=this;return(0,d.Z)(function*(){return zn(T._delegate,function jo(y,f,g){return zr.apply(this,arguments)}(T._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function fu(y,f){return Bs.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function al(y,f){const g=oo.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,d.Z)(function*(){Ul(kl(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function wt(y,f){return jn.apply(this,arguments)}(g._delegate,Xi);return v?zn(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function ld(y,f){Ne(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,v,T){const{next:R,error:q,complete:re}=Yh(g,v,T);return this._delegate.onAuthStateChanged(R,q,re)}onIdTokenChanged(g,v,T){const{next:R,error:q,complete:re}=Yh(g,v,T);return this._delegate.onIdTokenChanged(R,q,re)}sendSignInLinkToEmail(g,v){return function ol(y,f,g){return Bc.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function lu(y,f,g){return cu.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,d.Z)(function*(){let T;switch(function xp(y,f){Au(Object.values(Ci).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?Au(f!==Ci.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?Au(f===Ci.NONE,y,"unsupported-persistence-type"):Qi()?Au(f===Ci.NONE||f===Ci.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):Au(f===Ci.NONE||Zn(),y,"unsupported-persistence-type")}(v._delegate,g),g){case Ci.SESSION:T=nr;break;case Ci.LOCAL:T=(yield te(qn)._isAvailable())?qn:yn;break;case Ci.NONE:T=H;break;default:return Ie("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return zn(this._delegate,function iu(y){return Vc.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return zn(this._delegate,Rn(this._delegate,g))}signInWithCustomToken(g){return zn(this._delegate,function Ls(y,f){return Vs.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return zn(this._delegate,function sl(y,f,g){return Rn((0,O.m9)(y),el.credential(f,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return zn(this._delegate,function hu(y,f,g){return Us.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return Ll(this._delegate,function Fr(y,f,g){return En.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,d.Z)(function*(){return Ul(kl(),v._delegate,"operation-not-supported-in-this-environment"),zn(v._delegate,function Gs(y,f,g){return bu.apply(this,arguments)}(v._delegate,g,Xi))})()}signInWithRedirect(g){var v=this;return(0,d.Z)(function*(){return Ul(kl(),v._delegate,"operation-not-supported-in-this-environment"),yield Pl(v._delegate),function x(y,f,g){return function F(y,f,g){return Z.apply(this,arguments)}(y,f,g)}(v._delegate,g,Xi)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function wn(y,f){return Bo.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ci,y})();function Yh(y,f,g){let v=y;"function"!=typeof y&&({next:v,error:f,complete:g}=y);const T=v;return{next:q=>T(q&&Ti.getOrCreate(q)),error:f,complete:g}}function Bm(y,f){const g=function dd(y,f){const g=Wh();if(!g)return[];const v=le(zh,y,f);switch(g.getItem(v)){case Ci.NONE:return[H];case Ci.LOCAL:return[qn,nr];case Ci.SESSION:return[nr];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(qn)&&g.push(qn),"undefined"!=typeof window)for(const v of[yn,nr])g.includes(v)||g.push(v);return g.includes(H)||g.push(H),g}class Qh{constructor(){this.providerId="phone",this._delegate=new bi(Rp(W.Z.auth()))}static credential(f,g){return bi.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Qh.PHONE_SIGN_IN_METHOD=bi.PHONE_SIGN_IN_METHOD,Qh.PROVIDER_ID=bi.PROVIDER_ID;const jm=ne;class $m{constructor(f,g,v=W.Z.app()){var T;jm(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new Qc(f,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Op(y){y.INTERNAL.registerComponent(new ie.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),v=f.getProvider("auth");return new Pn(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:el,FacebookAuthProvider:ao,GithubAuthProvider:Lc,GoogleAuthProvider:wa,OAuthProvider:Lo,SAMLAuthProvider:ri,PhoneAuthProvider:Qh,PhoneMultiFactorGenerator:km,RecaptchaVerifier:$m,TwitterAuthProvider:nu,Auth:Pn,AuthCredential:rn,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.12")}(W.Z)},8306:(st,Te,k)=>{k.d(Te,{y:()=>B});var d=k(2961),W=k(727),O=k(8822),oe=k(4671);var ie=k(2416),de=k(576),ue=k(2806);let B=(()=>{class Ae{constructor(Pe){Pe&&(this._subscribe=Pe)}lift(Pe){const fe=new Ae;return fe.source=this,fe.operator=Pe,fe}subscribe(Pe,fe,we){const et=function qe(Ae){return Ae&&Ae instanceof d.Lv||function Y(Ae){return Ae&&(0,de.m)(Ae.next)&&(0,de.m)(Ae.error)&&(0,de.m)(Ae.complete)}(Ae)&&(0,W.Nn)(Ae)}(Pe)?Pe:new d.Hp(Pe,fe,we);return(0,ue.x)(()=>{const{operator:ze,source:Ie}=this;et.add(ze?ze.call(et,Ie):Ie?this._subscribe(et):this._trySubscribe(et))}),et}_trySubscribe(Pe){try{return this._subscribe(Pe)}catch(fe){Pe.error(fe)}}forEach(Pe,fe){return new(fe=j(fe))((we,et)=>{const ze=new d.Hp({next:Ie=>{try{Pe(Ie)}catch(_e){et(_e),ze.unsubscribe()}},error:et,complete:we});this.subscribe(ze)})}_subscribe(Pe){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(Pe)}[O.L](){return this}pipe(...Pe){return function pe(Ae){return 0===Ae.length?oe.y:1===Ae.length?Ae[0]:function(Pe){return Ae.reduce((fe,we)=>we(fe),Pe)}}(Pe)(this)}toPromise(Pe){return new(Pe=j(Pe))((fe,we)=>{let et;this.subscribe(ze=>et=ze,ze=>we(ze),()=>fe(et))})}}return Ae.create=Re=>new Ae(Re),Ae})();function j(Ae){var Re;return null!==(Re=null!=Ae?Ae:ie.v.Promise)&&void 0!==Re?Re:Promise}},7579:(st,Te,k)=>{k.d(Te,{x:()=>ie});var d=k(8306),W=k(727);const oe=(0,k(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var X=k(8737),pe=k(2806);let ie=(()=>{class ue extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Y=new de(this,this);return Y.operator=j,Y}_throwIfClosed(){if(this.closed)throw new oe}next(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(j)}})}error(j){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Y}=this;for(;Y.length;)Y.shift().error(j)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Y,isStopped:qe,observers:Ae}=this;return Y||qe?W.Lc:(this.currentObservers=null,Ae.push(j),new W.w0(()=>{this.currentObservers=null,(0,X.P)(Ae,j)}))}_checkFinalizedStatuses(j){const{hasError:Y,thrownError:qe,isStopped:Ae}=this;Y?j.error(qe):Ae&&j.complete()}asObservable(){const j=new d.y;return j.source=this,j}}return ue.create=(B,j)=>new de(B,j),ue})();class de extends ie{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,Y;null===(Y=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Y||Y.call(j,B)}error(B){var j,Y;null===(Y=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Y||Y.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,Y;return null!==(Y=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==Y?Y:W.Lc}}},2961:(st,Te,k)=>{k.d(Te,{Hp:()=>Pe,Lv:()=>Y});var d=k(576),W=k(727),O=k(2416),oe=k(7849);function X(){}const pe=ue("C",void 0,void 0);function ue(Ie,_e,ve){return{kind:Ie,value:_e,error:ve}}var B=k(3410),j=k(2806);class Y extends W.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,W.Nn)(_e)&&_e.add(this)):this.destination=ze}static create(_e,ve,je){return new Pe(_e,ve,je)}next(_e){this.isStopped?et(function de(Ie){return ue("N",Ie,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?et(function ie(Ie){return ue("E",void 0,Ie)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?et(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Ae(Ie,_e){return qe.call(Ie,_e)}class Re{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:ve}=this;if(ve.next)try{ve.next(_e)}catch(je){fe(je)}}error(_e){const{partialObserver:ve}=this;if(ve.error)try{ve.error(_e)}catch(je){fe(je)}else fe(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(ve){fe(ve)}}}class Pe extends Y{constructor(_e,ve,je){let Be;if(super(),(0,d.m)(_e)||!_e)Be={next:null!=_e?_e:void 0,error:null!=ve?ve:void 0,complete:null!=je?je:void 0};else{let ne;this&&O.v.useDeprecatedNextContext?(ne=Object.create(_e),ne.unsubscribe=()=>this.unsubscribe(),Be={next:_e.next&&Ae(_e.next,ne),error:_e.error&&Ae(_e.error,ne),complete:_e.complete&&Ae(_e.complete,ne)}):Be=_e}this.destination=new Re(Be)}}function fe(Ie){O.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Ie):(0,oe.h)(Ie)}function et(Ie,_e){const{onStoppedNotification:ve}=O.v;ve&&B.z.setTimeout(()=>ve(Ie,_e))}const ze={closed:!0,next:X,error:function we(Ie){throw Ie},complete:X}},727:(st,Te,k)=>{k.d(Te,{Lc:()=>pe,w0:()=>X,Nn:()=>ie});var d=k(576);const O=(0,k(3888).d)(ue=>function(j){ue(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Y,qe)=>`${qe+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var oe=k(8737);class X{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Ae of j)Ae.remove(this);else j.remove(this);const{initialTeardown:Y}=this;if((0,d.m)(Y))try{Y()}catch(Ae){B=Ae instanceof O?Ae.errors:[Ae]}const{_finalizers:qe}=this;if(qe){this._finalizers=null;for(const Ae of qe)try{de(Ae)}catch(Re){B=null!=B?B:[],Re instanceof O?B=[...B,...Re.errors]:B.push(Re)}}if(B)throw new O(B)}}add(B){var j;if(B&&B!==this)if(this.closed)de(B);else{if(B instanceof X){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,oe.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,oe.P)(j,B),B instanceof X&&B._removeParent(this)}}X.EMPTY=(()=>{const ue=new X;return ue.closed=!0,ue})();const pe=X.EMPTY;function ie(ue){return ue instanceof X||ue&&"closed"in ue&&(0,d.m)(ue.remove)&&(0,d.m)(ue.add)&&(0,d.m)(ue.unsubscribe)}function de(ue){(0,d.m)(ue)?ue():ue.unsubscribe()}},2416:(st,Te,k)=>{k.d(Te,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(st,Te,k)=>{k.d(Te,{E:()=>W});const W=new(k(8306).y)(X=>X.complete())},8996:(st,Te,k)=>{k.d(Te,{D:()=>_e});var d=k(8421),W=k(5363),O=k(9468),pe=k(8306),de=k(2202),ue=k(576),B=k(9672);function Y(ve,je){if(!ve)throw new Error("Iterable cannot be null");return new pe.y(Be=>{(0,B.f)(Be,je,()=>{const ne=ve[Symbol.asyncIterator]();(0,B.f)(Be,je,()=>{ne.next().then(Ze=>{Ze.done?Be.complete():Be.next(Ze.value)})},0,!0)})})}var qe=k(3670),Ae=k(8239),Re=k(1144),Pe=k(6495),fe=k(2206),we=k(4532),et=k(3260);function _e(ve,je){return je?function Ie(ve,je){if(null!=ve){if((0,qe.c)(ve))return function oe(ve,je){return(0,d.Xf)(ve).pipe((0,O.R)(je),(0,W.Q)(je))}(ve,je);if((0,Re.z)(ve))return function ie(ve,je){return new pe.y(Be=>{let ne=0;return je.schedule(function(){ne===ve.length?Be.complete():(Be.next(ve[ne++]),Be.closed||this.schedule())})})}(ve,je);if((0,Ae.t)(ve))return function X(ve,je){return(0,d.Xf)(ve).pipe((0,O.R)(je),(0,W.Q)(je))}(ve,je);if((0,fe.D)(ve))return Y(ve,je);if((0,Pe.T)(ve))return function j(ve,je){return new pe.y(Be=>{let ne;return(0,B.f)(Be,je,()=>{ne=ve[de.h](),(0,B.f)(Be,je,()=>{let Ze,J;try{({value:Ze,done:J}=ne.next())}catch(se){return void Be.error(se)}J?Be.complete():Be.next(Ze)},0,!0)}),()=>(0,ue.m)(null==ne?void 0:ne.return)&&ne.return()})}(ve,je);if((0,et.L)(ve))return function ze(ve,je){return Y((0,et.Q)(ve),je)}(ve,je)}throw(0,we.z)(ve)}(ve,je):(0,d.Xf)(ve)}},8421:(st,Te,k)=>{k.d(Te,{Xf:()=>qe});var d=k(655),W=k(1144),O=k(8239),oe=k(8306),X=k(3670),pe=k(2206),ie=k(4532),de=k(6495),ue=k(3260),B=k(576),j=k(7849),Y=k(8822);function qe(Ie){if(Ie instanceof oe.y)return Ie;if(null!=Ie){if((0,X.c)(Ie))return function Ae(Ie){return new oe.y(_e=>{const ve=Ie[Y.L]();if((0,B.m)(ve.subscribe))return ve.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ie);if((0,W.z)(Ie))return function Re(Ie){return new oe.y(_e=>{for(let ve=0;ve<Ie.length&&!_e.closed;ve++)_e.next(Ie[ve]);_e.complete()})}(Ie);if((0,O.t)(Ie))return function Pe(Ie){return new oe.y(_e=>{Ie.then(ve=>{_e.closed||(_e.next(ve),_e.complete())},ve=>_e.error(ve)).then(null,j.h)})}(Ie);if((0,pe.D)(Ie))return we(Ie);if((0,de.T)(Ie))return function fe(Ie){return new oe.y(_e=>{for(const ve of Ie)if(_e.next(ve),_e.closed)return;_e.complete()})}(Ie);if((0,ue.L)(Ie))return function et(Ie){return we((0,ue.Q)(Ie))}(Ie)}throw(0,ie.z)(Ie)}function we(Ie){return new oe.y(_e=>{(function ze(Ie,_e){var ve,je,Be,ne;return(0,d.mG)(this,void 0,void 0,function*(){try{for(ve=(0,d.KL)(Ie);!(je=yield ve.next()).done;)if(_e.next(je.value),_e.closed)return}catch(Ze){Be={error:Ze}}finally{try{je&&!je.done&&(ne=ve.return)&&(yield ne.call(ve))}finally{if(Be)throw Be.error}}_e.complete()})})(Ie,_e).catch(ve=>_e.error(ve))})}},6451:(st,Te,k)=>{k.d(Te,{T:()=>pe});var d=k(8189),W=k(8421),O=k(515),oe=k(7669),X=k(8996);function pe(...ie){const de=(0,oe.yG)(ie),ue=(0,oe._6)(ie,1/0),B=ie;return B.length?1===B.length?(0,W.Xf)(B[0]):(0,d.J)(ue)((0,X.D)(B,de)):O.E}},5403:(st,Te,k)=>{k.d(Te,{x:()=>W});var d=k(2961);function W(oe,X,pe,ie,de){return new O(oe,X,pe,ie,de)}class O extends d.Lv{constructor(X,pe,ie,de,ue,B){super(X),this.onFinalize=ue,this.shouldUnsubscribe=B,this._next=pe?function(j){try{pe(j)}catch(Y){X.error(Y)}}:super._next,this._error=de?function(j){try{de(j)}catch(Y){X.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=ie?function(){try{ie()}catch(j){X.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var X;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(X=this.onFinalize)||void 0===X||X.call(this))}}}},4004:(st,Te,k)=>{k.d(Te,{U:()=>O});var d=k(4482),W=k(5403);function O(oe,X){return(0,d.e)((pe,ie)=>{let de=0;pe.subscribe((0,W.x)(ie,ue=>{ie.next(oe.call(X,ue,de++))}))})}},8189:(st,Te,k)=>{k.d(Te,{J:()=>O});var d=k(5577),W=k(4671);function O(oe=1/0){return(0,d.z)(W.y,oe)}},5577:(st,Te,k)=>{k.d(Te,{z:()=>de});var d=k(4004),W=k(8421),O=k(4482),oe=k(9672),X=k(5403),ie=k(576);function de(ue,B,j=1/0){return(0,ie.m)(B)?de((Y,qe)=>(0,d.U)((Ae,Re)=>B(Y,Ae,qe,Re))((0,W.Xf)(ue(Y,qe))),j):("number"==typeof B&&(j=B),(0,O.e)((Y,qe)=>function pe(ue,B,j,Y,qe,Ae,Re,Pe){const fe=[];let we=0,et=0,ze=!1;const Ie=()=>{ze&&!fe.length&&!we&&B.complete()},_e=je=>we<Y?ve(je):fe.push(je),ve=je=>{Ae&&B.next(je),we++;let Be=!1;(0,W.Xf)(j(je,et++)).subscribe((0,X.x)(B,ne=>{null==qe||qe(ne),Ae?_e(ne):B.next(ne)},()=>{Be=!0},void 0,()=>{if(Be)try{for(we--;fe.length&&we<Y;){const ne=fe.shift();Re?(0,oe.f)(B,Re,()=>ve(ne)):ve(ne)}Ie()}catch(ne){B.error(ne)}}))};return ue.subscribe((0,X.x)(B,_e,()=>{ze=!0,Ie()})),()=>{null==Pe||Pe()}}(Y,qe,ue,j)))}},5363:(st,Te,k)=>{k.d(Te,{Q:()=>oe});var d=k(9672),W=k(4482),O=k(5403);function oe(X,pe=0){return(0,W.e)((ie,de)=>{ie.subscribe((0,O.x)(de,ue=>(0,d.f)(de,X,()=>de.next(ue),pe),()=>(0,d.f)(de,X,()=>de.complete(),pe),ue=>(0,d.f)(de,X,()=>de.error(ue),pe)))})}},3099:(st,Te,k)=>{k.d(Te,{B:()=>pe});var d=k(8996),W=k(5698),O=k(7579),oe=k(2961),X=k(4482);function pe(de={}){const{connector:ue=(()=>new O.x),resetOnError:B=!0,resetOnComplete:j=!0,resetOnRefCountZero:Y=!0}=de;return qe=>{let Ae=null,Re=null,Pe=null,fe=0,we=!1,et=!1;const ze=()=>{null==Re||Re.unsubscribe(),Re=null},Ie=()=>{ze(),Ae=Pe=null,we=et=!1},_e=()=>{const ve=Ae;Ie(),null==ve||ve.unsubscribe()};return(0,X.e)((ve,je)=>{fe++,!et&&!we&&ze();const Be=Pe=null!=Pe?Pe:ue();je.add(()=>{fe--,0===fe&&!et&&!we&&(Re=ie(_e,Y))}),Be.subscribe(je),Ae||(Ae=new oe.Hp({next:ne=>Be.next(ne),error:ne=>{et=!0,ze(),Re=ie(Ie,B,ne),Be.error(ne)},complete:()=>{we=!0,ze(),Re=ie(Ie,j),Be.complete()}}),(0,d.D)(ve).subscribe(Ae))})(qe)}}function ie(de,ue,...B){return!0===ue?(de(),null):!1===ue?null:ue(...B).pipe((0,W.q)(1)).subscribe(()=>de())}},9468:(st,Te,k)=>{k.d(Te,{R:()=>W});var d=k(4482);function W(O,oe=0){return(0,d.e)((X,pe)=>{pe.add(O.schedule(()=>X.subscribe(pe),oe))})}},5698:(st,Te,k)=>{k.d(Te,{q:()=>oe});var d=k(515),W=k(4482),O=k(5403);function oe(X){return X<=0?()=>d.E:(0,W.e)((pe,ie)=>{let de=0;pe.subscribe((0,O.x)(ie,ue=>{++de<=X&&(ie.next(ue),X<=de&&ie.complete())}))})}},8505:(st,Te,k)=>{k.d(Te,{b:()=>X});var d=k(576),W=k(4482),O=k(5403),oe=k(4671);function X(pe,ie,de){const ue=(0,d.m)(pe)||ie||de?{next:pe,error:ie,complete:de}:pe;return ue?(0,W.e)((B,j)=>{var Y;null===(Y=ue.subscribe)||void 0===Y||Y.call(ue);let qe=!0;B.subscribe((0,O.x)(j,Ae=>{var Re;null===(Re=ue.next)||void 0===Re||Re.call(ue,Ae),j.next(Ae)},()=>{var Ae;qe=!1,null===(Ae=ue.complete)||void 0===Ae||Ae.call(ue),j.complete()},Ae=>{var Re;qe=!1,null===(Re=ue.error)||void 0===Re||Re.call(ue,Ae),j.error(Ae)},()=>{var Ae,Re;qe&&(null===(Ae=ue.unsubscribe)||void 0===Ae||Ae.call(ue)),null===(Re=ue.finalize)||void 0===Re||Re.call(ue)}))}):oe.y}},4408:(st,Te,k)=>{k.d(Te,{o:()=>X});var d=k(727);class W extends d.w0{constructor(ie,de){super()}schedule(ie,de=0){return this}}const O={setInterval(pe,ie,...de){const{delegate:ue}=O;return(null==ue?void 0:ue.setInterval)?ue.setInterval(pe,ie,...de):setInterval(pe,ie,...de)},clearInterval(pe){const{delegate:ie}=O;return((null==ie?void 0:ie.clearInterval)||clearInterval)(pe)},delegate:void 0};var oe=k(8737);class X extends W{constructor(ie,de){super(ie,de),this.scheduler=ie,this.work=de,this.pending=!1}schedule(ie,de=0){if(this.closed)return this;this.state=ie;const ue=this.id,B=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(B,ue,de)),this.pending=!0,this.delay=de,this.id=this.id||this.requestAsyncId(B,this.id,de),this}requestAsyncId(ie,de,ue=0){return O.setInterval(ie.flush.bind(ie,this),ue)}recycleAsyncId(ie,de,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return de;O.clearInterval(de)}execute(ie,de){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(ie,de);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,de){let B,ue=!1;try{this.work(ie)}catch(j){ue=!0,B=j||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:ie,scheduler:de}=this,{actions:ue}=de;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(ue,this),null!=ie&&(this.id=this.recycleAsyncId(de,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(st,Te,k)=>{k.d(Te,{v:()=>O});var d=k(6063);class W{constructor(X,pe=W.now){this.schedulerActionCtor=X,this.now=pe}schedule(X,pe=0,ie){return new this.schedulerActionCtor(this,X).schedule(ie,pe)}}W.now=d.l.now;class O extends W{constructor(X,pe=W.now){super(X,pe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(X){const{actions:pe}=this;if(this._active)return void pe.push(X);let ie;this._active=!0;do{if(ie=X.execute(X.state,X.delay))break}while(X=pe.shift());if(this._active=!1,ie){for(;X=pe.shift();)X.unsubscribe();throw ie}}}},4986:(st,Te,k)=>{k.d(Te,{z:()=>O});var d=k(4408);const O=new(k(7565).v)(d.o)},6063:(st,Te,k)=>{k.d(Te,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(st,Te,k)=>{k.d(Te,{z:()=>d});const d={setTimeout(W,O,...oe){const{delegate:X}=d;return(null==X?void 0:X.setTimeout)?X.setTimeout(W,O,...oe):setTimeout(W,O,...oe)},clearTimeout(W){const{delegate:O}=d;return((null==O?void 0:O.clearTimeout)||clearTimeout)(W)},delegate:void 0}},2202:(st,Te,k)=>{k.d(Te,{h:()=>W});const W=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(st,Te,k)=>{k.d(Te,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(st,Te,k)=>{k.d(Te,{_6:()=>pe,jO:()=>oe,yG:()=>X});var d=k(576);function O(ie){return ie[ie.length-1]}function oe(ie){return(0,d.m)(O(ie))?ie.pop():void 0}function X(ie){return function W(ie){return ie&&(0,d.m)(ie.schedule)}(O(ie))?ie.pop():void 0}function pe(ie,de){return"number"==typeof O(ie)?ie.pop():de}},8737:(st,Te,k)=>{function d(W,O){if(W){const oe=W.indexOf(O);0<=oe&&W.splice(oe,1)}}k.d(Te,{P:()=>d})},3888:(st,Te,k)=>{function d(W){const oe=W(X=>{Error.call(X),X.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}k.d(Te,{d:()=>d})},2806:(st,Te,k)=>{k.d(Te,{O:()=>oe,x:()=>O});var d=k(2416);let W=null;function O(X){if(d.v.useDeprecatedSynchronousErrorHandling){const pe=!W;if(pe&&(W={errorThrown:!1,error:null}),X(),pe){const{errorThrown:ie,error:de}=W;if(W=null,ie)throw de}}else X()}function oe(X){d.v.useDeprecatedSynchronousErrorHandling&&W&&(W.errorThrown=!0,W.error=X)}},9672:(st,Te,k)=>{function d(W,O,oe,X=0,pe=!1){const ie=O.schedule(function(){oe(),pe?W.add(this.schedule(null,X)):this.unsubscribe()},X);if(W.add(ie),!pe)return ie}k.d(Te,{f:()=>d})},4671:(st,Te,k)=>{function d(W){return W}k.d(Te,{y:()=>d})},1144:(st,Te,k)=>{k.d(Te,{z:()=>d});const d=W=>W&&"number"==typeof W.length&&"function"!=typeof W},2206:(st,Te,k)=>{k.d(Te,{D:()=>W});var d=k(576);function W(O){return Symbol.asyncIterator&&(0,d.m)(null==O?void 0:O[Symbol.asyncIterator])}},576:(st,Te,k)=>{function d(W){return"function"==typeof W}k.d(Te,{m:()=>d})},3670:(st,Te,k)=>{k.d(Te,{c:()=>O});var d=k(8822),W=k(576);function O(oe){return(0,W.m)(oe[d.L])}},6495:(st,Te,k)=>{k.d(Te,{T:()=>O});var d=k(2202),W=k(576);function O(oe){return(0,W.m)(null==oe?void 0:oe[d.h])}},8239:(st,Te,k)=>{k.d(Te,{t:()=>W});var d=k(576);function W(O){return(0,d.m)(null==O?void 0:O.then)}},3260:(st,Te,k)=>{k.d(Te,{L:()=>oe,Q:()=>O});var d=k(655),W=k(576);function O(X){return(0,d.FC)(this,arguments,function*(){const ie=X.getReader();try{for(;;){const{value:de,done:ue}=yield(0,d.qq)(ie.read());if(ue)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(de)}}finally{ie.releaseLock()}})}function oe(X){return(0,W.m)(null==X?void 0:X.getReader)}},4482:(st,Te,k)=>{k.d(Te,{A:()=>W,e:()=>O});var d=k(576);function W(oe){return(0,d.m)(null==oe?void 0:oe.lift)}function O(oe){return X=>{if(W(X))return X.lift(function(pe){try{return oe(pe,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(st,Te,k)=>{k.d(Te,{h:()=>O});var d=k(2416),W=k(3410);function O(oe){W.z.setTimeout(()=>{const{onUnhandledError:X}=d.v;if(!X)throw oe;X(oe)})}},4532:(st,Te,k)=>{function d(W){return new TypeError(`You provided ${null!==W&&"object"==typeof W?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Te,{z:()=>d})},655:(st,Te,k)=>{function oe(J,se){var te={};for(var Ee in J)Object.prototype.hasOwnProperty.call(J,Ee)&&se.indexOf(Ee)<0&&(te[Ee]=J[Ee]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var ge=0;for(Ee=Object.getOwnPropertySymbols(J);ge<Ee.length;ge++)se.indexOf(Ee[ge])<0&&Object.prototype.propertyIsEnumerable.call(J,Ee[ge])&&(te[Ee[ge]]=J[Ee[ge]])}return te}function de(J,se,te,Ee){return new(te||(te=Promise))(function(ke,bt){function jt(Lt){try{He(Ee.next(Lt))}catch(Qn){bt(Qn)}}function nn(Lt){try{He(Ee.throw(Lt))}catch(Qn){bt(Qn)}}function He(Lt){Lt.done?ke(Lt.value):function ge(ke){return ke instanceof te?ke:new te(function(bt){bt(ke)})}(Lt.value).then(jt,nn)}He((Ee=Ee.apply(J,se||[])).next())})}function fe(J){return this instanceof fe?(this.v=J,this):new fe(J)}function we(J,se,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,Ee=te.apply(J,se||[]),ke=[];return ge={},bt("next"),bt("throw"),bt("return"),ge[Symbol.asyncIterator]=function(){return this},ge;function bt(Cn){Ee[Cn]&&(ge[Cn]=function(Kt){return new Promise(function(gi,$t){ke.push([Cn,Kt,gi,$t])>1||jt(Cn,Kt)})})}function jt(Cn,Kt){try{!function nn(Cn){Cn.value instanceof fe?Promise.resolve(Cn.value.v).then(He,Lt):Qn(ke[0][2],Cn)}(Ee[Cn](Kt))}catch(gi){Qn(ke[0][3],gi)}}function He(Cn){jt("next",Cn)}function Lt(Cn){jt("throw",Cn)}function Qn(Cn,Kt){Cn(Kt),ke.shift(),ke.length&&jt(ke[0][0],ke[0][1])}}function ze(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,se=J[Symbol.asyncIterator];return se?se.call(J):(J=function Y(J){var se="function"==typeof Symbol&&Symbol.iterator,te=se&&J[se],Ee=0;if(te)return te.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&Ee>=J.length&&(J=void 0),{value:J&&J[Ee++],done:!J}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),te={},Ee("next"),Ee("throw"),Ee("return"),te[Symbol.asyncIterator]=function(){return this},te);function Ee(ke){te[ke]=J[ke]&&function(bt){return new Promise(function(jt,nn){!function ge(ke,bt,jt,nn){Promise.resolve(nn).then(function(He){ke({value:He,done:jt})},bt)}(jt,nn,(bt=J[ke](bt)).done,bt.value)})}}}k.d(Te,{FC:()=>we,KL:()=>ze,_T:()=>oe,mG:()=>de,qq:()=>fe})},5e3:(st,Te,k)=>{k.d(Te,{$8M:()=>vu,$Z:()=>yg,AFp:()=>Wu,AaK:()=>de,CHM:()=>il,CRH:()=>LE,CZH:()=>Zf,CqO:()=>uw,EJc:()=>jD,EpF:()=>Ly,F4k:()=>aw,FYo:()=>U_,FiY:()=>an,G48:()=>wv,GfV:()=>B_,Gpc:()=>j,Gre:()=>Pw,JOm:()=>re,LFG:()=>nt,LSH:()=>Gh,Lbi:()=>UD,NdJ:()=>Uy,OlP:()=>Sn,Oqu:()=>Ky,PXZ:()=>WD,Q6J:()=>_g,QGY:()=>Vy,Qsj:()=>wE,R0b:()=>Is,RDi:()=>fs,Rgc:()=>ih,SBq:()=>Lf,Sil:()=>XE,Suo:()=>FE,TTD:()=>ao,TgZ:()=>wf,Udp:()=>Hy,VLi:()=>kT,X6Q:()=>QD,XFs:()=>at,Xpm:()=>St,Y36:()=>Uu,YKP:()=>xn,YNc:()=>Cy,Yjl:()=>Dr,Yz7:()=>Kt,ZZ4:()=>wm,_Bn:()=>Wg,_UZ:()=>Fy,_Vd:()=>Kg,_c5:()=>dC,_uU:()=>Mw,aQg:()=>Sv,c2e:()=>Ri,cJS:()=>$t,cg1:()=>u_,dDg:()=>rb,deG:()=>pp,dqk:()=>Pt,eFA:()=>Nr,ekj:()=>Gy,g9A:()=>Ka,h0i:()=>rh,hGG:()=>hC,hij:()=>Tf,iGM:()=>kE,ifc:()=>Ut,ip1:()=>zu,kL8:()=>l_,lG2:()=>Ht,n5z:()=>_u,oAB:()=>K,oxw:()=>Bu,q4F:()=>j_,qLn:()=>zn,qOj:()=>vy,qZA:()=>ca,s9C:()=>By,sBO:()=>JD,sIi:()=>gf,s_b:()=>Dc,soG:()=>hv,tBr:()=>oi,tb:()=>zf,tp0:()=>Ki,uIk:()=>by,vHH:()=>Re,vpe:()=>eo,wAp:()=>pt,xp6:()=>_d,z2F:()=>yv,zSh:()=>ag,zs3:()=>oa});var d=k(7579),W=k(727),O=k(8306),oe=k(6451),X=k(3099);function pe(i){for(let s in i)if(i[s]===pe)return s;throw Error("Could not find renamed property on target object.")}function ie(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function de(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(de).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ue(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=pe({__forward_ref__:pe});function j(i){return i.__forward_ref__=j,i.toString=function(){return de(this())},i}function Y(i){return qe(i)?i():i}function qe(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}class Re extends Error{constructor(s,a){super(function Pe(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function fe(i){return"string"==typeof i?i:null==i?"":String(i)}function we(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():fe(i)}function _e(i,s){const a=s?` in ${s}`:"";throw new Re(-201,`No provider for ${we(i)} found${a}`)}function nn(i,s){null==i&&function He(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Kt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function $t(i){return{providers:i.providers||[],imports:i.imports||[]}}function Vt(i){return hr(i,Pi)||hr(i,as)}function hr(i,s){return i.hasOwnProperty(s)?i[s]:null}function Or(i){return i&&(i.hasOwnProperty(kr)||i.hasOwnProperty(us))?i[kr]:null}const Pi=pe({\u0275prov:pe}),kr=pe({\u0275inj:pe}),as=pe({ngInjectableDef:pe}),us=pe({ngInjectorDef:pe});var at=(()=>((at=at||{})[at.Default=0]="Default",at[at.Host=1]="Host",at[at.Self=2]="Self",at[at.SkipSelf=4]="SkipSelf",at[at.Optional=8]="Optional",at))();let $r;function Hn(i){const s=$r;return $r=i,s}function ei(i,s,a){const l=Vt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&at.Optional?null:void 0!==s?s:void _e(de(i),"Injector")}function mn(i){return{toString:i}.toString()}var Xn=(()=>((Xn=Xn||{})[Xn.OnPush=0]="OnPush",Xn[Xn.Default=1]="Default",Xn))(),Ut=(()=>{return(i=Ut||(Ut={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Ut;var i})();const rt="undefined"!=typeof globalThis&&globalThis,mt="undefined"!=typeof window&&window,fr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Pt=rt||"undefined"!=typeof global&&global||mt||fr,pr={},ut=[],Ir=pe({\u0275cmp:pe}),Rt=pe({\u0275dir:pe}),We=pe({\u0275pipe:pe}),De=pe({\u0275mod:pe}),Je=pe({\u0275fac:pe}),lt=pe({__NG_ELEMENT_ID__:pe});let kt=0;function St(i){return mn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Xn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||ut,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Ut.Emulated,id:"c",styles:i.styles||ut,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,p=i.features,_=i.pipes;return l.id+=kt++,l.inputs=gt(i.inputs,a),l.outputs=gt(i.outputs),p&&p.forEach(w=>w(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(L):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map(H):null,l})}function L(i){return Bt(i)||function Tn(i){return i[Rt]||null}(i)}function H(i){return function Ct(i){return i[We]||null}(i)}const le={};function K(i){return mn(()=>{const s={type:i.type,bootstrap:i.bootstrap||ut,declarations:i.declarations||ut,imports:i.imports||ut,exports:i.exports||ut,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(le[i.id]=i.type),s})}function gt(i,s){if(null==i)return pr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],p=c;Array.isArray(c)&&(p=c[1],c=c[0]),a[c]=l,s&&(s[c]=p)}return a}const Ht=St;function Dr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Bt(i){return i[Ir]||null}function ln(i,s){const a=i[De]||null;if(!a&&!0===s)throw new Error(`Type ${de(i)} does not have '\u0275mod' property.`);return a}function mi(i){return Array.isArray(i)&&"object"==typeof i[1]}function ni(i){return Array.isArray(i)&&!0===i[1]}function Rc(i){return 0!=(8&i.flags)}function Rs(i){return 2==(2&i.flags)}function Xa(i){return 1==(1&i.flags)}function Hr(i){return null!==i.template}function vh(i){return 0!=(512&i[2])}function Gr(i,s){return i.hasOwnProperty(Je)?i[Je]:null}class Lo{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function ao(){return wa}function wa(i){return i.type.prototype.ngOnChanges&&(i.setInput=dp),Lc}function Lc(){const i=ks(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===pr)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function dp(i,s,a,l){const c=ks(i)||function ri(i,s){return i[Vo]=s}(i,{previous:pr,current:null}),p=c.current||(c.current={}),_=c.previous,w=this.declaredInputs[a],b=_[w];p[w]=new Lo(b&&b.currentValue,s,_===pr),i[l]=s}ao.ngInherit=!0;const Vo="__ngSimpleChanges__";function ks(i){return i[Vo]||null}let ou;function fs(i){ou=i}function fn(i){return!!i.listen}const Uo={createRenderer:(i,s)=>function Ea(){return void 0!==ou?ou:"undefined"!=typeof document?document:void 0}()};function on(i){for(;Array.isArray(i);)i=i[0];return i}function lo(i,s){return on(s[i])}function Cr(i,s){return on(s[i.index])}function ba(i,s){return i.data[s]}function Tr(i,s){const a=s[i];return mi(a)?a:a[0]}function Fs(i){return 4==(4&i[2])}function ps(i){return 128==(128&i[2])}function Zr(i,s){return null==s?null:i[s]}function Ls(i){i[18]=0}function Vs(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const ct={lFrame:ho(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function du(){return ct.bindingsEnabled}function be(){return ct.lFrame.lView}function xt(){return ct.lFrame.tView}function il(i){return ct.lFrame.contextLView=i,i[8]}function wn(){let i=Bo();for(;null!==i&&64===i.type;)i=i.parent;return i}function Bo(){return ct.lFrame.currentTNode}function zr(i,s){const a=ct.lFrame;a.currentTNode=i,a.isParent=s}function sl(){return ct.lFrame.isParent}function hu(){return ct.isInCheckNoChangesMode}function Us(i){ct.isInCheckNoChangesMode=i}function Bs(){return ct.lFrame.bindingIndex++}function _i(i){const s=ct.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function gu(i,s){const a=ct.lFrame;a.bindingIndex=a.bindingRootIndex=i,Da(s)}function Da(i){ct.lFrame.currentDirectiveIndex=i}function cl(){return ct.lFrame.currentQueryIndex}function dl(i){ct.lFrame.currentQueryIndex=i}function jc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function hl(i,s,a){if(a&at.SkipSelf){let c=s,p=i;for(;!(c=c.parent,null!==c||a&at.Host||(c=jc(p),null===c||(p=p[15],10&c.type))););if(null===c)return!1;s=c,i=p}const l=ct.lFrame=$c();return l.currentTNode=s,l.lView=i,!0}function co(i){const s=$c(),a=i[1];ct.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function $c(){const i=ct.lFrame,s=null===i?null:i.child;return null===s?ho(i):s}function ho(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Hc(){const i=ct.lFrame;return ct.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Gc=Hc;function fo(){const i=Hc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Ar(){return ct.lFrame.selectedIndex}function $s(i){ct.lFrame.selectedIndex=i}function An(){const i=ct.lFrame;return ba(i.tView,i.selectedIndex)}function gs(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:w,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:S}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),b&&(i.viewHooks||(i.viewHooks=[])).push(-a,b),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function Ta(i,s,a){qc(i,s,3,a)}function mu(i,s,a,l){(3&i[2])===a&&qc(i,s,a,l)}function Un(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function qc(i,s,a,l){const p=null!=l?l:-1,_=s.length-1;let w=0;for(let b=void 0!==l?65535&i[18]:0;b<_;b++)if("number"==typeof s[b+1]){if(w=s[b],null!=l&&w>=l)break}else s[b]<0&&(i[18]+=65536),(w<p||-1==p)&&(hp(i,a,s,b),i[18]=(4294901760&i[18])+b+2),b++}function hp(i,s,a,l){const c=a[l]<0,p=a[l+1],w=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(w)}finally{}}}else try{p.call(w)}finally{}}class $o{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function yl(i,s,a){const l=fn(i);let c=0;for(;c<a.length;){const p=a[c];if("number"==typeof p){if(0!==p)break;c++;const _=a[c++],w=a[c++],b=a[c++];l?i.setAttribute(s,w,b,_):s.setAttributeNS(_,w,b)}else{const _=p,w=a[++c];_n(_)?l&&i.setProperty(s,_,w):l?i.setAttribute(s,_,w):s.setAttribute(_,w),c++}}return c}function nr(i){return 3===i||4===i||6===i}function _n(i){return 64===i.charCodeAt(0)}function Vi(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||dt(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function dt(i,s,a,l,c){let p=0,_=i.length;if(-1===s)_=-1;else for(;p<i.length;){const w=i[p++];if("number"==typeof w){if(w===s){_=-1;break}if(w>s){_=p-1;break}}}for(;p<i.length;){const w=i[p];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==c&&(i[p+1]=c));if(l===i[p+1])return void(i[p+2]=c)}p++,null!==l&&p++,null!==c&&p++}-1!==_&&(i.splice(_,0,s),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==c&&i.splice(p++,0,c)}function rr(i){return-1!==i}function tn(i){return 32767&i}function si(i,s){let a=function Dh(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let _r=!0;function vi(i){const s=_r;return _r=i,s}let Ch=0;function Bi(i,s){const a=Ho(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,ys(l.data,i),ys(s,null),ys(l.blueprint,null));const c=Nn(i,s),p=i.injectorIndex;if(rr(c)){const _=tn(c),w=si(c,s),b=w[1].data;for(let A=0;A<8;A++)s[p+A]=w[_+A]|b[_+A]}return s[p+8]=c,p}function ys(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Ho(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Nn(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const p=c[1],_=p.type;if(l=2===_?p.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function ir(i,s,a){!function Ui(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(lt)&&(l=a[lt]),null==l&&(l=a[lt]=Ch++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function go(i,s,a){if(a&at.Optional)return i;_e(s,"NodeInjector")}function me(i,s,a,l){if(a&at.Optional&&void 0===l&&(l=null),0==(a&(at.Self|at.Host))){const c=i[9],p=Hn(void 0);try{return c?c.get(s,l,a&at.Optional):ei(s,l,a&at.Optional)}finally{Hn(p)}}return go(l,s,a)}function wi(i,s,a,l=at.Default,c){if(null!==i){const p=function Ye(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(lt)?i[lt]:void 0;return"number"==typeof s?s>=0?255&s:$i:s}(a);if("function"==typeof p){if(!hl(s,i,l))return l&at.Host?go(c,a,l):me(s,a,l,c);try{const _=p(l);if(null!=_||l&at.Optional)return _;_e(a)}finally{Gc()}}else if("number"==typeof p){let _=null,w=Ho(i,s),b=-1,A=l&at.Host?s[16][6]:null;for((-1===w||l&at.SkipSelf)&&(b=-1===w?Nn(i,s):s[w+8],-1!==b&&vt(l,!1)?(_=s[1],w=tn(b),s=si(b,s)):w=-1);-1!==w;){const S=s[1];if(Go(p,w,S.data)){const P=Nt(w,s,a,_,l,A);if(P!==ji)return P}b=s[w+8],-1!==b&&vt(l,s[1].data[w+8]===A)&&Go(p,w,s)?(_=S,w=tn(b),s=si(b,s)):w=-1}}}return me(s,a,l,c)}const ji={};function $i(){return new Kr(wn(),be())}function Nt(i,s,a,l,c,p){const _=s[1],w=_.data[i+8],S=_l(w,_,a,null==l?Rs(w)&&_r:l!=_&&0!=(3&w.type),c&at.Host&&p===w);return null!==S?qn(s,_,S,w):ji}function _l(i,s,a,l,c){const p=i.providerIndexes,_=s.data,w=1048575&p,b=i.directiveStart,S=p>>20,V=c?w+S:i.directiveEnd;for(let z=l?w:w+S;z<V;z++){const ye=_[z];if(z<b&&a===ye||z>=b&&ye.type===a)return z}if(c){const z=_[b];if(z&&Hr(z)&&z.type===a)return b}return null}function qn(i,s,a,l){let c=i[a];const p=s.data;if(function Zc(i){return i instanceof $o}(c)){const _=c;_.resolving&&function et(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new Re(-200,`Circular dependency in DI detected for ${i}${a}`)}(we(p[a]));const w=vi(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?Hn(_.injectImpl):null;hl(i,l,at.Default);try{c=i[a]=_.factory(void 0,p,i,l),s.firstCreatePass&&a>=l.directiveStart&&function gl(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:p}=s.type.prototype;if(l){const _=wa(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==b&&Hn(b),vi(w),_.resolving=!1,Gc()}}return c}function Go(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function vt(i,s){return!(i&at.Self||i&at.Host&&s)}class Kr{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return wi(this._tNode,this._lView,s,l,a)}}function _u(i){return mn(()=>{const s=i.prototype.constructor,a=s[Je]||Hi(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const p=c[Je]||Hi(c);if(p&&p!==a)return p;c=Object.getPrototypeOf(c)}return p=>new p})}function Hi(i){return qe(i)?()=>{const s=Hi(Y(i));return s&&s()}:Gr(i)}function vu(i){return function Wc(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const p=a[c];if(nr(p))break;if(0===p)c+=2;else if("number"==typeof p)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(p===s)return a[c+1];c+=2}}}return null}(wn(),i)}const qo="__parameters__";function _s(i,s,a){return mn(()=>{const l=function Bn(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...p){if(this instanceof c)return l.apply(this,p),this;const _=new c(...p);return w.annotation=_,w;function w(b,A,S){const P=b.hasOwnProperty(qo)?b[qo]:Object.defineProperty(b,qo,{value:[]})[qo];for(;P.length<=S;)P.push(null);return(P[S]=P[S]||[]).push(_),b}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class Sn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Kt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const pp=new Sn("AnalyzeForEntryComponents");function vr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),vr(l,s)):s!==i&&s.push(l)}return s}function Yr(i,s){i.forEach(a=>Array.isArray(a)?Yr(a,s):s(a))}function wl(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function qi(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Lr(i,s,a){let l=Gs(i,s);return l>=0?i[1|l]=a:(l=~l,function wu(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function Sa(i,s){const a=Gs(i,s);if(a>=0)return i[1|a]}function Gs(i,s){return function vs(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const p=l+(c-l>>1),_=i[p<<a];if(s===_)return p<<a;_>s?c=p:l=p+1}return~(c<<a)}(i,s,1)}const Di={},Ma="__NG_DI_FLAG__",Dl="ngTempTokenPath",D=/\n/gm,F="__source",Z=pe({provide:String,useValue:pe});let ee;function xe(i){const s=ee;return ee=i,s}function Ke(i,s=at.Default){if(void 0===ee)throw new Re(203,"");return null===ee?ei(i,void 0,s):ee.get(i,s&at.Optional?null:void 0,s)}function nt(i,s=at.Default){return(function Jn(){return $r}()||Ke)(Y(i),s)}const Ft=nt;function wt(i){const s=[];for(let a=0;a<i.length;a++){const l=Y(i[a]);if(Array.isArray(l)){if(0===l.length)throw new Re(900,"");let c,p=at.Default;for(let _=0;_<l.length;_++){const w=l[_],b=kn(w);"number"==typeof b?-1===b?c=w.token:p|=b:c=w}s.push(nt(c,p))}else s.push(nt(l))}return s}function jn(i,s){return i[Ma]=s,i.prototype[Ma]=s,i}function kn(i){return i[Ma]}const oi=jn(_s("Inject",i=>({token:i})),-1),an=jn(_s("Optional"),8),Ki=jn(_s("SkipSelf"),4);class kh{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ws(i){return i instanceof kh?i.changingThisBreaksApplicationSecurity:i}const Es=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Fm=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var $n=(()=>(($n=$n||{})[$n.NONE=0]="NONE",$n[$n.HTML=1]="HTML",$n[$n.STYLE=2]="STYLE",$n[$n.SCRIPT=3]="SCRIPT",$n[$n.URL=4]="URL",$n[$n.RESOURCE_URL=5]="RESOURCE_URL",$n))();function Gh(i){const s=function Ol(){const i=be();return i&&i[12]}();return s?s.sanitize($n.URL,i)||"":function wo(i,s){const a=function Al(i){return i instanceof kh&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?ws(i):function Ko(i){return(i=String(i)).match(Es)||i.match(Fm)?i:"unsafe:"+i}(fe(i))}const cd="__ngContext__";function Sr(i,s){i[cd]=s}function Zh(i){const s=function Ji(i){return i[cd]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Kh(i){return i.ngOriginalError}function Su(i,...s){i.error(...s)}class zn{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function hd(i){return i&&i.ngErrorLogger||Su}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Kh(s);for(;a&&Kh(a);)a=Kh(a);return a||null}}const $m=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Pt))();function g(i){return i instanceof Function?i():i}var re=(()=>((re=re||{})[re.Important=1]="Important",re[re.DashCase=2]="DashCase",re))();function Qe(i,s){return undefined(i,s)}function In(i){const s=i[3];return ni(s)?s[3]:s}function jl(i){return pd(i[13])}function Io(i){return pd(i[4])}function pd(i){for(;null!==i&&!ni(i);)i=i[4];return i}function zs(i,s,a,l,c){if(null!=l){let p,_=!1;ni(l)?p=l:mi(l)&&(_=!0,l=l[0]);const w=on(l);0===i&&null!==a?null==c?c0(s,a,w):Hl(s,a,w,c||null,!0):1===i&&null!==a?Hl(s,a,w,c||null,!0):2===i?function jp(i,s,a){const l=Gl(i,s);l&&function Jb(i,s,a,l){fn(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,w,_):3===i&&s.destroyNode(w),null!=p&&function ae(i,s,a,l,c){const p=a[7];p!==on(a)&&zs(s,i,l,p,c);for(let w=10;w<a.length;w++){const b=a[w];_t(b[1],b,i,s,l,p)}}(s,i,p,a,c)}}function $l(i,s,a){if(fn(i))return i.createElement(s,a);{const l=null!==a?function su(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function Jh(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Vs(c,-1)),a.splice(l,1)}function Ai(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&Jh(c,l),s>0&&(i[a-1][4]=l[4]);const p=qi(i,10+s);!function Pp(i,s){_t(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Hm(i,s){if(!(256&s[2])){const a=s[11];fn(a)&&a.destroyNode&&_t(i,s,a,3,null,null),function o0(i){let s=i[13];if(!s)return Lp(i[1],i);for(;s;){let a=null;if(mi(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)mi(s)&&Lp(s[1],s),s=s[3];null===s&&(s=i),mi(s)&&Lp(s[1],s),a=s&&s[4]}s=a}}(s)}}function Lp(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function Qb(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof $o)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const w=c[p[_]],b=p[_+1];try{b.call(w)}finally{}}else try{p.call(c)}finally{}}}}(i,s),function md(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],w="function"==typeof _?_(s):on(s[_]),b=l[c=a[p+2]],A=a[p+3];"boolean"==typeof A?w.removeEventListener(a[p],b,A):A>=0?l[c=A]():l[c=-A].unsubscribe(),p+=2}else{const _=l[c=a[p+1]];a[p].call(_)}if(null!==l){for(let p=c+1;p<l.length;p++)l[p]();s[7]=null}}(i,s),1===s[1].type&&fn(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&ni(s[3])){a!==s[3]&&Jh(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function l0(i,s,a){return function Vp(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===Ut.None||c===Ut.Emulated)return null}return Cr(l,a)}(i,s.parent,a)}function Hl(i,s,a,l,c){fn(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function c0(i,s,a){fn(i)?i.appendChild(s,a):s.appendChild(a)}function Gm(i,s,a,l,c){null!==l?Hl(i,s,a,l,c):c0(i,s,a)}function Gl(i,s){return fn(i)?i.parentNode(s):s.parentNode}let ql=function Vr(i,s,a){return 40&i.type?Cr(i,a):null};function Bp(i,s,a,l){const c=l0(i,l,s),p=s[11],w=function qm(i,s,a){return ql(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let b=0;b<a.length;b++)Gm(p,c,a[b],w,!1);else Gm(p,c,a,w,!1)}function Me(i,s){if(null!==s){const a=s.type;if(3&a)return Cr(s,i);if(4&a)return Zl(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return Me(i,l);{const c=i[s.index];return ni(c)?Zl(-1,c):on(c)}}if(32&a)return Qe(s,i)()||on(i[s.index]);{const l=ar(i,s);return null!==l?Array.isArray(l)?l[0]:Me(In(i[16]),l):Me(i,s.next)}}return null}function ar(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Zl(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return Me(l,c)}return s[7]}function tt(i,s,a,l,c,p,_){for(;null!=a;){const w=l[a.index],b=a.type;if(_&&0===s&&(w&&Sr(on(w),l),a.flags|=4),64!=(64&a.flags))if(8&b)tt(i,s,a.child,l,c,p,!1),zs(s,i,c,w,p);else if(32&b){const A=Qe(a,l);let S;for(;S=A();)zs(s,i,c,S,p);zs(s,i,c,w,p)}else 16&b?Ge(i,s,l,a,c,p):zs(s,i,c,w,p);a=_?a.projectionNext:a.next}}function _t(i,s,a,l,c,p){tt(a,l,i.firstChild,s,c,p,!1)}function Ge(i,s,a,l,c,p){const _=a[16],b=_[6].projection[l.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)zs(s,i,c,b[A],p);else tt(i,s,b,_[3],c,p,!0)}function xr(i,s,a){fn(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function $p(i,s,a){fn(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function d0(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const p=s.length;if(c+p===l||i.charCodeAt(c+p)<=32)return c}a=c+1}}const h0="ng-template";function tI(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==d0(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function f0(i){return 4===i.type&&i.value!==h0}function p0(i,s,a){return s===(4!==i.type||a?i.value:h0)}function nI(i,s,a){let l=4;const c=i.attrs||[],p=function Mt(i){for(let s=0;s<i.length;s++)if(nr(i[s]))return s;return i.length}(c);let _=!1;for(let w=0;w<s.length;w++){const b=s[w];if("number"!=typeof b){if(!_)if(4&l){if(l=2|1&l,""!==b&&!p0(i,b,a)||""===b&&1===s.length){if(Xo(l))return!1;_=!0}}else{const A=8&l?b:s[++w];if(8&l&&null!==i.attrs){if(!tI(i.attrs,A,a)){if(Xo(l))return!1;_=!0}continue}const P=bs(8&l?"class":b,c,f0(i),a);if(-1===P){if(Xo(l))return!1;_=!0;continue}if(""!==A){let V;V=P>p?"":c[P+1].toLowerCase();const z=8&l?V:null;if(z&&-1!==d0(z,A,0)||2&l&&A!==V){if(Xo(l))return!1;_=!0}}}}else{if(!_&&!Xo(l)&&!Xo(b))return!1;if(_&&Xo(b))continue;_=!1,l=b|1&l}}return Xo(l)||_}function Xo(i){return 0==(1&i)}function bs(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let p=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)p=!0;else{if(1===_||2===_){let w=s[++c];for(;"string"==typeof w;)w=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=p?1:2}return-1}return function yd(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function g0(i,s,a=!1){for(let l=0;l<s.length;l++)if(nI(i,s[l],a))return!0;return!1}function Wn(i,s){return i?":not("+s.trim()+")":s}function Et(i){let s=i[0],a=1,l=2,c="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const w=i[++a];c+="["+_+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!Xo(_)&&(s+=Wn(p,c),c=""),l=_,p=p||!Xo(l);a++}return""!==c&&(s+=Wn(p,c)),s}const Dt={};function _d(i){Yt(xt(),be(),Ar()+i,hu())}function Yt(i,s,a,l){if(!l)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&Ta(s,p,a)}else{const p=i.preOrderHooks;null!==p&&mu(s,p,0,a)}$s(a)}function ur(i,s){return i<<17|s<<2}function ui(i){return i>>17&32767}function Zm(i){return 2|i}function li(i){return(131068&i)>>2}function Fn(i,s){return-131069&i|s<<2}function Xh(i){return 1|i}function D0(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];dl(c),_.contentQueries(2,s[p],p)}}}function ku(i,s,a,l,c,p,_,w,b,A){const S=s.blueprint.slice();return S[0]=c,S[2]=140|l,Ls(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=w||i&&i[11],S[12]=b||i&&i[12]||null,S[9]=A||i&&i[9]||null,S[6]=p,S[16]=2==s.type?i[16]:S,S}function Ql(i,s,a,l,c){let p=i.data[s];if(null===p)p=function Yp(i,s,a,l,c){const p=Bo(),_=sl(),b=i.data[s]=function S0(i,s,a,l,c,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=b),null!==p&&(_?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(i,s,a,l,c),function ul(){return ct.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=c;const _=function jo(){const i=ct.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return zr(p,!0),p}function Kn(i,s,a,l){if(0===a)return-1;const c=s.length;for(let p=0;p<a;p++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function rf(i,s,a){co(s);try{const l=i.viewQuery;null!==l&&sg(1,l,a);const c=i.template;null!==c&&Km(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&D0(i,s),i.staticViewQueries&&sg(2,i.viewQuery,a);const p=i.components;null!==p&&function Kp(i,s){for(let a=0;a<s.length;a++)wr(i,s[a])}(s,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,fo()}}function Dd(i,s,a,l){const c=s[2];if(256==(256&c))return;co(s);const p=hu();try{Ls(s),function fu(i){return ct.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Km(i,s,a,2,l);const _=3==(3&c);if(!p)if(_){const A=i.preOrderCheckHooks;null!==A&&Ta(s,A,null)}else{const A=i.preOrderHooks;null!==A&&mu(s,A,0,null),Un(s,0)}if(function uf(i){for(let s=jl(i);null!==s;s=Io(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],p=c[3];0==(1024&c[2])&&Vs(p,1),c[2]|=1024}}}(s),function P0(i){for(let s=jl(i);null!==s;s=Io(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];ps(l)&&Dd(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&D0(i,s),!p)if(_){const A=i.contentCheckHooks;null!==A&&Ta(s,A)}else{const A=i.contentHooks;null!==A&&mu(s,A,1),Un(s,1)}!function Yl(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)$s(~c);else{const p=c,_=a[++l],w=a[++l];gu(_,p),w(2,s[p])}}}finally{$s(-1)}}(i,s);const w=i.components;null!==w&&function nf(i,s){for(let a=0;a<s.length;a++)yI(i,s[a])}(s,w);const b=i.viewQuery;if(null!==b&&sg(2,b,l),!p)if(_){const A=i.viewCheckHooks;null!==A&&Ta(s,A)}else{const A=i.viewHooks;null!==A&&mu(s,A,2),Un(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),p||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Vs(s[3],-1))}finally{fo()}}function fI(i,s,a,l){const c=s[10],p=!hu(),_=Fs(s);try{p&&!_&&c.begin&&c.begin(),_&&rf(i,s,l),Dd(i,s,a,l)}finally{p&&!_&&c.end&&c.end()}}function Km(i,s,a,l,c){const p=Ar(),_=2&l;try{$s(-1),_&&s.length>20&&Yt(i,s,20,hu()),a(l,c)}finally{$s(p)}}function Ym(i,s,a){!du()||(function R0(i,s,a,l){const c=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||Bi(a,s),Sr(l,s);const _=a.initialInputs;for(let w=c;w<p;w++){const b=i.data[w],A=Hr(b);A&&Td(s,a,b);const S=qn(s,i,w,a);Sr(S,s),null!==_&&Xl(0,w-c,S,b,0,_),A&&(Tr(a.index,s)[8]=S)}}(i,s,a,Cr(a,s)),128==(128&a.flags)&&function gI(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,w=function ll(){return ct.lFrame.currentDirectiveIndex}();try{$s(_);for(let b=l;b<c;b++){const A=i.data[b],S=s[b];Da(b),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&ny(A,S)}}finally{$s(-1),Da(w)}}(i,s,a))}function Qm(i,s,a=Cr){const l=s.localNames;if(null!==l){let c=s.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],w=-1===_?a(s,i):i[_];i[c++]=w}}}function T0(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Co(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Co(i,s,a,l,c,p,_,w,b,A){const S=20+l,P=S+c,V=function Cd(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Dt);return a}(S,P),z="function"==typeof A?A():A;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:w,declTNode:s,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:z,incompleteFirstPass:!1}}function na(i,s,a,l){const c=Ad(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&og(i).push(l,c.length-1))}function Jl(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function xi(i,s,a,l,c,p,_,w){const b=Cr(s,a);let S,A=s.inputs;!w&&null!=A&&(S=A[l])?(Qt(i,a,S,l,c),Rs(s)&&function Xm(i,s){const a=Tr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function Jp(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,fn(p)?p.setProperty(b,l,c):_n(l)||(b.setProperty?b.setProperty(l,c):b[l]=c))}function of(i,s,a,l){let c=!1;if(du()){const p=function N0(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];g0(a,_.selectors,!1)&&(c||(c=[]),ir(Bi(a,s),i,_.type),Hr(_)?(ry(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==p){c=!0,O0(a,i.data.length,p.length);for(let S=0;S<p.length;S++){const P=p[S];P.providersResolver&&P.providersResolver(P)}let w=!1,b=!1,A=Kn(i,s,p.length,null);for(let S=0;S<p.length;S++){const P=p[S];a.mergedAttrs=Vi(a.mergedAttrs,P.hostAttrs),iy(i,a,s,A,P),mI(A,P,_),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const V=P.type.prototype;!w&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!b&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),b=!0),A++}!function Qp(i,s){const l=s.directiveEnd,c=i.data,p=s.attrs,_=[];let w=null,b=null;for(let A=s.directiveStart;A<l;A++){const S=c[A],P=S.inputs,V=null===p||f0(s)?null:k0(P,p);_.push(V),w=Jl(P,A,w),b=Jl(S.outputs,A,b)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=w,s.outputs=b}(i,a)}_&&function tg(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const p=a[s[c+1]];if(null==p)throw new Re(-301,!1);l.push(s[c],p)}}}(a,l,_)}return a.mergedAttrs=Vi(a.mergedAttrs,a.attrs),c}function eg(i,s,a,l,c,p){const _=p.hostBindings;if(_){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const b=~s.index;(function M0(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=b&&w.push(b),w.push(l,c,_)}}function ny(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function ry(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function mI(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Hr(s)&&(a[""]=i)}}function O0(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function iy(i,s,a,l,c){i.data[l]=c;const p=c.factory||(c.factory=Gr(c.type)),_=new $o(p,Hr(c),null);i.blueprint[l]=_,a[l]=_,eg(i,s,0,l,Kn(i,a,c.hostVars,Dt),c)}function Td(i,s,a){const l=Cr(s,i),c=T0(a),p=i[10],_=ec(i,ku(i,c,null,a.onPush?64:16,l,s,p,p.createRenderer(l,a),null,null));i[s.index]=_}function di(i,s,a,l,c,p){const _=Cr(i,s);!function ng(i,s,a,l,c,p,_){if(null==p)fn(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const w=null==_?fe(p):_(p,l||"",c);fn(i)?i.setAttribute(s,c,w,a):a?s.setAttributeNS(a,c,w):s.setAttribute(c,w)}}(s[11],_,p,i.value,a,l,c)}function Xl(i,s,a,l,c,p){const _=p[s];if(null!==_){const w=l.setInput;for(let b=0;b<_.length;){const A=_[b++],S=_[b++],P=_[b++];null!==w?l.setInput(a,P,A,S):a[S]=P}}}function k0(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function sy(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function yI(i,s){const a=Tr(s,i);if(ps(a)){const l=a[1];80&a[2]?Dd(l,a,l.template,a[8]):a[5]>0&&oy(a)}}function oy(i){for(let l=jl(i);null!==l;l=Io(l))for(let c=10;c<l.length;c++){const p=l[c];if(1024&p[2]){const _=p[1];Dd(_,p,_.template,p[8])}else p[5]>0&&oy(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=Tr(a[l],i);ps(c)&&c[5]>0&&oy(c)}}function wr(i,s){const a=Tr(s,i),l=a[1];(function rg(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),rf(l,a,a[8])}function ec(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function ay(i){for(;i;){i[2]|=64;const s=In(i);if(vh(i)&&!s)return i;i=s}return null}function ig(i,s,a){const l=s[10];l.begin&&l.begin();try{Dd(i,s,i.template,a)}catch(c){throw lr(s,c),c}finally{l.end&&l.end()}}function cy(i){!function ly(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=Zh(a),c=l[1];fI(c,l,c.template,a)}}(i[8])}function sg(i,s,a){dl(0),s(i,a)}const F0=(()=>Promise.resolve(null))();function Ad(i){return i[7]||(i[7]=[])}function og(i){return i.cleanup||(i.cleanup=[])}function lr(i,s){const a=i[9],l=a?a.get(zn,null):null;l&&l.handleError(s)}function Qt(i,s,a,l,c){for(let p=0;p<a.length;){const _=a[p++],w=a[p++],b=s[_],A=i.data[_];null!==A.setInput?A.setInput(b,c,l,w):b[w]=c}}function ra(i,s,a){const l=lo(s,i);!function gd(i,s,a){fn(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function cf(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,p=0;if(null!==s)for(let _=0;_<s.length;_++){const w=s[_];"number"==typeof w?p=w:1==p?c=ue(c,w):2==p&&(l=ue(l,w+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const Rr=new Sn("INJECTOR",-1);class Dn{get(s,a=Di){if(a===Di){const l=new Error(`NullInjectorError: No provider for ${de(s)}!`);throw l.name="NullInjectorError",l}return a}}const ag=new Sn("Set Injector scope."),ia={},vI={};let es;function V0(){return void 0===es&&(es=new Dn),es}function ug(i,s=null,a=null,l){const c=Sd(i,s,a,l);return c._resolveInjectorDefTypes(),c}function Sd(i,s=null,a=null,l){return new wI(i,a,s||V0(),l)}class wI{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&Yr(a,w=>this.processProvider(w,s,a)),Yr([s],w=>this.processInjectorType(w,[],p)),this.records.set(Rr,sa(void 0,this));const _=this.records.get(ag);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:de(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Di,l=at.Default){this.assertNotDestroyed();const c=xe(this),p=Hn(void 0);try{if(!(l&at.SkipSelf)){let w=this.records.get(s);if(void 0===w){const b=function $0(i){return"function"==typeof i||"object"==typeof i&&i instanceof Sn}(s)&&Vt(s);w=b&&this.injectableDefInScope(b)?sa(hy(s),ia):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(l&at.Self?V0():this.parent).get(s,a=l&at.Optional&&a===Di?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[Dl]=_[Dl]||[]).unshift(de(s)),c)throw _;return function qs(i,s,a,l){const c=i[Dl];throw s[F]&&c.unshift(s[F]),i.message=function Zo(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=de(s);if(Array.isArray(s))c=s.map(de).join(" -> ");else if("object"==typeof s){let p=[];for(let _ in s)if(s.hasOwnProperty(_)){let w=s[_];p.push(_+":"+("string"==typeof w?JSON.stringify(w):de(w)))}c=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[Dl]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{Hn(p),xe(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(de(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Re(205,!1)}processInjectorType(s,a,l){if(!(s=Y(s)))return!1;let c=Or(s);const p=null==c&&s.ngModule||void 0,_=void 0===p?s:p,w=-1!==l.indexOf(_);if(void 0!==p&&(c=Or(p)),null==c)return!1;if(null!=c.imports&&!w){let S;l.push(_);try{Yr(c.imports,P=>{this.processInjectorType(P,a,l)&&(void 0===S&&(S=[]),S.push(P))})}finally{}if(void 0!==S)for(let P=0;P<S.length;P++){const{ngModule:V,providers:z}=S[P];Yr(z,ye=>this.processProvider(ye,V,z||ut))}}this.injectorDefTypes.add(_);const b=Gr(_)||(()=>new _);this.records.set(_,sa(b,ia));const A=c.providers;if(null!=A&&!w){const S=s;Yr(A,P=>this.processProvider(P,S,A))}return void 0!==p&&void 0!==s.providers}processProvider(s,a,l){let c=nc(s=Y(s))?s:Y(s&&s.provide);const p=function EI(i,s,a){return xd(i)?sa(void 0,i.useValue):sa(df(i),ia)}(s);if(nc(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=sa(void 0,ia,!0),_.factory=()=>wt(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,p)}hydrate(s,a){return a.value===ia&&(a.value=vI,a.value=a.factory()),"object"==typeof a.value&&a.value&&function j0(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Y(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function hy(i){const s=Vt(i),a=null!==s?s.factory:Gr(i);if(null!==a)return a;if(i instanceof Sn)throw new Re(204,!1);if(i instanceof Function)return function dn(i){const s=i.length;if(s>0)throw function bi(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new Re(204,!1);const a=function Xr(i){const s=i&&(i[Pi]||i[as]);if(s){const a=function Ts(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Re(204,!1)}function df(i,s,a){let l;if(nc(i)){const c=Y(i);return Gr(c)||hy(c)}if(xd(i))l=()=>Y(i.useValue);else if(function U0(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...wt(i.deps||[]));else if(function lg(i){return!(!i||!i.useExisting)}(i))l=()=>nt(Y(i.useExisting));else{const c=Y(i&&(i.useClass||i.provide));if(!function bI(i){return!!i.deps}(i))return Gr(c)||hy(c);l=()=>new c(...wt(i.deps))}return l}function sa(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function xd(i){return null!==i&&"object"==typeof i&&Z in i}function nc(i){return"function"==typeof i}let oa=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return ug({name:""},l,a,"");{const p=null!==(c=a.name)&&void 0!==c?c:"";return ug({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=Di,i.NULL=new Dn,i.\u0275prov=Kt({token:i,providedIn:"any",factory:()=>nt(Rr)}),i.__NG_ELEMENT_ID__=-1,i})();function SI(i,s){gs(Zh(i)[1],wn())}function vy(i){let s=function rc(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Hr(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Re(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=wy(i.inputs),_.declaredInputs=wy(i.declaredInputs),_.outputs=wy(i.outputs);const w=c.hostBindings;w&&MI(i,w);const b=c.viewQuery,A=c.contentQueries;if(b&&Y0(i,b),A&&Mi(i,A),ie(i.inputs,c.inputs),ie(i.declaredInputs,c.declaredInputs),ie(i.outputs,c.outputs),Hr(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const p=c.features;if(p)for(let _=0;_<p.length;_++){const w=p[_];w&&w.ngInherit&&w(i),w===vy&&(a=!1)}}s=Object.getPrototypeOf(s)}!function xI(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=Vi(c.hostAttrs,a=Vi(a,c.hostAttrs))}}(l)}function wy(i){return i===pr?{}:i===ut?[]:i}function Y0(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function Mi(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,p)=>{s(l,c,p),a(l,c,p)}:s}function MI(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let ic=null;function sc(){if(!ic){const i=Pt.Symbol;if(i&&i.iterator)ic=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(ic=l)}}}return ic}function gf(i){return!!Ey(i)&&(Array.isArray(i)||!(i instanceof Map)&&sc()in i)}function Ey(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function hi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function by(i,s,a,l){const c=be();return hi(c,Bs(),s)&&(xt(),di(An(),c,i,s,a,l)),by}function Od(i,s,a,l){return hi(i,Bs(),a)?s+fe(a)+l:Dt}function Cy(i,s,a,l,c,p,_,w){const b=be(),A=xt(),S=i+20,P=A.firstCreatePass?function Dy(i,s,a,l,c,p,_,w,b){const A=s.consts,S=Ql(s,i,4,_||null,Zr(A,w));of(s,a,S,Zr(A,b)),gs(s,S);const P=S.tViews=Co(2,S,l,c,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,S),P.queries=s.queries.embeddedTView(S)),S}(S,A,b,s,a,l,c,p,_):A.data[S];zr(P,!1);const V=b[11].createComment("");Bp(A,b,V,P),Sr(V,b),ec(b,b[S]=sy(V,b,V,P)),Xa(P)&&Ym(A,b,P),null!=_&&Qm(b,P,w)}function Uu(i,s=at.Default){const a=be();return null===a?nt(i,s):wi(wn(),a,Y(i),s)}function yg(){throw new Error("invalid")}function _g(i,s,a){const l=be();return hi(l,Bs(),s)&&xi(xt(),An(),l,i,s,l[11],a,!1),_g}function la(i,s,a,l,c){const _=c?"class":"style";Qt(i,a,s.inputs[_],_,l)}function wf(i,s,a,l){const c=be(),p=xt(),_=20+i,w=c[11],b=c[_]=$l(w,s,function xm(){return ct.lFrame.currentNamespace}()),A=p.firstCreatePass?function $d(i,s,a,l,c,p,_){const w=s.consts,A=Ql(s,i,2,c,Zr(w,p));return of(s,a,A,Zr(w,_)),null!==A.attrs&&cf(A,A.attrs,!1),null!==A.mergedAttrs&&cf(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,p,c,0,s,a,l):p.data[_];zr(A,!0);const S=A.mergedAttrs;null!==S&&yl(w,b,S);const P=A.classes;null!==P&&$p(w,b,P);const V=A.styles;return null!==V&&xr(w,b,V),64!=(64&A.flags)&&Bp(p,c,b,A),0===function Ia(){return ct.lFrame.elementDepthCount}()&&Sr(b,c),function lu(){ct.lFrame.elementDepthCount++}(),Xa(A)&&(Ym(p,c,A),function C0(i,s,a){if(Rc(s)){const c=s.directiveEnd;for(let p=s.directiveStart;p<c;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}(p,A,c)),null!==l&&Qm(c,A),wf}function ca(){let i=wn();sl()?function ol(){ct.lFrame.isParent=!1}():(i=i.parent,zr(i,!1));const s=i;!function cu(){ct.lFrame.elementDepthCount--}();const a=xt();return a.firstCreatePass&&(gs(a,i),Rc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Ih(i){return 0!=(16&i.flags)}(s)&&la(a,s,be(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function fp(i){return 0!=(32&i.flags)}(s)&&la(a,s,be(),s.stylesWithoutHost,!1),ca}function Fy(i,s,a,l){return wf(i,s,a,l),ca(),Fy}function Ly(){return be()}function Vy(i){return!!i&&"function"==typeof i.then}function aw(i){return!!i&&"function"==typeof i.subscribe}const uw=aw;function Uy(i,s,a,l){const c=be(),p=xt(),_=wn();return function cw(i,s,a,l,c,p,_,w){const b=Xa(l),S=i.firstCreatePass&&og(i),P=s[8],V=Ad(s);let z=!0;if(3&l.type||w){const $e=Cr(l,s),Xe=w?w($e):$e,Ce=V.length,ft=w?Gt=>w(on(Gt[l.index])):l.index;if(fn(a)){let Gt=null;if(!w&&b&&(Gt=function lw(i,s,a,l){const c=i.cleanup;if(null!=c)for(let p=0;p<c.length-1;p+=2){const _=c[p];if(_===a&&c[p+1]===l){const w=s[7],b=c[p+2];return w.length>b?w[b]:null}"string"==typeof _&&(p+=2)}return null}(i,s,c,l.index)),null!==Gt)(Gt.__ngLastListenerFn__||Gt).__ngNextListenerFn__=p,Gt.__ngLastListenerFn__=p,z=!1;else{p=wg(l,s,P,p,!1);const hn=a.listen(Xe,c,p);V.push(p,hn),S&&S.push(c,ft,Ce,Ce+1)}}else p=wg(l,s,P,p,!0),Xe.addEventListener(c,p,_),V.push(p),S&&S.push(c,ft,Ce,_)}else p=wg(l,s,P,p,!1);const ye=l.outputs;let Oe;if(z&&null!==ye&&(Oe=ye[c])){const $e=Oe.length;if($e)for(let Xe=0;Xe<$e;Xe+=2){const Ds=s[Oe[Xe]][Oe[Xe+1]].subscribe(p),fh=V.length;V.push(p,Ds),S&&S.push(c,l.index,fh,-(fh+1))}}}(p,c,c[11],_,i,s,!!a,l),Uy}function dw(i,s,a,l){try{return!1!==a(l)}catch(c){return lr(i,c),!1}}function wg(i,s,a,l,c){return function p(_){if(_===Function)return l;const w=2&i.flags?Tr(i.index,s):s;0==(32&s[2])&&ay(w);let b=dw(s,0,l,_),A=p.__ngNextListenerFn__;for(;A;)b=dw(s,0,A,_)&&b,A=A.__ngNextListenerFn__;return c&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function Bu(i=1){return function js(i){return(ct.lFrame.contextLView=function fl(i,s){for(;i>0;)s=s[15],i--;return s}(i,ct.lFrame.contextLView))[8]}(i)}function By(i,s,a){return Eg(i,"",s,"",a),By}function Eg(i,s,a,l,c){const p=be(),_=Od(p,s,a,l);return _!==Dt&&xi(xt(),An(),p,i,_,p[11],c,!1),Eg}function Tg(i,s,a,l,c){const p=i[a+1],_=null===s;let w=l?ui(p):li(p),b=!1;for(;0!==w&&(!1===b||_);){const S=i[w+1];$I(i[w],s)&&(b=!0,i[w+1]=l?Xh(S):Zm(S)),w=l?ui(S):li(S)}b&&(i[a+1]=l?Zm(p):Xh(p))}function $I(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Gs(i,s)>=0}const Er={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function yw(i){return i.substring(Er.key,Er.keyEnd)}function gc(i,s){const a=Er.textEnd;return a===s?-1:(s=Er.keyEnd=function vw(i,s,a){for(;s<a&&i.charCodeAt(s)>32;)s++;return s}(i,Er.key=s,a),mc(i,s,a))}function mc(i,s,a){for(;s<a&&i.charCodeAt(s)<=32;)s++;return s}function Hy(i,s,a){return So(i,s,a,!1),Hy}function Gy(i,s){return So(i,s,null,!0),Gy}function ha(i,s){for(let a=function HI(i){return function Cf(i){Er.key=0,Er.keyEnd=0,Er.value=0,Er.valueEnd=0,Er.textEnd=i.length}(i),gc(i,mc(i,0,Er.textEnd))}(s);a>=0;a=gc(s,a))Lr(i,yw(s),!0)}function So(i,s,a,l){const c=be(),p=xt(),_=_i(2);p.firstUpdatePass&&Cw(p,i,_,l),s!==Dt&&hi(c,_,s)&&Mg(p,p.data[Ar()],c,c[11],i,c[_+1]=function Sw(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=de(ws(i)))),i}(s,a),l,_)}function Dw(i,s){return s>=i.expandoStartIndex}function Cw(i,s,a,l){const c=i.data;if(null===c[a+1]){const p=c[Ar()],_=Dw(i,a);xw(p,l)&&null===s&&!_&&(s=!1),s=function qy(i,s,a,l){const c=function Ca(i){const s=ct.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=Ba(a=qd(null,i,s,a,l),s.attrs,l),p=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=qd(c,i,s,a,l),null===p){let b=function Tw(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==li(l))return i[ui(l)]}(i,s,l);void 0!==b&&Array.isArray(b)&&(b=qd(null,i,s,b[1],l),b=Ba(b,s.attrs,l),function Aw(i,s,a,l){i[ui(a?s.classBindings:s.styleBindings)]=l}(i,s,l,b))}else p=function Zy(i,s,a){let l;const c=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<c;p++)l=Ba(l,i[p].hostAttrs,a);return Ba(l,s.attrs,a)}(i,s,l)}return void 0!==p&&(l?s.residualClasses=p:s.residualStyles=p),a}(c,p,s,l),function gw(i,s,a,l,c,p){let _=p?s.classBindings:s.styleBindings,w=ui(_),b=li(_);i[l]=a;let S,A=!1;if(Array.isArray(a)){const P=a;S=P[1],(null===S||Gs(P,S)>0)&&(A=!0)}else S=a;if(c)if(0!==b){const V=ui(i[w+1]);i[l+1]=ur(V,w),0!==V&&(i[V+1]=Fn(i[V+1],l)),i[w+1]=function Mr(i,s){return 131071&i|s<<17}(i[w+1],l)}else i[l+1]=ur(w,0),0!==w&&(i[w+1]=Fn(i[w+1],l)),w=l;else i[l+1]=ur(b,0),0===w?w=l:i[b+1]=Fn(i[b+1],l),b=l;A&&(i[l+1]=Zm(i[l+1])),Tg(i,S,l,!0),Tg(i,S,l,!1),function mw(i,s,a,l,c){const p=c?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&Gs(p,s)>=0&&(a[l+1]=Xh(a[l+1]))}(s,S,i,l,p),_=ur(w,b),p?s.classBindings=_:s.styleBindings=_}(c,p,s,a,_,l)}}function qd(i,s,a,l,c){let p=null;const _=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<_&&(p=s[w],l=Ba(l,p.hostAttrs,c),p!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function Ba(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let p=0;p<s.length;p++){const _=s[p];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Lr(i,_,!!a||s[++p]))}return void 0===i?null:i}function Mg(i,s,a,l,c,p,_,w){if(!(3&s.type))return;const b=i.data,A=b[w+1];Rg(function Ru(i){return 1==(1&i)}(A)?Wy(b,s,a,c,li(A),_):void 0)||(Rg(p)||function w0(i){return 2==(2&i)}(A)&&(p=Wy(b,null,a,c,w,_)),function Se(i,s,a,l,c){const p=fn(i);if(s)c?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:re.DashCase;if(null==c)p?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const w="string"==typeof c&&c.endsWith("!important");w&&(c=c.slice(0,-10),_|=re.Important),p?i.setStyle(a,l,c,_):a.style.setProperty(l,c,w?"important":"")}}}(l,_,lo(Ar(),a),c,p))}function Wy(i,s,a,l,c,p){const _=null===s;let w;for(;c>0;){const b=i[c],A=Array.isArray(b),S=A?b[1]:b,P=null===S;let V=a[c+1];V===Dt&&(V=P?ut:void 0);let z=P?Sa(V,l):S===l?V:void 0;if(A&&!Rg(z)&&(z=Sa(b,l)),Rg(z)&&(w=z,_))return w;const ye=i[c+1];c=_?ui(ye):li(ye)}if(null!==s){let b=p?s.residualClasses:s.residualStyles;null!=b&&(w=Sa(b,l))}return w}function Rg(i){return void 0!==i}function xw(i,s){return 0!=(i.flags&(s?16:32))}function Mw(i,s=""){const a=be(),l=xt(),c=i+20,p=l.firstCreatePass?Ql(l,c,1,s,null):l.data[c],_=a[c]=function xu(i,s){return fn(i)?i.createText(s):i.createTextNode(s)}(a[11],s);Bp(l,a,_,p),zr(p,!1)}function Ky(i){return Tf("",i,""),Ky}function Tf(i,s,a){const l=be(),c=Od(l,i,s,a);return c!==Dt&&ra(l,Ar(),c),Tf}function Pw(i,s,a){!function xo(i,s,a,l){const c=xt(),p=_i(2);c.firstUpdatePass&&Cw(c,null,p,l);const _=be();if(a!==Dt&&hi(_,p,a)){const w=c.data[Ar()];if(xw(w,l)&&!Dw(c,p)){let b=l?w.classesWithoutHost:w.stylesWithoutHost;null!==b&&(a=ue(b,a||"")),la(c,w,_,a,l)}else!function zy(i,s,a,l,c,p,_,w){c===Dt&&(c=ut);let b=0,A=0,S=0<c.length?c[0]:null,P=0<p.length?p[0]:null;for(;null!==S||null!==P;){const V=b<c.length?c[b+1]:void 0,z=A<p.length?p[A+1]:void 0;let Oe,ye=null;S===P?(b+=2,A+=2,V!==z&&(ye=P,Oe=z)):null===P||null!==S&&S<P?(b+=2,ye=S):(A+=2,ye=P,Oe=z),null!==ye&&Mg(i,s,a,l,ye,Oe,_,w),S=b<c.length?c[b]:null,P=A<p.length?p[A]:null}}(c,w,_,_[11],_[p+1],_[p+1]=function Sg(i,s,a){if(null==a||""===a)return ut;const l=[],c=ws(a);if(Array.isArray(c))for(let p=0;p<c.length;p++)i(l,c[p],!0);else if("object"==typeof c)for(const p in c)c.hasOwnProperty(p)&&i(l,p,c[p]);else"string"==typeof c&&s(l,c);return l}(i,s,a),l,p)}}(Lr,ha,Od(be(),i,s,a),!0)}const ja=void 0;var a_=["en",[["a","p"],["AM","PM"],ja],[["AM","PM"],ja,ja],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ja,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ja,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ja,"{1} 'at' {0}",ja],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function WI(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Wd={};function u_(i){const s=function Kd(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Lg(s);if(a)return a;const l=s.split("-")[0];if(a=Lg(l),a)return a;if("en"===l)return a_;throw new Error(`Missing locale data for the locale "${i}".`)}function l_(i){return u_(i)[pt.PluralCase]}function Lg(i){return i in Wd||(Wd[i]=Pt.ng&&Pt.ng.common&&Pt.ng.common.locales&&Pt.ng.common.locales[i]),Wd[i]}var pt=(()=>((pt=pt||{})[pt.LocaleId=0]="LocaleId",pt[pt.DayPeriodsFormat=1]="DayPeriodsFormat",pt[pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",pt[pt.DaysFormat=3]="DaysFormat",pt[pt.DaysStandalone=4]="DaysStandalone",pt[pt.MonthsFormat=5]="MonthsFormat",pt[pt.MonthsStandalone=6]="MonthsStandalone",pt[pt.Eras=7]="Eras",pt[pt.FirstDayOfWeek=8]="FirstDayOfWeek",pt[pt.WeekendRange=9]="WeekendRange",pt[pt.DateFormat=10]="DateFormat",pt[pt.TimeFormat=11]="TimeFormat",pt[pt.DateTimeFormat=12]="DateTimeFormat",pt[pt.NumberSymbols=13]="NumberSymbols",pt[pt.NumberFormats=14]="NumberFormats",pt[pt.CurrencyCode=15]="CurrencyCode",pt[pt.CurrencySymbol=16]="CurrencySymbol",pt[pt.CurrencyName=17]="CurrencyName",pt[pt.Currencies=18]="Currencies",pt[pt.Directionality=19]="Directionality",pt[pt.PluralCase=20]="PluralCase",pt[pt.ExtraData=21]="ExtraData",pt))();const $a="en-US";let Vg=$a;function Pf(i,s,a,l,c){if(i=Y(i),Array.isArray(i))for(let p=0;p<i.length;p++)Pf(i[p],s,a,l,c);else{const p=xt(),_=be();let w=nc(i)?i:Y(i.provide),b=df(i);const A=wn(),S=1048575&A.providerIndexes,P=A.directiveStart,V=A.providerIndexes>>20;if(nc(i)||!i.multi){const z=new $o(b,c,Uu),ye=zg(w,s,c?S:S+V,P);-1===ye?(ir(Bi(A,_),p,w),eh(p,i,s.length),s.push(w),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(z),_.push(z)):(a[ye]=z,_[ye]=z)}else{const z=zg(w,s,S+V,P),ye=zg(w,s,S,S+V),Oe=z>=0&&a[z],$e=ye>=0&&a[ye];if(c&&!$e||!c&&!Oe){ir(Bi(A,_),p,w);const Xe=function th(i,s,a,l,c){const p=new $o(i,a,Uu);return p.multi=[],p.index=s,p.componentProviders=0,Zg(p,c,l&&!a),p}(c?gE:L_,a.length,c,l,b);!c&&$e&&(a[ye].providerFactory=Xe),eh(p,i,s.length,0),s.push(w),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(Xe),_.push(Xe)}else eh(p,i,z>-1?z:ye,Zg(a[c?ye:z],b,!c&&l));!c&&l&&$e&&a[ye].componentProviders++}}}function eh(i,s,a,l){const c=nc(s),p=function B0(i){return!!i.useClass}(s);if(c||p){const b=(p?Y(s.useClass):s).prototype.ngOnDestroy;if(b){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=A.indexOf(a);-1===S?A.push(a,[l,b]):A[S+1].push(l,b)}else A.push(a,b)}}}function Zg(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function zg(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function L_(i,s,a,l){return Ff(this.multi,[])}function gE(i,s,a,l){const c=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,w=qn(a,a[1],this.providerFactory.index,l);p=w.slice(0,_),Ff(c,p);for(let b=_;b<w.length;b++)p.push(w[b])}else p=[],Ff(c,p);return p}function Ff(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Wg(i,s=[]){return a=>{a.providersResolver=(l,c)=>function F_(i,s,a){const l=xt();if(l.firstCreatePass){const c=Hr(i);Pf(a,l.data,l.blueprint,c,!0),Pf(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class mE{}class yE{resolveComponentFactory(s){throw function uD(i){const s=Error(`No component factory found for ${de(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let Kg=(()=>{class i{}return i.NULL=new yE,i})();function lD(){return nh(wn(),be())}function nh(i,s){return new Lf(Cr(i,s))}let Lf=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=lD,i})();function _E(i){return i instanceof Lf?i.nativeElement:i}class U_{}let wE=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Yg(){const i=be(),a=Tr(wn().index,i);return function EE(i){return i[11]}(mi(a)?a:i)}(),i})(),Jt=(()=>{class i{}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:()=>null}),i})();class B_{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const j_=new B_("13.3.4"),Ec={};function Qg(i,s,a,l,c=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&l.push(on(p)),ni(p))for(let w=10;w<p.length;w++){const b=p[w],A=b[1].firstChild;null!==A&&Qg(b[1],b,A,l)}const _=a.type;if(8&_)Qg(i,s,a.child,l);else if(32&_){const w=Qe(a,s);let b;for(;b=w();)l.push(b)}else if(16&_){const w=ar(s,a);if(Array.isArray(w))l.push(...w);else{const b=In(s[16]);Qg(b[1],b,w,l,!0)}}a=c?a.projectionNext:a.next}return l}class pn{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Qg(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ni(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Ai(s,l),qi(a,l))}this._attachedToViewContainer=!1}Hm(this._lView[1],this._lView)}onDestroy(s){na(this._lView[1],this._lView,null,s)}markForCheck(){ay(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ig(this._lView[1],this._lView,this.context)}checkNoChanges(){!function lf(i,s,a){Us(!0);try{ig(i,s,a)}finally{Us(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Re(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Fp(i,s){_t(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Re(902,"");this._appRef=s}}class fi extends pn{constructor(s){super(s),this._view=s}detectChanges(){cy(this._view)}checkNoChanges(){!function tc(i){Us(!0);try{cy(i)}finally{Us(!1)}}(this._view)}get context(){return null}}class Mo extends Kg{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Bt(s);return new Xg(a,this.ngModule)}}function $_(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class Xg extends mE{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function _0(i){return i.map(Et).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return $_(this.componentDef.inputs)}get outputs(){return $_(this.componentDef.outputs)}create(s,a,l,c){const p=(c=c||this.ngModule)?function Jg(i,s){return{get:(a,l,c)=>{const p=i.get(a,Ec,c);return p!==Ec||l===Ec?p:s.get(a,l,c)}}}(s,c.injector):s,_=p.get(U_,Uo),w=p.get(Jt,null),b=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=l?function Jm(i,s,a){if(fn(i))return i.selectRootElement(s,a===Ut.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(b,l,this.componentDef.encapsulation):$l(_.createRenderer(null,this.componentDef),A,function cD(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),P=this.componentDef.onPush?576:528,V=function K0(i,s){return{components:[],scheduler:i||$m,clean:F0,playerHandler:s||null,flags:0}}(),z=Co(0,null,null,1,0,null,null,null,null,null),ye=ku(null,z,V,P,null,null,_,b,w,p);let Oe,$e;co(ye);try{const Xe=function W0(i,s,a,l,c,p){const _=a[1];a[20]=i;const b=Ql(_,20,2,"#host",null),A=b.mergedAttrs=s.hostAttrs;null!==A&&(cf(b,A,!0),null!==i&&(yl(c,i,A),null!==b.classes&&$p(c,i,b.classes),null!==b.styles&&xr(c,i,b.styles)));const S=l.createRenderer(i,s),P=ku(a,T0(s),null,s.onPush?64:16,a[20],b,l,S,p||null,null);return _.firstCreatePass&&(ir(Bi(b,a),_,s.type),ry(_,b),O0(b,a.length,1)),ec(a,P),a[20]=P}(S,this.componentDef,ye,_,b);if(S)if(l)yl(b,S,["ng-version",j_.full]);else{const{attrs:Ce,classes:ft}=function zl(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===c?""!==p&&s.push(p,i[++l]):8===c&&a.push(p);else{if(!Xo(c))break;c=p}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ce&&yl(b,S,Ce),ft&&ft.length>0&&$p(b,S,ft.join(" "))}if($e=ba(z,20),void 0!==a){const Ce=$e.projection=[];for(let ft=0;ft<this.ngContentSelectors.length;ft++){const Gt=a[ft];Ce.push(null!=Gt?Array.from(Gt):null)}}Oe=function _y(i,s,a,l,c){const p=a[1],_=function x0(i,s,a){const l=wn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),iy(i,l,s,Kn(i,s,1,null),a));const c=qn(s,i,l.directiveStart,l);Sr(c,s);const p=Cr(l,s);return p&&Sr(p,s),c}(p,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(b=>b(_,s)),s.contentQueries){const b=wn();s.contentQueries(1,_,b.directiveStart)}const w=wn();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||($s(w.index),eg(a[1],w,0,w.directiveStart,w.directiveEnd,s),ny(s,_)),_}(Xe,this.componentDef,ye,V,[SI]),rf(z,ye,null)}finally{fo()}return new H_(this.componentType,Oe,nh($e,ye),ye,$e)}}class H_ extends class aD{}{constructor(s,a,l,c,p){super(),this.location=l,this._rootLView=c,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new fi(c),this.componentType=s}get injector(){return new Kr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class rh{}class xn{}const Vf=new Map;class CE extends rh{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Mo(this);const l=ln(s);this._bootstrapComponents=g(l.bootstrap),this._r3Injector=Sd(s,a,[{provide:rh,useValue:this},{provide:Kg,useValue:this.componentFactoryResolver}],de(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=oa.THROW_IF_NOT_FOUND,l=at.Default){return s===oa||s===rh||s===Rr?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class G_ extends xn{constructor(s){super(),this.moduleType=s,null!==ln(s)&&function IE(i){const s=new Set;!function a(l){const c=ln(l,!0),p=c.id;null!==p&&(function dr(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${de(s)} vs ${de(s.name)}`)}(p,Vf.get(p),l),Vf.set(p,l));const _=g(c.imports);for(const w of _)s.has(w)||(s.add(w),a(w))}(i)}(s)}create(s){return new CE(this.moduleType,s)}}function $f(i){return s=>{setTimeout(i,void 0,s)}}const eo=class vD extends d.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,p,_;let w=s,b=a||(()=>null),A=l;if(s&&"object"==typeof s){const P=s;w=null===(c=P.next)||void 0===c?void 0:c.bind(P),b=null===(p=P.error)||void 0===p?void 0:p.bind(P),A=null===(_=P.complete)||void 0===_?void 0:_.bind(P)}this.__isAsync&&(b=$f(b),w&&(w=$f(w)),A&&(A=$f(A)));const S=super.subscribe({next:w,error:b,complete:A});return s instanceof W.w0&&s.add(S),S}};function ME(){return this._results[sc()]()}class Za{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=sc(),l=Za.prototype;l[a]||(l[a]=ME)}get changes(){return this._changes||(this._changes=new eo)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=vr(s);(this._changesDetected=!function Aa(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],p=s[l];if(a&&(c=a(c),p=a(p)),p!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let ih=(()=>{class i{}return i.__NG_ELEMENT_ID__=K_,i})();const RE=ih,W_=class extends RE{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=ku(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),rf(a,l,s),new pn(l)}};function K_(){return tm(wn(),be())}function tm(i,s){return 4&i.type?new W_(s,i,nh(i,s)):null}let Dc=(()=>{class i{}return i.__NG_ELEMENT_ID__=nm,i})();function nm(){return Gu(wn(),be())}const NE=Dc,sh=class extends NE{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return nh(this._hostTNode,this._hostLView)}get injector(){return new Kr(this._hostTNode,this._hostLView)}get parentInjector(){const s=Nn(this._hostTNode,this._hostLView);if(rr(s)){const a=si(s,this._hostLView),l=tn(s);return new Kr(a[1].data[l+8],a)}return new Kr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=OE(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,p){const _=s&&!function yo(i){return"function"==typeof i}(s);let w;if(_)w=a;else{const P=a||{};w=P.index,l=P.injector,c=P.projectableNodes,p=P.ngModuleRef}const b=_?s:new Xg(Bt(s)),A=l||this.parentInjector;if(!p&&null==b.ngModule){const V=(_?A:this.parentInjector).get(rh,null);V&&(p=V)}const S=b.create(A,c,void 0,p);return this.insert(S.hostView,w),S}insert(s,a){const l=s._lView,c=l[1];if(function au(i){return ni(i[3])}(l)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const P=l[3],V=new sh(P,P[6],P[3]);V.detach(V.indexOf(s))}}const p=this._adjustIndex(a),_=this._lContainer;!function a0(i,s,a,l){const c=10+l,p=a.length;l>0&&(a[c-1][4]=s),l<p-10?(s[4]=a[c],wl(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function u0(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=128}(c,l,_,p);const w=Zl(p,_),b=l[11],A=Gl(b,_[7]);return null!==A&&function Do(i,s,a,l,c,p){l[0]=c,l[6]=s,_t(i,l,a,1,c,p)}(c,_[6],b,l,A,w),s.attachToViewContainerRef(),wl(oh(_),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=OE(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Ai(this._lContainer,a);l&&(qi(oh(this._lContainer),a),Hm(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Ai(this._lContainer,a);return l&&null!=qi(oh(this._lContainer),a)?new pn(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function OE(i){return i[8]}function oh(i){return i[8]||(i[8]=[])}function Gu(i,s){let a;const l=s[i.index];if(ni(l))a=l;else{let c;if(8&i.type)c=on(l);else{const p=s[11];c=p.createComment("");const _=Cr(i,s);Hl(p,Gl(p,_),c,function Xb(i,s){return fn(i)?i.nextSibling(s):s.nextSibling}(p,_),!1)}s[i.index]=a=sy(l,s,c,i),ec(s,a)}return new sh(a,i,s)}class Y_{constructor(s){this.queryList=s,this.matches=null}clone(){return new Y_(this.queryList)}setDirty(){this.queryList.setDirty()}}class rm{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);c.push(this.queries[_.indexInDeclarationView].clone())}return new rm(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==ev(s,a).matches&&this.queries[a].setDirty()}}class Q_{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class Tc{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(s,c);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new Tc(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class pa{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new pa(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const p=l[c];this.matchTNodeWithReadOption(s,a,wD(a,p)),this.matchTNodeWithReadOption(s,a,_l(a,s,p,!1,!1))}else l===ih?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,_l(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Lf||c===Dc||c===ih&&4&a.type)this.addMatch(a.index,-2);else{const p=_l(a,s,c,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function wD(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function bD(i,s,a,l){return-1===a?function ED(i,s){return 11&i.type?nh(i,s):4&i.type?tm(i,s):null}(s,i):-2===a?function ID(i,s,a){return a===Lf?nh(s,i):a===ih?tm(s,i):a===Dc?Gu(s,i):void 0}(i,s,l):qn(i,i[1],a,s)}function J_(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const p=i.data,_=a.matches,w=[];for(let b=0;b<_.length;b+=2){const A=_[b];w.push(A<0?null:bD(s,p[A],_[b+1],a.metadata.read))}c.matches=w}return c.matches}function X_(i,s,a,l){const c=i.queries.getByIndex(a),p=c.matches;if(null!==p){const _=J_(i,s,c,a);for(let w=0;w<p.length;w+=2){const b=p[w];if(b>0)l.push(_[w/2]);else{const A=p[w+1],S=s[-b];for(let P=10;P<S.length;P++){const V=S[P];V[17]===V[3]&&X_(V[1],V,A,l)}if(null!==S[9]){const P=S[9];for(let V=0;V<P.length;V++){const z=P[V];X_(z[1],z,A,l)}}}}}return l}function kE(i){const s=be(),a=xt(),l=cl();dl(l+1);const c=ev(a,l);if(i.dirty&&Fs(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const p=c.crossesNgTemplate?X_(a,s,l,[]):J_(a,s,c,l);i.reset(p,_E),i.notifyOnChanges()}return!0}return!1}function FE(i,s,a,l){const c=xt();if(c.firstCreatePass){const p=wn();(function BE(i,s,a){null===i.queries&&(i.queries=new Tc),i.queries.track(new pa(s,a))})(c,new Q_(s,a,l),p.index),function jE(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function UE(i,s,a){const l=new Za(4==(4&a));na(i,s,l,l.destroy),null===s[19]&&(s[19]=new rm),s[19].queries.push(new Y_(l))}(c,be(),a)}function LE(){return function VE(i,s){return i[19].queries[s].queryList}(be(),cl())}function ev(i,s){return i.queries.getByIndex(s)}function lh(...i){}const zu=new Sn("Application Initializer");let Zf=(()=>{class i{constructor(a){this.appInits=a,this.resolve=lh,this.reject=lh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const p=this.appInits[c]();if(Vy(p))a.push(p);else if(uw(p)){const _=new Promise((w,b)=>{p.subscribe({complete:w,error:b})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(nt(zu,8))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Wu=new Sn("AppId",{providedIn:"root",factory:function JE(){return`${cv()}${cv()}${cv()}`}});function cv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ka=new Sn("Platform Initializer"),UD=new Sn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),zf=new Sn("appBootstrapListener");let Ri=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const hv=new Sn("LocaleId",{providedIn:"root",factory:()=>Ft(hv,at.Optional|at.SkipSelf)||function BD(){return"undefined"!=typeof $localize&&$localize.locale||$a}()}),jD=new Sn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class pv{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let XE=(()=>{class i{compileModuleSync(a){return new G_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=g(ln(a).declarations).reduce((_,w)=>{const b=Bt(w);return b&&_.push(new Xg(b)),_},[]);return new pv(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ac=(()=>Promise.resolve(0))();function Wf(i){"undefined"==typeof Zone?Ac.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Is{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new eo(!1),this.onMicrotaskEmpty=new eo(!1),this.onStable=new eo(!1),this.onError=new eo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function tb(){let i=Pt.requestAnimationFrame,s=Pt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function RT(i){const s=()=>{!function HD(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Pt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,gv(i),i.isCheckStableRunning=!0,ch(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),gv(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,p,_,w)=>{try{return dm(i),a.invokeTask(c,p,_,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),GD(i)}},onInvoke:(a,l,c,p,_,w,b)=>{try{return dm(i),a.invoke(c,p,_,w,b)}finally{i.shouldCoalesceRunChangeDetection&&s(),GD(i)}},onHasTask:(a,l,c,p)=>{a.hasTask(c,p),l===c&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,gv(i),ch(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,c,p)=>(a.handleError(c,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Is.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Is.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+c,s,nb,lh,lh);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const nb={};function ch(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function gv(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function dm(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function GD(i){i._nesting--,ch(i)}class NT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new eo,this.onMicrotaskEmpty=new eo,this.onStable=new eo,this.onError=new eo}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let rb=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Is.assertNotInAngularZone(),Wf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Wf(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(nt(Is))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})(),qD=(()=>{class i{constructor(){this._applications=new Map,ib.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return ib.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class OT{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function kT(i){ib=i}let ib=new OT,dh=null;const ZD=new Sn("AllowMultipleToken"),zD=new Sn("PlatformOnDestroy");class WD{constructor(s,a){this.name=s,this.token=a}}function Nr(i,s,a=[]){const l=`Platform: ${s}`,c=new Sn(l);return(p=[])=>{let _=mv();if(!_||_.injector.get(ZD,!1)){const w=[...a,...p,{provide:c,useValue:!0}];i?i(w):function KD(i){if(dh&&!dh.get(ZD,!1))throw new Re(400,"");dh=i;const s=i.get(ab),a=i.get(Ka,null);a&&a.forEach(l=>l())}(function hm(i=[],s){return oa.create({name:s,providers:[{provide:ag,useValue:"platform"},{provide:zD,useValue:()=>dh=null},...i]})}(w,l))}return function No(i){const s=mv();if(!s)throw new Re(401,"");return s}()}}function mv(){var i;return null!==(i=null==dh?void 0:dh.get(ab))&&void 0!==i?i:null}let ab=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function YD(i,s){let a;return a="noop"===i?new NT:("zone.js"===i?void 0:i)||new Is({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),b=[{provide:Is,useValue:w}];return w.run(()=>{const A=oa.create({providers:b,parent:this.injector,name:a.moduleType.name}),S=a.create(A),P=S.injector.get(zn,null);if(!P)throw new Re(402,"");return w.runOutsideAngular(()=>{const V=w.onError.subscribe({next:z=>{P.handleError(z)}});S.onDestroy(()=>{_v(this._modules,S),V.unsubscribe()})}),function ub(i,s,a){try{const l=a();return Vy(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(P,w,()=>{const V=S.injector.get(Zf);return V.runInitializers(),V.donePromise.then(()=>(function d_(i){nn(i,"Expected localeId to be defined"),"string"==typeof i&&(Vg=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(hv,$a)||$a),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,l=[]){const c=lb({},l);return function PT(i,s,a){const l=new G_(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,c))}_moduleDoBootstrap(a){const l=a.injector.get(yv);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Re(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Re(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(zD,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(nt(oa))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function lb(i,s){return Array.isArray(s)?s.reduce(lb,i):Object.assign(Object.assign({},i),s)}let yv=(()=>{class i{constructor(a,l,c,p){this._zone=a,this._injector=l,this._exceptionHandler=c,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new O.y(b=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{b.next(this._stable),b.complete()})}),w=new O.y(b=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{Is.assertNotInAngularZone(),Wf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,b.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Is.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{b.next(!1)}))});return()=>{A.unsubscribe(),S.unsubscribe()}});this.isStable=(0,oe.T)(_,w.pipe((0,X.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Re(405,"");let c;c=a instanceof mE?a:this._injector.get(Kg).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const p=function sb(i){return i.isBoundToModule}(c)?void 0:this._injector.get(rh),w=c.create(oa.NULL,[],l||c.selector,p),b=w.location.nativeElement,A=w.injector.get(rb,null),S=A&&w.injector.get(qD);return A&&S&&S.registerApplication(b,A),w.onDestroy(()=>{this.detachView(w.hostView),_v(this.components,w),S&&S.unregisterApplication(b)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Re(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;_v(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(zf,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(nt(Is),nt(oa),nt(zn),nt(Zf))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function _v(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Kf=!0,vv=!1;function QD(){return vv=!0,Kf}function wv(){if(vv)throw new Error("Cannot enable prod mode after platform setup.");Kf=!1}let JD=(()=>{class i{}return i.__NG_ELEMENT_ID__=XD,i})();function XD(i){return function eC(i,s,a){if(Rs(i)&&!a){const l=Tr(i.index,s);return new pn(l,l)}return 47&i.type?new pn(s[16],s):null}(wn(),be(),16==(16&i))}class Dv{constructor(){}supports(s){return gf(s)}create(s){return new oC(s)}}const Cv=(i,s)=>s;class oC{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||Cv}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<_m(l,c,p)?a:l,w=_m(_,c,p),b=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{p||(p=[]);const A=w-c,S=b-c;if(A!=S){for(let V=0;V<A;V++){const z=V<p.length?p[V]:p[V]=0,ye=z+V;S<=ye&&ye<A&&(p[V]=z+1)}p[_.previousIndex]=S-A}}w!==b&&s(_,w,b)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!gf(s))throw new Re(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,p,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)p=s[w],_=this._trackByFn(w,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,w)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,w),l=!0),a=a._next}else c=0,function OI(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[sc()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,w=>{_=this._trackByFn(c,w),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,w,_,c)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,c)):s=this._addAfter(new aC(a,l),p,c),s}_verifyReinsertion(s,a,l,c){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?s=this._reinsertAfter(p,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,p=s._nextRemoved;return null===c?this._removalsHead=p:c._nextRemoved=p,null===p?this._removalsTail=c:p._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Qf),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Qf),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class aC{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class uC{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Qf{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new uC,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _m(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class vm{constructor(){}supports(s){return s instanceof Map||Ey(s)}create(){return new Tv}}class Tv{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Ey(s)))throw new Re(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const p=c._prev,_=c._next;return p&&(p._next=_),_&&(_._prev=p),c._next=null,c._prev=null,c}const l=new mb(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class mb{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function yb(){return new wm([new Dv])}let wm=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||yb()),deps:[[i,new Ki,new an]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new Re(901,"")}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:yb}),i})();function _b(){return new Sv([new vm])}let Sv=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||_b()),deps:[[i,new Ki,new an]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new Re(901,"")}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:_b}),i})();const dC=Nr(null,"core",[]);let hC=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(nt(yv))},i.\u0275mod=K({type:i}),i.\u0275inj=$t({}),i})()},3942:(st,Te,k)=>{k.d(Te,{Z:()=>Re});var d=k(2090),W=k(4859),O=k(9681),oe=k(1877);class X{constructor(fe,we){this._delegate=fe,this.firebase=we,(0,O._addComponent)(fe,new W.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(fe,we=O._DEFAULT_ENTRY_NAME){var et;this._delegate.checkDestroyed();const ze=this._delegate.container.getProvider(fe);return!ze.isInitialized()&&"EXPLICIT"===(null===(et=ze.getComponent())||void 0===et?void 0:et.instantiationMode)&&ze.initialize(),ze.getImmediate({identifier:we})}_removeServiceInstance(fe,we=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(we)}_addComponent(fe){(0,O._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,O._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function ue(){const Pe=function de(Pe){const fe={},we={__esModule:!0,initializeApp:function Ie(Be,ne={}){const Ze=O.initializeApp(Be,ne);if((0,d.r3)(fe,Ze.name))return fe[Ze.name];const J=new Pe(Ze,we);return fe[Ze.name]=J,J},app:ze,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function ve(Be){const ne=Be.name,Ze=ne.replace("-compat","");if(O._registerComponent(Be)&&"PUBLIC"===Be.type){const J=(se=ze())=>{if("function"!=typeof se[Ze])throw ie.create("invalid-app-argument",{appName:ne});return se[Ze]()};void 0!==Be.serviceProps&&(0,d.ZB)(J,Be.serviceProps),we[Ze]=J,Pe.prototype[Ze]=function(...se){return this._getService.bind(this,ne).apply(this,Be.multipleInstances?se:[])}}return"PUBLIC"===Be.type?we[Ze]:null},removeApp:function et(Be){delete fe[Be]},useAsService:function je(Be,ne){return"serverAuth"===ne?null:ne},modularAPIs:O}};function ze(Be){if(!(0,d.r3)(fe,Be=Be||O._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:Be});return fe[Be]}return we.default=we,Object.defineProperty(we,"apps",{get:function _e(){return Object.keys(fe).map(Be=>fe[Be])}}),ze.App=Pe,we}(X);return Pe.INTERNAL=Object.assign(Object.assign({},Pe.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function fe(we){(0,d.ZB)(Pe,we)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),Pe}(),j=new oe.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Pe=self.firebase.SDK_VERSION;Pe&&Pe.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Re=B;!function Ae(Pe){(0,O.registerVersion)("@firebase/app-compat","0.1.22",Pe)}()},9681:(st,Te,k)=>{k.r(Te),k.d(Te,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Or,_DEFAULT_ENTRY_NAME:()=>jt,_addComponent:()=>Qn,_addOrOverwriteComponent:()=>Cn,_apps:()=>He,_clearComponents:()=>Vt,_components:()=>Lt,_getProvider:()=>gi,_registerComponent:()=>Kt,_removeServiceInstance:()=>$t,deleteApp:()=>us,getApp:()=>kr,getApps:()=>as,initializeApp:()=>Pi,onLog:()=>Jn,registerVersion:()=>$r,setLogLevel:()=>Hn});var d=k(5861),W=k(4859),O=k(1877),oe=k(2090);class X{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(Je=>{if(function pe(We){const De=We.getComponent();return"VERSION"===(null==De?void 0:De.type)}(Je)){const lt=Je.getImmediate();return`${lt.library}/${lt.version}`}return null}).filter(Je=>Je).join(" ")}}const ie="@firebase/app",ue=new O.Yd("@firebase/app"),jt="[DEFAULT]",nn={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},He=new Map,Lt=new Map;function Qn(We,De){try{We.container.addComponent(De)}catch(Je){ue.debug(`Component ${De.name} failed to register with FirebaseApp ${We.name}`,Je)}}function Cn(We,De){We.container.addOrOverwriteComponent(De)}function Kt(We){const De=We.name;if(Lt.has(De))return ue.debug(`There were multiple attempts to register component ${De}.`),!1;Lt.set(De,We);for(const Je of He.values())Qn(Je,We);return!0}function gi(We,De){const Je=We.container.getProvider("heartbeat").getImmediate({optional:!0});return Je&&Je.triggerHeartbeat(),We.container.getProvider(De)}function $t(We,De,Je=jt){gi(We,De).clearInstance(Je)}function Vt(){Lt.clear()}const Xr=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ts{constructor(De,Je,lt){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},Je),this._name=Je.name,this._automaticDataCollectionEnabled=Je.automaticDataCollectionEnabled,this._container=lt,this.container.addComponent(new W.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}const Or="9.6.11";function Pi(We,De={}){"object"!=typeof De&&(De={name:De});const Je=Object.assign({name:jt,automaticDataCollectionEnabled:!1},De),lt=Je.name;if("string"!=typeof lt||!lt)throw Xr.create("bad-app-name",{appName:String(lt)});const kt=He.get(lt);if(kt){if((0,oe.vZ)(We,kt.options)&&(0,oe.vZ)(Je,kt.config))return kt;throw Xr.create("duplicate-app",{appName:lt})}const St=new W.H0(lt);for(const L of Lt.values())St.addComponent(L);const U=new Ts(We,Je,St);return He.set(lt,U),U}function kr(We=jt){const De=He.get(We);if(!De)throw Xr.create("no-app",{appName:We});return De}function as(){return Array.from(He.values())}function us(We){return at.apply(this,arguments)}function at(){return(at=(0,d.Z)(function*(We){const De=We.name;He.has(De)&&(He.delete(De),yield Promise.all(We.container.getProviders().map(Je=>Je.delete())),We.isDeleted=!0)})).apply(this,arguments)}function $r(We,De,Je){var lt;let kt=null!==(lt=nn[We])&&void 0!==lt?lt:We;Je&&(kt+=`-${Je}`);const St=kt.match(/\s|\//),U=De.match(/\s|\//);if(St||U){const L=[`Unable to register library "${kt}" with version "${De}":`];return St&&L.push(`library name "${kt}" contains illegal characters (whitespace or "/")`),St&&U&&L.push("and"),U&&L.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void ue.warn(L.join(" "))}Kt(new W.wA(`${kt}-version`,()=>({library:kt,version:De}),"VERSION"))}function Jn(We,De){if(null!==We&&"function"!=typeof We)throw Xr.create("invalid-log-argument");(0,O.Am)(We,De)}function Hn(We){(0,O.Ub)(We)}const mn="firebase-heartbeat-store";let Xn=null;function As(){return Xn||(Xn=(0,oe.X3)("firebase-heartbeat-database",1,(We,De)=>{0===De&&We.createObjectStore(mn)}).catch(We=>{throw Xr.create("storage-open",{originalErrorMessage:We.message})})),Xn}function Ut(){return(Ut=(0,d.Z)(function*(We){try{return(yield As()).transaction(mn).objectStore(mn).get(fr(We))}catch(De){throw Xr.create("storage-get",{originalErrorMessage:De.message})}})).apply(this,arguments)}function rt(We,De){return mt.apply(this,arguments)}function mt(){return(mt=(0,d.Z)(function*(We,De){try{const lt=(yield As()).transaction(mn,"readwrite");return yield lt.objectStore(mn).put(De,fr(We)),lt.complete}catch(Je){throw Xr.create("storage-set",{originalErrorMessage:Je.message})}})).apply(this,arguments)}function fr(We){return`${We.name}!${We.options.appId}`}class ro{constructor(De){this.container=De,this._heartbeatsCache=null;const Je=this.container.getProvider("app").getImmediate();this._storage=new ut(Je),this._heartbeatsCachePromise=this._storage.read().then(lt=>(this._heartbeatsCache=lt,lt))}triggerHeartbeat(){var De=this;return(0,d.Z)(function*(){const lt=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),kt=br();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==kt&&!De._heartbeatsCache.heartbeats.some(St=>St.date===kt))return De._heartbeatsCache.heartbeats.push({date:kt,agent:lt}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(St=>{const U=new Date(St.date).valueOf();return Date.now()-U<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,d.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const Je=br(),{heartbeatsToSend:lt,unsentEntries:kt}=function pr(We,De=1024){const Je=[];let lt=We.slice();for(const kt of We){const St=Je.find(U=>U.agent===kt.agent);if(St){if(St.dates.push(kt.date),Ir(Je)>De){St.dates.pop();break}}else if(Je.push({agent:kt.agent,dates:[kt.date]}),Ir(Je)>De){Je.pop();break}lt=lt.slice(1)}return{heartbeatsToSend:Je,unsentEntries:lt}}(De._heartbeatsCache.heartbeats),St=(0,oe.L)(JSON.stringify({version:2,heartbeats:lt}));return De._heartbeatsCache.lastSentHeartbeatDate=Je,kt.length>0?(De._heartbeatsCache.heartbeats=kt,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),St})()}}function br(){return(new Date).toISOString().substring(0,10)}class ut{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,d.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function ma(We){return Ut.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var Je=this;return(0,d.Z)(function*(){var lt;if(yield Je._canUseIndexedDBPromise){const St=yield Je.read();return rt(Je.app,{lastSentHeartbeatDate:null!==(lt=De.lastSentHeartbeatDate)&&void 0!==lt?lt:St.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var Je=this;return(0,d.Z)(function*(){var lt;if(yield Je._canUseIndexedDBPromise){const St=yield Je.read();return rt(Je.app,{lastSentHeartbeatDate:null!==(lt=De.lastSentHeartbeatDate)&&void 0!==lt?lt:St.lastSentHeartbeatDate,heartbeats:[...St.heartbeats,...De.heartbeats]})}})()}}function Ir(We){return(0,oe.L)(JSON.stringify({version:2,heartbeats:We})).length}!function Rt(We){Kt(new W.wA("platform-logger",De=>new X(De),"PRIVATE")),Kt(new W.wA("heartbeat",De=>new ro(De),"PRIVATE")),$r(ie,"0.7.21",We),$r(ie,"0.7.21","esm2017"),$r("fire-js","")}("")},4859:(st,Te,k)=>{k.d(Te,{H0:()=>de,wA:()=>O});var d=k(5861),W=k(2090);class O{constructor(B,j,Y){this.name=B,this.instanceFactory=j,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const oe="[DEFAULT]";class X{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const Y=new W.BH;if(this.instancesDeferred.set(j,Y),this.isInitialized(j)||this.shouldAutoInitialize())try{const qe=this.getOrInitializeService({instanceIdentifier:j});qe&&Y.resolve(qe)}catch(qe){}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const Y=this.normalizeInstanceIdentifier(null==B?void 0:B.identifier),qe=null!==(j=null==B?void 0:B.optional)&&void 0!==j&&j;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(qe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Ae){if(qe)return null;throw Ae}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function ie(ue){return"EAGER"===ue.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(j){}for(const[j,Y]of this.instancesDeferred.entries()){const qe=this.normalizeInstanceIdentifier(j);try{const Ae=this.getOrInitializeService({instanceIdentifier:qe});Y.resolve(Ae)}catch(Ae){}}}}clearInstance(B=oe){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,d.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...j.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=oe){return this.instances.has(B)}getOptions(B=oe){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,Y=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const qe=this.getOrInitializeService({instanceIdentifier:Y,options:j});for(const[Ae,Re]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Ae)&&Re.resolve(qe);return qe}onInit(B,j){var Y;const qe=this.normalizeInstanceIdentifier(j),Ae=null!==(Y=this.onInitCallbacks.get(qe))&&void 0!==Y?Y:new Set;Ae.add(B),this.onInitCallbacks.set(qe,Ae);const Re=this.instances.get(qe);return Re&&B(Re,qe),()=>{Ae.delete(B)}}invokeOnInitCallbacks(B,j){const Y=this.onInitCallbacks.get(j);if(Y)for(const qe of Y)try{qe(B,j)}catch(Ae){}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let Y=this.instances.get(B);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=B,ue===oe?void 0:ue),options:j}),this.instances.set(B,Y),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(Y,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Y)}catch(qe){}var ue;return Y||null}normalizeInstanceIdentifier(B=oe){return this.component?this.component.multipleInstances?B:oe:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class de{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new X(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(st,Te,k)=>{k.d(Te,{Am:()=>ue,Ub:()=>de,Yd:()=>ie,in:()=>W});const d=[];var W=(()=>{return(B=W||(W={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",W;var B})();const O={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},oe=W.INFO,X={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},pe=(B,j,...Y)=>{if(j<B.logLevel)return;const qe=(new Date).toISOString(),Ae=X[j];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Ae](`[${qe}]  ${B.name}:`,...Y)};class ie{constructor(j){this.name=j,this._logLevel=oe,this._logHandler=pe,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in W))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?O[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...j),this._logHandler(this,W.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...j),this._logHandler(this,W.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,W.INFO,...j),this._logHandler(this,W.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,W.WARN,...j),this._logHandler(this,W.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...j),this._logHandler(this,W.ERROR,...j)}}function de(B){d.forEach(j=>{j.setLogLevel(B)})}function ue(B,j){for(const Y of d){let qe=null;j&&j.level&&(qe=O[j.level]),Y.userLogHandler=null===B?null:(Ae,Re,...Pe)=>{const fe=Pe.map(we=>{if(null==we)return null;if("string"==typeof we)return we;if("number"==typeof we||"boolean"==typeof we)return we.toString();if(we instanceof Error)return we.message;try{return JSON.stringify(we)}catch(et){return null}}).filter(we=>we).join(" ");Re>=(null!=qe?qe:Ae.logLevel)&&B({level:W[Re].toLowerCase(),message:fe,args:Pe,type:Ae.name})}}}},5861:(st,Te,k)=>{function d(O,oe,X,pe,ie,de,ue){try{var B=O[de](ue),j=B.value}catch(Y){return void X(Y)}B.done?oe(j):Promise.resolve(j).then(pe,ie)}function W(O){return function(){var oe=this,X=arguments;return new Promise(function(pe,ie){var de=O.apply(oe,X);function ue(j){d(de,pe,ie,ue,B,"next",j)}function B(j){d(de,pe,ie,ue,B,"throw",j)}ue(void 0)})}}k.d(Te,{Z:()=>W})}},st=>{st(st.s=6673)}]);